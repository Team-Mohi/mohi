{"ast":null,"code":"import _classCallCheck from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-height: 200px;\\n  overflow-y: auto;\\n  font-size: 14px;\\n  padding: 5px 10px;\\n  margin-top: 10px;\\n  border: 0.5px solid rgba(0,0,0,0.1);\\n  border-radius:30px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import'draft-js-mention-plugin/lib/plugin.css';import style from'styled-components';import React,{Component}from'react';import{EditorState,convertToRaw}from'draft-js';import Editor from'draft-js-plugins-editor';import createMentionPlugin,{defaultSuggestionsFilter}from'draft-js-mention-plugin';import editorStyles from'./editorStyles.css';import{connect}from'react-redux';var mentions=[];var StyleEditorMention=style.div(_templateObject());var SimpleMentionEditor=/*#__PURE__*/function(_Component){_inherits(SimpleMentionEditor,_Component);var _super=_createSuper(SimpleMentionEditor);function SimpleMentionEditor(props){var _this;_classCallCheck(this,SimpleMentionEditor);_this=_super.call(this,props);_this.state={editorState:EditorState.createEmpty(),suggestions:mentions,listMention:[]};_this.onChange=function(editorState){_this.setState({editorState:editorState});var currentContent=editorState.getCurrentContent();var raw=convertToRaw(currentContent);_this.props.showMentionList(raw.entityMap);};_this.onSearchChange=function(_ref){var value=_ref.value;_this.setState({suggestions:defaultSuggestionsFilter(value,mentions)});};_this.mentionPlugin=createMentionPlugin({mentions:mentions,entityMutability:'IMMUTABLE',supportWhitespace:true});return _this;}_createClass(SimpleMentionEditor,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.friends.map(function(mention){mentions.push({name:mention.user_last_name+' '+mention.user_first_name,link:'/profile/'+mention.user_username,avatar:mention.user_avatar.toLowerCase().indexOf('data')>=0?mention.user_avatar:\"https://res.cloudinary.com/mohi-vn/image/upload/v1607061343/\"+mention.user_avatar+\".jpg\",id:mention.id});});}},{key:\"render\",//\n// onAddMention = (mention) => {\n//   this.props.showMentionList(mention);\n// }\nvalue:function render(){var _this2=this;var MentionSuggestions=this.mentionPlugin.MentionSuggestions;var plugins=[this.mentionPlugin];return/*#__PURE__*/React.createElement(\"div\",{className:editorStyles.editor},/*#__PURE__*/React.createElement(StyleEditorMention,null,/*#__PURE__*/React.createElement(Editor,{editorState:this.state.editorState,onChange:this.onChange,plugins:plugins,placeholder:\"G\\u1EAFn th\\u1EBB ai \\u0111\\xF3...\",ref:function ref(element){_this2.editor=element;}})),/*#__PURE__*/React.createElement(MentionSuggestions,{onSearchChange:this.onSearchChange,suggestions:this.state.suggestions}));}}]);return SimpleMentionEditor;}(Component);var mapStateToProps=function mapStateToProps(state){return{friends:state.friends.list};};export default connect(mapStateToProps,null)(SimpleMentionEditor);","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/EditorMention.jsx"],"names":["style","React","Component","EditorState","convertToRaw","Editor","createMentionPlugin","defaultSuggestionsFilter","editorStyles","connect","mentions","StyleEditorMention","div","SimpleMentionEditor","props","state","editorState","createEmpty","suggestions","listMention","onChange","setState","currentContent","getCurrentContent","raw","showMentionList","entityMap","onSearchChange","value","mentionPlugin","entityMutability","supportWhitespace","friends","map","mention","push","name","user_last_name","user_first_name","link","user_username","avatar","user_avatar","toLowerCase","indexOf","id","MentionSuggestions","plugins","editor","element","mapStateToProps","list"],"mappings":"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","sourcesContent":["import 'draft-js-mention-plugin/lib/plugin.css';\r\nimport style from 'styled-components';\r\nimport React, { Component } from 'react';\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport Editor from 'draft-js-plugins-editor';\r\nimport createMentionPlugin, { defaultSuggestionsFilter } from 'draft-js-mention-plugin';\r\nimport editorStyles from './editorStyles.css';\r\nimport { connect } from 'react-redux';\r\n\r\nconst mentions = [];\r\n\r\nconst StyleEditorMention = style.div`\r\n  width: 100%;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  font-size: 14px;\r\n  padding: 5px 10px;\r\n  margin-top: 10px;\r\n  border: 0.5px solid rgba(0,0,0,0.1);\r\n  border-radius:30px;\r\n`;\r\n\r\n class SimpleMentionEditor extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.mentionPlugin = createMentionPlugin({\r\n      mentions,\r\n      entityMutability: 'IMMUTABLE',\r\n      supportWhitespace: true\r\n    });\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.friends.map((mention) => {\r\n      mentions.push({\r\n        name: mention.user_last_name + ' ' + mention.user_first_name,\r\n        link: '/profile/' + mention.user_username,\r\n        avatar: mention.user_avatar.toLowerCase().indexOf('data') >= 0 ? mention.user_avatar : \"https://res.cloudinary.com/mohi-vn/image/upload/v1607061343/\" + mention.user_avatar + \".jpg\",\r\n        id: mention.id\r\n      });\r\n    })\r\n  }\r\n\r\n  state = {\r\n    editorState: EditorState.createEmpty(),\r\n    suggestions: mentions,\r\n    listMention: []\r\n  };\r\n\r\n  onChange = (editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n\r\n    let currentContent = editorState .getCurrentContent();\r\n    let raw = convertToRaw(currentContent);\r\n    this.props.showMentionList(raw.entityMap);\r\n  };\r\n\r\n  onSearchChange = ({ value }) => {\r\n    this.setState({\r\n      suggestions: defaultSuggestionsFilter(value, mentions),\r\n    });\r\n  };\r\n  //\r\n  // onAddMention = (mention) => {\r\n  //   this.props.showMentionList(mention);\r\n  // }\r\n\r\n  render() {\r\n    const { MentionSuggestions } = this.mentionPlugin;\r\n    const plugins = [this.mentionPlugin];\r\n\r\n    return (\r\n      <div className={editorStyles.editor}>\r\n        <StyleEditorMention>\r\n          <Editor\r\n            editorState={this.state.editorState}\r\n            onChange={this.onChange}\r\n            plugins={plugins}\r\n            placeholder=\"Gắn thẻ ai đó...\"\r\n            ref={(element) => { this.editor = element; }}\r\n          />\r\n        </StyleEditorMention>\r\n        <MentionSuggestions\r\n          onSearchChange={this.onSearchChange}\r\n          suggestions={this.state.suggestions}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  friends: state.friends.list,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(SimpleMentionEditor)\r\n"]},"metadata":{},"sourceType":"module"}