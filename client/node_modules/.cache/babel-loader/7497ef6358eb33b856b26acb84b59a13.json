{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\app\\\\App.jsx\";\nimport React, { useEffect } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport AppContainer from './../Containers/AppContainer.jsx';\nimport LoginContainer from './../Containers/LoginContainer.jsx';\nimport Spin from './../Components/Spin/index.jsx';\nimport { PresentialModal } from './../Components/PresentialModal/index.jsx';\nimport { useSelector } from 'react-redux';\nimport { toggleStatusPresentialModal } from './../Actions/index.jsx';\n\nvar socketIOClient = require('socket.io-client');\n\nfunction App({\n  spin,\n  presentialModal\n}) {\n  const statusSpin = useSelector(state => state.spin);\n  const statusPresentialModal = useSelector(state => state.presentialModal);\n  const socket = socketIOClient('/', {\n    transports: ['websocket'],\n    path: '/socket' // added this line of code\n\n  });\n  useEffect(() => {\n    socket.emit('join global room', {\n      id: socket.id\n    });\n    socket.on('event', data => {\n      console.log(data);\n    });\n  }, []);\n\n  function IsJsonString(str) {\n    try {\n      JSON.parse(str);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  let ustk = IsJsonString(localStorage.getItem('ustk')) ? JSON.parse(localStorage.getItem('ustk')) : '';\n  let token = ustk ? ustk.access_token : '';\n\n  if (!token) {\n    localStorage.removeItem('ustk');\n  }\n\n  const setLoginFunc = async res => {\n    await localStorage.setItem('ustk', JSON.stringify(res.data));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, token ? /*#__PURE__*/React.createElement(AppContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(LoginContainer, {\n    setLoginFunc: setLoginFunc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 38\n    }\n  }), statusSpin.status && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 31\n    }\n  }), statusPresentialModal.status && /*#__PURE__*/React.createElement(PresentialModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 42\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Web/mohi/client/src/app/App.jsx"],"names":["React","useEffect","BrowserRouter","Router","AppContainer","LoginContainer","Spin","PresentialModal","useSelector","toggleStatusPresentialModal","socketIOClient","require","App","spin","presentialModal","statusSpin","state","statusPresentialModal","socket","transports","path","emit","id","on","data","console","log","IsJsonString","str","JSON","parse","e","ustk","localStorage","getItem","token","access_token","removeItem","setLoginFunc","res","setItem","stringify","status"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,aAAa,IAAIC,MAA1B,QAAwC,kBAAxC;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,OAAOC,IAAP,MAAiB,gCAAjB;AACA,SAAQC,eAAR,QAA8B,2CAA9B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAAQC,2BAAR,QAA0C,wBAA1C;;AACA,IAAIC,cAAc,GAAGC,OAAO,CAAC,kBAAD,CAA5B;;AAEA,SAASC,GAAT,CAAa;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAb,EAAwC;AACtC,QAAMC,UAAU,GAAGP,WAAW,CAACQ,KAAK,IAAIA,KAAK,CAACH,IAAhB,CAA9B;AACA,QAAMI,qBAAqB,GAAGT,WAAW,CAACQ,KAAK,IAAIA,KAAK,CAACF,eAAhB,CAAzC;AAEA,QAAMI,MAAM,GAAGR,cAAc,CAAC,GAAD,EAAM;AAC7BS,IAAAA,UAAU,EAAE,CAAC,WAAD,CADiB;AAE7BC,IAAAA,IAAI,EAAE,SAFuB,CAEZ;;AAFY,GAAN,CAA7B;AAKEnB,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,MAAM,CAACG,IAAP,CAAY,kBAAZ,EAAgC;AAACC,MAAAA,EAAE,EAAEJ,MAAM,CAACI;AAAZ,KAAhC;AAEAJ,IAAAA,MAAM,CAACK,EAAP,CAAU,OAAV,EAAoBC,IAAD,IAAU;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACD,KAFD;AAID,GAPQ,EAON,EAPM,CAAT;;AASF,WAASG,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,QAAI;AACAC,MAAAA,IAAI,CAACC,KAAL,CAAWF,GAAX;AACH,KAFD,CAEE,OAAOG,CAAP,EAAU;AACR,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACD;;AACD,MAAIC,IAAI,GAAGL,YAAY,CAACM,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAAZ,GAA6CL,IAAI,CAACC,KAAL,CAAWG,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAA7C,GAAwF,EAAnG;AACA,MAAIC,KAAK,GAAGH,IAAI,GAAGA,IAAI,CAACI,YAAR,GAAuB,EAAvC;;AACA,MAAG,CAACD,KAAJ,EAAU;AACRF,IAAAA,YAAY,CAACI,UAAb,CAAwB,MAAxB;AACD;;AAED,QAAMC,YAAY,GAAG,MAAOC,GAAP,IAAe;AAClC,UAAMN,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BX,IAAI,CAACY,SAAL,CAAeF,GAAG,CAACf,IAAnB,CAA7B,CAAN;AACD,GAFD;;AAIA,sBAAQ;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACN,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMW,KAAK,gBAAG,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,gBAAsB,oBAAC,cAAD;AAAgB,IAAA,YAAY,EAAEG,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADjC,EAEKvB,UAAU,CAAC2B,MAAX,iBAAqB,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAF1B,EAGKzB,qBAAqB,CAACyB,MAAtB,iBAAgC,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHrC,CADM,CAAR;AAOD;;AAED,eAAe9B,GAAf","sourcesContent":["import React, {useEffect} from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport AppContainer from './../Containers/AppContainer.jsx';\r\nimport LoginContainer from './../Containers/LoginContainer.jsx';\r\nimport Spin from './../Components/Spin/index.jsx';\r\nimport {PresentialModal} from './../Components/PresentialModal/index.jsx';\r\nimport { useSelector } from 'react-redux';\r\nimport {toggleStatusPresentialModal} from './../Actions/index.jsx';\r\nvar socketIOClient = require('socket.io-client');\r\n\r\nfunction App({ spin, presentialModal }) {\r\n  const statusSpin = useSelector(state => state.spin);\r\n  const statusPresentialModal = useSelector(state => state.presentialModal);\r\n\r\n  const socket = socketIOClient('/', {\r\n        transports: ['websocket'],\r\n        path: '/socket', // added this line of code\r\n    });\r\n\r\n    useEffect(() => {\r\n      socket.emit('join global room', {id: socket.id});\r\n\r\n      socket.on('event', (data) => {\r\n        console.log(data);\r\n      });\r\n\r\n    }, []);\r\n\r\n  function IsJsonString(str) {\r\n    try {\r\n        JSON.parse(str);\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n  let ustk = IsJsonString(localStorage.getItem('ustk')) ? JSON.parse(localStorage.getItem('ustk')) : '';\r\n  let token = ustk ? ustk.access_token : '';\r\n  if(!token){\r\n    localStorage.removeItem('ustk');\r\n  }\r\n\r\n  const setLoginFunc = async (res) => {\r\n    await localStorage.setItem('ustk', JSON.stringify(res.data));\r\n  }\r\n\r\n  return (<div className=\"App\">\r\n    <Router>\r\n        { token ? <AppContainer /> : <LoginContainer setLoginFunc={setLoginFunc}/>}\r\n        {statusSpin.status && <Spin />}\r\n        {statusPresentialModal.status && <PresentialModal />}\r\n    </Router>\r\n  </div>);\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}