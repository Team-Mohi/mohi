{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{FaUserPlus,FaUserCheck,FaCheck,FaUserClock}from\"react-icons/fa\";import{Image,Transformation}from'cloudinary-react';import{Col,Tooltip,Spin}from'antd';import{Link}from'react-router-dom';import axios from'axios';function FriendItem(props){var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var _useState=useState(),_useState2=_slicedToArray(_useState,2),statusFollow=_useState2[0],setStatusFollow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingRequest=_useState4[0],setLoadingRequest=_useState4[1];var addFriendFunc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(idUser){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingRequest(true);_context.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\",{follow_users_ReceivedUser:idUser}).then(function(res){setLoadingRequest(false);setStatusFollow('send_request');});case 3:case\"end\":return _context.stop();}}},_callee);}));return function addFriendFunc(_x){return _ref.apply(this,arguments);};}();var unFriendFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(idUser){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoadingRequest(true);_context2.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'unfriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('remove_friend');});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function unFriendFunc(_x2){return _ref2.apply(this,arguments);};}();var unMyRequestFriendFunc=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idUser){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoadingRequest(true);_context3.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'unRequestFriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('remove_request');});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function unMyRequestFriendFunc(_x3){return _ref3.apply(this,arguments);};}();var acceptFriendFunc=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idUser){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoadingRequest(true);_context4.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\",{follow_users_UserId:idUser}).then(function(res){setLoadingRequest(false);setStatusFollow('accept_request');});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function acceptFriendFunc(_x4){return _ref4.apply(this,arguments);};}();var refuseFriendFunc=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(idUser){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setLoadingRequest(true);_context5.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'refuseFriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('refuse_request');});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function refuseFriendFunc(_x5){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.friends.user_username},props.friends.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:props.friends.user_avatar,alt:props.friends.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:props.friends.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:props.friends.user_avatar_cropH,width:props.friends.user_avatar_cropW,x:props.friends.user_avatar_cropX,y:props.friends.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-name\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.friends.user_username},props.friends.user_first_name+' '+props.friends.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-desc\"},props.friends.user_introduce))),props.friends.id!==currentUser.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"friend-item-right\"},props.list.filter(function(f){return f.id===props.friends.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unFriendFunc(props.friends.id);}},\"H\\u1EE7y k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserCheck,null),\" B\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,props.listfriendsRequest.filter(function(f){return f.id===props.friends.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'}},/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return acceptFriendFunc(props.friends.id);}},\"X\\xE1c nh\\u1EADn\"),/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return refuseFriendFunc(props.friends.id);}},\"T\\u1EEB ch\\u1ED1i\"))},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserClock,null),\" Tr\\u1EA3 l\\u1EDDi k\\u1EBFt b\\u1EA1n \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,props.listMyRequest.filter(function(f){return f.id===props.friends.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unMyRequestFriendFunc(props.friends.id);}},\"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaCheck,null),\" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(props.friends.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))))),statusFollow&&statusFollow==='remove_friend'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(props.friends.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)),statusFollow&&statusFollow==='accept_request'&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unFriendFunc(props.friends.id);}},\"H\\u1EE7y k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserCheck,null),\" B\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))),statusFollow&&statusFollow==='refuse_request'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(props.friends.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)),statusFollow&&statusFollow==='send_request'&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unMyRequestFriendFunc(props.friends.id);}},\"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaCheck,null),\" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))),statusFollow&&statusFollow==='remove_request'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(props.friends.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))));}export default FriendItem;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/FriendItem.jsx"],"names":["React","useState","FaUserPlus","FaUserCheck","FaCheck","FaUserClock","Image","Transformation","Col","Tooltip","Spin","Link","axios","FriendItem","props","currentUser","JSON","parse","localStorage","getItem","info","statusFollow","setStatusFollow","loadingRequest","setLoadingRequest","addFriendFunc","idUser","post","follow_users_ReceivedUser","then","res","unFriendFunc","id","action","unMyRequestFriendFunc","acceptFriendFunc","follow_users_UserId","refuseFriendFunc","friends","user_username","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_first_name","user_introduce","list","filter","f","length","background","color","padding","cursor","listfriendsRequest","listMyRequest"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { FaUserPlus, FaUserCheck, FaCheck, FaUserClock } from \"react-icons/fa\";\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {Col, Tooltip, Spin} from 'antd';\r\nimport { Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction FriendItem(props){\r\n    const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n    const [statusFollow, setStatusFollow] = useState();\r\n    const [loadingRequest, setLoadingRequest] = useState(false);\r\n\r\n    const addFriendFunc = async (idUser) => {\r\n      setLoadingRequest(true)\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\", {follow_users_ReceivedUser: idUser})\r\n      .then((res) => {\r\n        setLoadingRequest(false)\r\n        setStatusFollow('send_request')\r\n      })\r\n    }\r\n\r\n    const unFriendFunc = async (idUser) => {\r\n      setLoadingRequest(true)\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unfriend'})\r\n      .then((res) => {\r\n        setLoadingRequest(false)\r\n        setStatusFollow('remove_friend')\r\n      })\r\n    }\r\n\r\n    const unMyRequestFriendFunc = async (idUser) => {\r\n      setLoadingRequest(true)\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unRequestFriend'})\r\n      .then((res) => {\r\n        setLoadingRequest(false)\r\n        setStatusFollow('remove_request')\r\n      })\r\n    }\r\n\r\n    const acceptFriendFunc = async (idUser) => {\r\n      setLoadingRequest(true)\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\", {follow_users_UserId: idUser})\r\n      .then((res) => {\r\n        setLoadingRequest(false)\r\n        setStatusFollow('accept_request')\r\n      })\r\n    }\r\n\r\n    const refuseFriendFunc = async (idUser) => {\r\n      setLoadingRequest(true)\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'refuseFriend'})\r\n      .then((res) => {\r\n        setLoadingRequest(false)\r\n        setStatusFollow('refuse_request')\r\n      })\r\n    }\r\n\r\n  return(\r\n    <Col span={12}>\r\n      <div className=\"friend-item-container\">\r\n        <div className=\"friend-item-left\">\r\n          <div className=\"friend-item-avatar\">\r\n            <Link to={'/profile/' + props.friends.user_username}>\r\n              {props.friends.user_avatar_cropX === null ?\r\n                <img src={props.friends.user_avatar} alt={props.friends.user_last_name} />\r\n                :\r\n                <Image cloudName=\"mohi-vn\" publicId={props.friends.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                  <Transformation height={props.friends.user_avatar_cropH}  width={props.friends.user_avatar_cropW} x={props.friends.user_avatar_cropX} y={props.friends.user_avatar_cropY} crop=\"crop\" />\r\n                </Image>\r\n              }\r\n            </Link>\r\n          </div>\r\n          <div className=\"friend-item-info\">\r\n            <div className=\"friend-item-name\">\r\n              <Link to={'/profile/' + props.friends.user_username}>\r\n              {props.friends.user_first_name + ' ' + props.friends.user_last_name}\r\n              </Link>\r\n            </div>\r\n            <div className=\"friend-item-desc\">\r\n              {props.friends.user_introduce}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {props.friends.id !== currentUser.id &&\r\n          <div className=\"friend-item-right\">\r\n            {props.list.filter(f=> f.id === props.friends.id).length ?\r\n              <React.Fragment>\r\n                {!statusFollow &&\r\n                  <Tooltip\r\n                    placement={`bottom`}\r\n                    trigger={`click`}\r\n                    title={\r\n                      <div\r\n                        style={{\r\n                          background: 'rgba(0,0,0,0.8)',\r\n                          color: 'white',\r\n                          padding: '5px 10px',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                        onClick={() => unFriendFunc(props.friends.id) }\r\n                      >\r\n                        Hủy kết bạn\r\n                      </div>\r\n                    }\r\n                  >\r\n                    <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n                  </Tooltip>\r\n                }\r\n              </React.Fragment>\r\n            :\r\n            <React.Fragment>\r\n              {props.listfriendsRequest.filter(f=> f.id === props.friends.id).length ?\r\n                <React.Fragment>\r\n                  {!statusFollow &&\r\n                    <Tooltip\r\n                      placement={`bottom`}\r\n                      trigger={`click`}\r\n                      title={\r\n                        <div\r\n                          style={{\r\n                            background: 'rgba(0,0,0,0.8)',\r\n                            color: 'white',\r\n                            padding: '5px 10px',\r\n                            cursor: 'pointer'\r\n                          }}\r\n                        >\r\n                        <p onClick={() => acceptFriendFunc(props.friends.id) }>Xác nhận</p>\r\n                        <p onClick={() => refuseFriendFunc(props.friends.id) }>Từ chối</p>\r\n                        </div>\r\n                      }\r\n                    >\r\n                      <button><FaUserClock /> Trả lời kết bạn {loadingRequest && <Spin />}</button>\r\n                    </Tooltip>\r\n                  }\r\n                </React.Fragment>\r\n                :\r\n                <React.Fragment>\r\n                  {props.listMyRequest.filter(f=> f.id === props.friends.id).length ?\r\n                    <React.Fragment>\r\n                      {!statusFollow &&\r\n                      <Tooltip\r\n                        placement={`bottom`}\r\n                        trigger={`click`}\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              background: 'rgba(0,0,0,0.8)',\r\n                              color: 'white',\r\n                              padding: '5px 10px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => unMyRequestFriendFunc(props.friends.id) }\r\n                          >\r\n                            Hủy lời mời kết bạn\r\n                          </div>\r\n                        }\r\n                      >\r\n                      <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n                      </Tooltip>\r\n                      }\r\n                    </React.Fragment>\r\n                    :\r\n                    <React.Fragment>\r\n                      {!statusFollow &&\r\n                        <button onClick={() => addFriendFunc(props.friends.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                      }\r\n                    </React.Fragment>\r\n                  }\r\n                </React.Fragment>\r\n              }\r\n            </React.Fragment>\r\n            }\r\n            {statusFollow && statusFollow === 'remove_friend' &&\r\n              <button onClick={() => addFriendFunc(props.friends.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n            }\r\n            {statusFollow && statusFollow === 'accept_request' &&\r\n              <Tooltip\r\n                placement={`bottom`}\r\n                trigger={`click`}\r\n                title={\r\n                  <div\r\n                    style={{\r\n                      background: 'rgba(0,0,0,0.8)',\r\n                      color: 'white',\r\n                      padding: '5px 10px',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                    onClick={() => unFriendFunc(props.friends.id) }\r\n                  >\r\n                    Hủy kết bạn\r\n                  </div>\r\n                }\r\n              >\r\n                <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n              </Tooltip>\r\n            }\r\n            {statusFollow && statusFollow === 'refuse_request' &&\r\n              <button onClick={() => addFriendFunc(props.friends.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n            }\r\n            {statusFollow && statusFollow === 'send_request' &&\r\n              <Tooltip\r\n                placement={`bottom`}\r\n                trigger={`click`}\r\n                title={\r\n                  <div\r\n                    style={{\r\n                      background: 'rgba(0,0,0,0.8)',\r\n                      color: 'white',\r\n                      padding: '5px 10px',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                    onClick={() => unMyRequestFriendFunc(props.friends.id) }\r\n                  >\r\n                    Hủy lời mời kết bạn\r\n                  </div>\r\n                }\r\n              >\r\n              <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n              </Tooltip>\r\n            }\r\n            {statusFollow && statusFollow === 'remove_request' &&\r\n              <button onClick={() => addFriendFunc(props.friends.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n    </Col>\r\n  )\r\n}\r\n\r\nexport default FriendItem;\r\n"]},"metadata":{},"sourceType":"module"}