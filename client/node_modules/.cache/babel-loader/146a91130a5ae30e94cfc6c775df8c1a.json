{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import EditorUpdatePost from'./EditorUpdatePost.jsx';import'./ModalUpdatePostProfile.css';import{Button,Select,message,Space}from'antd';import UploadMuti from'./UploadMuti.jsx';import axios from'axios';import{MdPublic}from\"react-icons/md\";import{FaUserFriends,FaLock}from\"react-icons/fa\";import{toggleStatusPresentialModal}from'./../../Actions/index.jsx';import{updatePostProfile}from'./../../Actions/index.jsx';function ModalUpdatePostProfile(_ref){var presentialModal=_ref.presentialModal;var _useSelector=useSelector(function(state){return state.presentialModal;}),data=_useSelector.data;var _useState=useState(data.post_Content),_useState2=_slicedToArray(_useState,2),newContentPost=_useState2[0],setNewContentPost=_useState2[1];var _useState3=useState(data.images_post),_useState4=_slicedToArray(_useState3,2),fileList=_useState4[0],setFileList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadingUpdate=_useState6[0],setLoadingUpdate=_useState6[1];var Option=Select.Option;var _useState7=useState(data.post_Privacy),_useState8=_slicedToArray(_useState7,2),privacyNewFeed=_useState8[0],setPrivacyNewFeed=_useState8[1];var dispatch=useDispatch();var onChangePrivacyNewFeed=function onChangePrivacyNewFeed(value){setPrivacyNewFeed(value);};var changeStatusButtonSubmit=function changeStatusButtonSubmit(value){setNewContentPost(value);};var uploadMuti=function uploadMuti(files){setFileList(files);console.log(files);};var update=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoadingUpdate(true);_context.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/update-post-profile\",{id:data.id,post_Content:newContentPost,post_Privacy:privacyNewFeed,post_images_Url:fileList}).then(function(res){setLoadingUpdate(false);dispatch(updatePostProfile({idPost:data.id,data:res.data}));dispatch(toggleStatusPresentialModal());message.success('Chỉnh sửa bài viết thành công');}).catch(function(e){dispatch(toggleStatusPresentialModal());message.error('Đã xảy ra lỗi không mong muốn vui lòng thử lại');});case 3:case\"end\":return _context.stop();}}},_callee);}));return function update(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Space,null,/*#__PURE__*/React.createElement(\"div\",{className:\"modal-custom modal_update_post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"update-post-content\"},/*#__PURE__*/React.createElement(EditorUpdatePost,{value:data.post_Content?data.post_Content:'',changeStatusButtonSubmit:changeStatusButtonSubmit})),/*#__PURE__*/React.createElement(\"div\",{className:\"update-upload-muti-image\"},/*#__PURE__*/React.createElement(UploadMuti,{uploadMuti:uploadMuti,imagesPost:data.images_post})),/*#__PURE__*/React.createElement(\"div\",{className:\"update-post-select-privacy\"},/*#__PURE__*/React.createElement(Select,{className:\"select-privacy select-privacy-update\",defaultValue:privacyNewFeed,style:{width:'100%'},onSelect:function onSelect(value){return onChangePrivacyNewFeed(value);}},/*#__PURE__*/React.createElement(Option,{value:\"public\"},/*#__PURE__*/React.createElement(MdPublic,null),\" C\\xF4ng khai\"),/*#__PURE__*/React.createElement(Option,{value:\"friend\"},/*#__PURE__*/React.createElement(FaUserFriends,null),\" B\\u1EA1n b\\xE8\"),/*#__PURE__*/React.createElement(Option,{value:\"onlyme\"},/*#__PURE__*/React.createElement(FaLock,null),\" Ch\\u1EC9 m\\xECnh t\\xF4i\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"button-update-post\"},!loadingUpdate?/*#__PURE__*/React.createElement(\"button\",{onClick:update},\"\\u0110\\u0103ng\"):/*#__PURE__*/React.createElement(Button,{loading:true},\"\\u0110\\u0103ng\")))));}export default ModalUpdatePostProfile;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/PresentialModal/ModalUpdatePostProfile.jsx"],"names":["React","useState","useDispatch","useSelector","EditorUpdatePost","Button","Select","message","Space","UploadMuti","axios","MdPublic","FaUserFriends","FaLock","toggleStatusPresentialModal","updatePostProfile","ModalUpdatePostProfile","presentialModal","state","data","post_Content","newContentPost","setNewContentPost","images_post","fileList","setFileList","loadingUpdate","setLoadingUpdate","Option","post_Privacy","privacyNewFeed","setPrivacyNewFeed","dispatch","onChangePrivacyNewFeed","value","changeStatusButtonSubmit","uploadMuti","files","console","log","update","post","id","post_images_Url","then","res","idPost","success","catch","e","error","width"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport EditorUpdatePost from './EditorUpdatePost.jsx';\r\nimport './ModalUpdatePostProfile.css';\r\nimport {Button, Select, message, Space} from 'antd';\r\nimport UploadMuti from './UploadMuti.jsx';\r\nimport axios from 'axios';\r\nimport {MdPublic} from \"react-icons/md\";\r\nimport {FaUserFriends, FaLock} from \"react-icons/fa\";\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\nimport { updatePostProfile } from './../../Actions/index.jsx';\r\n\r\nfunction ModalUpdatePostProfile({ presentialModal }){\r\n  const {data} = useSelector(state => state.presentialModal);\r\n  const [newContentPost, setNewContentPost] = useState(data.post_Content);\r\n  const [fileList, setFileList] = useState(data.images_post);\r\n  const [loadingUpdate, setLoadingUpdate] = useState(false);\r\n  const {Option} = Select;\r\n  const [privacyNewFeed, setPrivacyNewFeed] = useState(data.post_Privacy);\r\n  const dispatch= useDispatch();\r\n\r\n  const onChangePrivacyNewFeed = (value) => {\r\n    setPrivacyNewFeed(value)\r\n  }\r\n\r\n  const changeStatusButtonSubmit = (value) => {\r\n    setNewContentPost(value)\r\n  }\r\n\r\n  const uploadMuti = (files) => {\r\n    setFileList(files)\r\n    console.log(files);\r\n\r\n  }\r\n\r\n  const update = async () => {\r\n    setLoadingUpdate(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/update-post-profile\", {\r\n      id: data.id,\r\n      post_Content: newContentPost,\r\n      post_Privacy: privacyNewFeed,\r\n      post_images_Url: fileList\r\n    })\r\n    .then((res) => {\r\n      setLoadingUpdate(false)\r\n      dispatch(updatePostProfile({idPost: data.id, data: res.data}))\r\n      dispatch(toggleStatusPresentialModal())\r\n      message.success('Chỉnh sửa bài viết thành công');\r\n    })\r\n    .catch((e) => {\r\n      dispatch(toggleStatusPresentialModal())\r\n      message.error('Đã xảy ra lỗi không mong muốn vui lòng thử lại');\r\n    })\r\n  }\r\n\r\n  return(\r\n    <React.Fragment>\r\n      <Space>\r\n      <div className=\"modal-custom modal_update_post\">\r\n        <div className=\"update-post-content\">\r\n          <EditorUpdatePost value={data.post_Content ? data.post_Content : ''} changeStatusButtonSubmit={changeStatusButtonSubmit}/>\r\n        </div>\r\n        <div className=\"update-upload-muti-image\">\r\n          <UploadMuti uploadMuti={uploadMuti} imagesPost={data.images_post}/>\r\n        </div>\r\n        <div className=\"update-post-select-privacy\">\r\n          <Select className=\"select-privacy select-privacy-update\" defaultValue={privacyNewFeed} style={{ width: '100%' }} onSelect={(value) => onChangePrivacyNewFeed(value)}>\r\n              <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n              <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n              <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n          </Select>\r\n        </div>\r\n        <div className=\"button-update-post\">\r\n          {!loadingUpdate ?\r\n          <button onClick={update}>Đăng</button>\r\n            :\r\n          <Button loading>Đăng</Button>\r\n          }\r\n        </div>\r\n      </div>\r\n    </Space>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ModalUpdatePostProfile;\r\n"]},"metadata":{},"sourceType":"module"}