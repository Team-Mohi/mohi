{"ast":null,"code":"import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./PopupEditPage.css';import L from\"leaflet\";import*as ELG from\"esri-leaflet-geocoder\";import\"leaflet/dist/leaflet.css\";import\"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css\";import{PUBLIC_URL}from'./../../Constants/public.jsx';import{AiOutlineClose}from\"react-icons/ai\";function PopupEditPage(props){var _useState=useState(10.7553411),_useState2=_slicedToArray(_useState,2),lat=_useState2[0],setLat=_useState2[1];var _useState3=useState(106.4150395),_useState4=_slicedToArray(_useState3,2),long=_useState4[0],setLong=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),zoom=_useState6[0],setZoom=_useState6[1];var myIcon=L.icon({iconUrl:PUBLIC_URL+'address_icon.png',iconSize:[30,30],popupAnchor:[0,-10]});useEffect(function(){var map=L.map('map_page').setView([lat,long],zoom);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'}).addTo(map);// default location in HCM city if wasn't choose location\nvar marker_first=L.marker([lat,long],{icon:myIcon,draggable:'true'}).addTo(map).bindPopup('ReactJS Việt Nam').openPopup();marker_first.on('dragend',function(event){var marker=event.target;var result=marker.getLatLng();setLat(result.lat);setLong(result.lng);});//search and choose location\nvar searchControl=new ELG.Geosearch().addTo(map);var results=new L.LayerGroup().addTo(map);searchControl.on(\"results\",function(data){map.removeLayer(marker_first);results.clearLayers();for(var i=data.results.length-1;i>=0;i--){var marker_search=L.marker(data.results[i].latlng,{icon:myIcon,draggable:'true'});setLat(marker_search._latlng.lat);setLong(marker_search._latlng.lng);results.addLayer(marker_search);marker_search.on('dragend',function(event){var marker=event.target;var result=marker.getLatLng();setLat(result.lat);setLong(result.lng);});}});},[]);var savePageAddress=function savePageAddress(){console.log(lat,long);props.closeEditLocationPageFunc();};var closeEditLocationPage=function closeEditLocationPage(){props.closeEditLocationPageFunc();};return/*#__PURE__*/React.createElement(\"div\",{className:\"popup-edit-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"popup-edit-page-container\",onClick:closeEditLocationPage},/*#__PURE__*/React.createElement(AiOutlineClose,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"map-page-container\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Ch\\u1EC9nh s\\u1EEDa v\\u1ECB tr\\xED c\\u1EEDa h\\xE0ng \",/*#__PURE__*/React.createElement(Link,{to:\"\"},\"ReactJS Vi\\u1EC7t Nam\"),/*#__PURE__*/React.createElement(\"small\",null,\"( Di chuy\\u1EC3n v\\u1ECB tr\\xED c\\xF3 s\\u1EB5n ho\\u1EB7c t\\xECm ki\\u1EBFm \\u0111\\u1ECBa \\u0111i\\u1EC3m \\u0111\\u1EC3 c\\xE0i \\u0111\\u1EB7t l\\u1EA1i v\\u1ECB tr\\xED )\")),/*#__PURE__*/React.createElement(\"div\",{id:\"map_page\",className:\"map_page\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"map-page-button\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:savePageAddress},\"X\\xE1c nh\\u1EADn\"))));}export default PopupEditPage;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Page/PopupEditPage.jsx"],"names":["React","useState","useEffect","Link","L","ELG","PUBLIC_URL","AiOutlineClose","PopupEditPage","props","lat","setLat","long","setLong","zoom","setZoom","myIcon","icon","iconUrl","iconSize","popupAnchor","map","setView","tileLayer","maxZoom","attribution","addTo","marker_first","marker","draggable","bindPopup","openPopup","on","event","target","result","getLatLng","lng","searchControl","Geosearch","results","LayerGroup","data","removeLayer","clearLayers","i","length","marker_search","latlng","_latlng","addLayer","savePageAddress","console","log","closeEditLocationPageFunc","closeEditLocationPage"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport'./PopupEditPage.css';\r\nimport L from \"leaflet\";\r\nimport * as ELG from \"esri-leaflet-geocoder\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css\";\r\nimport {PUBLIC_URL} from './../../Constants/public.jsx';\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\n\r\nfunction PopupEditPage(props){\r\n  const [lat, setLat] = useState(10.7553411);\r\n  const [long, setLong] = useState(106.4150395);\r\n  const [zoom, setZoom] = useState(5);\r\n  const myIcon = L.icon({\r\n    iconUrl: PUBLIC_URL + 'address_icon.png',\r\n    iconSize: [30, 30],\r\n    popupAnchor: [0,-10],\r\n  });\r\n  useEffect(() => {\r\n    let map = L.map('map_page').setView([lat, long], zoom);\r\n\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    \tmaxZoom: 19,\r\n    \tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(map);\r\n\r\n    // default location in HCM city if wasn't choose location\r\n    let marker_first = L.marker([lat, long], {icon: myIcon, draggable:'true'}).addTo(map)\r\n        .bindPopup('ReactJS Việt Nam')\r\n        .openPopup();\r\n     marker_first.on('dragend', function(event) {\r\n        let marker = event.target;\r\n        let result = marker.getLatLng();\r\n        setLat(result.lat);\r\n        setLong(result.lng);\r\n    });\r\n\r\n    //search and choose location\r\n    const searchControl = new ELG.Geosearch().addTo(map);\r\n    const results = new L.LayerGroup().addTo(map);\r\n    searchControl.on(\"results\", function (data) {\r\n      map.removeLayer(marker_first)\r\n      results.clearLayers();\r\n      for (let i = data.results.length - 1; i >= 0; i--) {\r\n        let marker_search = L.marker(data.results[i].latlng, {icon: myIcon, draggable:'true'})\r\n        setLat(marker_search._latlng.lat);\r\n        setLong(marker_search._latlng.lng);\r\n        results.addLayer(marker_search);\r\n        marker_search.on('dragend', function(event) {\r\n            let marker = event.target;\r\n            let result = marker.getLatLng();\r\n            setLat(result.lat);\r\n            setLong(result.lng);\r\n        });\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const savePageAddress = () => {\r\n    console.log(lat, long);\r\n    props.closeEditLocationPageFunc()\r\n  }\r\n\r\n  const closeEditLocationPage = () => {\r\n    props.closeEditLocationPageFunc()\r\n  }\r\n\r\n    return(\r\n      <div className=\"popup-edit-page\">\r\n        <div className=\"popup-edit-page-container\" onClick={closeEditLocationPage}>\r\n          <AiOutlineClose />\r\n        </div>\r\n        <div className=\"map-page-container\" >\r\n          <h5>Chỉnh sửa vị trí cửa hàng <Link to=\"\">ReactJS Việt Nam</Link><small>( Di chuyển vị trí có sẵn hoặc tìm kiếm địa điểm để cài đặt lại vị trí )</small></h5>\r\n          <div id=\"map_page\" className=\"map_page\"></div>\r\n          <div className=\"map-page-button\">\r\n            <button type=\"submit\" onClick={savePageAddress}>Xác nhận</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default PopupEditPage;\r\n"]},"metadata":{},"sourceType":"module"}