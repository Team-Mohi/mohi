{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{AiFillPicture}from'react-icons/ai';import{Image,Transformation}from'cloudinary-react';import{Link,Route,Switch}from'react-router-dom';import'./FriendRequests.css';import{useSelector,useDispatch}from'react-redux';import{Spin}from'antd';import axios from'axios';function FriendRequests(_ref){var friendsRequest=_ref.friendsRequest;var _useSelector=useSelector(function(state){return state.friendsRequest;}),list=_useSelector.list,loading=_useSelector.loading;var dispatch=useDispatch();var _useState=useState('default'),_useState2=_slicedToArray(_useState,2),isAccept=_useState2[0],setIsAccept=_useState2[1];var Button=function Button(props){var _useState3=useState('default'),_useState4=_slicedToArray(_useState3,2),isAccept=_useState4[0],setIsAccept=_useState4[1];var onSubmitFriendRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type,id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type==='accept')){_context.next=6;break;}setIsAccept(true);_context.next=4;return axios.post('https://www.api.mohi.vn/api/auth/accept-friend',{follow_users_UserId:id});case 4:_context.next=9;break;case 6:setIsAccept(false);_context.next=9;return axios.post('https://www.api.mohi.vn/api/auth/refuse-friend',{follow_users_UserId:id});case 9:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitFriendRequest(_x,_x2){return _ref2.apply(this,arguments);};}();if(!isAccept){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{style:{backgroundColor:'red',color:'white'}},\"\\u0110\\xE3 h\\u1EE7y\"));}return/*#__PURE__*/React.createElement(React.Fragment,null,isAccept&&isAccept==='default'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onSubmitFriendRequest('accept',props.user.id);},style:{backgroundColor:'rgba(0,128,128)',color:'white'}},\"X\\xE1c nh\\u1EADn\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onSubmitFriendRequest('remove',props.user.id);}},\"H\\u1EE7y\")):/*#__PURE__*/React.createElement(\"button\",{style:{backgroundColor:'rgba(0,128,128)',color:'white'}},\"B\\u1EA1n b\\xE8\"));};if(loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"noti-all\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-container\",style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh'}},/*#__PURE__*/React.createElement(Spin,null)));}if(!loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"noti-all\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-title\"},/*#__PURE__*/React.createElement(\"h4\",null,\"L\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n c\\u1EE7a b\\u1EA1n\"),/*#__PURE__*/React.createElement(Link,{to:\"/friend-sent\"},/*#__PURE__*/React.createElement(\"span\",null,\"Xem y\\xEAu c\\u1EA7u \\u0111\\xE3 g\\u1EEDi\"))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh'}},\"B\\u1EA1n ch\\u01B0a c\\xF3 l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")));}var FriendRequests=function FriendRequests(){return/*#__PURE__*/React.createElement(React.Fragment,null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"friends-requests-all\",style:{marginTop:\"65px\"}},\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-title\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Tr\\u1EA3 l\\u1EDDi \",list.length,\" l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n c\\u1EE7a b\\u1EA1n\"),/*#__PURE__*/React.createElement(Link,{to:\"/friend-sent\"},/*#__PURE__*/React.createElement(\"span\",null,\"Xem y\\xEAu c\\u1EA7u \\u0111\\xE3 g\\u1EEDi\"))),list.map(function(rq,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-container\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+rq.user_username},rq.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:rq.user_avatar,alt:rq.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:rq.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:rq.user_avatar_cropH,width:rq.user_avatar_cropW,x:rq.user_avatar_cropX,y:rq.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-name\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+rq.user_username},rq.user_first_name+' '+rq.user_last_name)))),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-requests-item-right\"},/*#__PURE__*/React.createElement(Button,{user:rq})));}))));};return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{component:FriendRequests}));}export default FriendRequests;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/FriendRequests/FriendRequests.jsx"],"names":["React","useState","AiFillPicture","Image","Transformation","Link","Route","Switch","useSelector","useDispatch","Spin","axios","FriendRequests","friendsRequest","state","list","loading","dispatch","isAccept","setIsAccept","Button","props","onSubmitFriendRequest","type","id","post","follow_users_UserId","backgroundColor","color","user","length","display","alignItems","justifyContent","height","marginTop","map","rq","index","user_username","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_first_name"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {AiFillPicture} from 'react-icons/ai';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {Link, Route, Switch} from 'react-router-dom';\r\nimport './FriendRequests.css';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {Spin} from 'antd';\r\nimport axios from 'axios';\r\n\r\nfunction FriendRequests({friendsRequest}) {\r\n  const {list, loading} = useSelector(state => state.friendsRequest);\r\n  const dispatch = useDispatch();\r\n  const [isAccept, setIsAccept] = useState('default');\r\n\r\n  const Button = (props) => {\r\n      const [isAccept, setIsAccept] = useState('default');\r\n\r\n      const onSubmitFriendRequest = async (type, id) => {\r\n        if(type === 'accept'){\r\n          setIsAccept(true)\r\n          await axios.post('https://www.api.mohi.vn/api/auth/accept-friend', {follow_users_UserId: id})\r\n        }else {\r\n          setIsAccept(false)\r\n          await axios.post('https://www.api.mohi.vn/api/auth/refuse-friend', {follow_users_UserId: id})\r\n        }\r\n      }\r\n\r\n      if(!isAccept){\r\n        return(\r\n          <React.Fragment>\r\n              <button style={{backgroundColor: 'red', color: 'white'}}>Đã hủy</button>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n\r\n      return(\r\n        <React.Fragment>\r\n          {isAccept && isAccept === 'default' ? <>\r\n            <button onClick={() => onSubmitFriendRequest('accept', props.user.id)} style={{backgroundColor: 'rgba(0,128,128)', color: 'white'}}>Xác nhận</button>\r\n          <button onClick={() => onSubmitFriendRequest('remove', props.user.id)}>Hủy</button>\r\n        </>\r\n          :\r\n            <button style={{backgroundColor: 'rgba(0,128,128)', color: 'white'}}>Bạn bè</button>\r\n          }\r\n        </React.Fragment>\r\n      )\r\n  }\r\n\r\n\r\n\r\n  if (loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          height: '100vh'\r\n        }}>\r\n        <Spin/>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  if (!loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" >\r\n        <div className=\"friend-requests-title\">\r\n          <h4>\r\n          Lời mời kết bạn của bạn\r\n          </h4>\r\n          <Link to=\"/friend-sent\">\r\n            <span>\r\n              Xem yêu cầu đã gửi</span>\r\n          </Link>\r\n        </div>\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '100vh'\r\n          }}>\r\n          Bạn chưa có lời mời kết bạn\r\n        </div>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  const FriendRequests = () => {\r\n    return (<> < div className = \"friends-requests-all\" style = {{ marginTop: \"65px\" }} > <div className=\"friend-requests-container\">\r\n      <div className=\"friend-requests-title\">\r\n        <h4>\r\n          Trả lời {list.length} lời mời kết bạn của bạn</h4>\r\n        <Link to=\"/friend-sent\">\r\n          <span>\r\n            Xem yêu cầu đã gửi</span>\r\n        </Link>\r\n      </div>\r\n      {list.map((rq, index) => {\r\n        return(\r\n          <div className=\"friend-requests-item-container\" key={index}>\r\n            <div className=\"friend-requests-item-left\">\r\n              <div className=\"friend-requests-item-avatar\">\r\n                <Link to={'/profile/' + rq.user_username}>\r\n                  {rq.user_avatar_cropX === null ?\r\n                    <img src={rq.user_avatar} alt={rq.user_last_name} />\r\n                    :\r\n                    <Image cloudName=\"mohi-vn\" publicId={rq.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                      <Transformation height={rq.user_avatar_cropH}  width={rq.user_avatar_cropW} x={rq.user_avatar_cropX} y={rq.user_avatar_cropY} crop=\"crop\" />\r\n                    </Image>\r\n                  }\r\n                </Link>\r\n              </div>\r\n              <div className=\"friend-requests-item-info\">\r\n                <div className=\"friend-requests-item-name\">\r\n                  <Link to={'/profile/' + rq.user_username}>\r\n                    {rq.user_first_name + ' ' + rq.user_last_name}\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"friend-requests-item-right\">\r\n              <Button user={rq} />\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  </div>\r\n</>)\r\n  }\r\n\r\n  return (<Switch>\r\n    <Route component={FriendRequests}/>\r\n  </Switch>)\r\n\r\n}\r\n\r\nexport default FriendRequests;\r\n"]},"metadata":{},"sourceType":"module"}