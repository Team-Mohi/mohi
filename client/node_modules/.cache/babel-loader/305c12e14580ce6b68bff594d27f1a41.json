{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\Notifications\\\\Notifications.jsx\";\nimport React, { useEffect } from 'react';\nimport { AiFillPicture } from 'react-icons/ai';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport { Image, Transformation } from 'cloudinary-react';\nimport { FaCommentAlt, FaRegSmile } from 'react-icons/fa';\nimport { BsThreeDotsVertical } from 'react-icons/bs';\nimport './Notifications.css';\nimport moment from 'moment';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Spin, Tooltip } from 'antd';\nimport axios from 'axios';\nimport { removeOneNoti } from './../../Actions/index.jsx';\nimport { readNoti } from './../../Actions/index.jsx';\n\nfunction Notifications({\n  notifycations\n}) {\n  const {\n    list,\n    loading\n  } = useSelector(state => state.notifycations);\n  const dispatch = useDispatch();\n\n  const removeNoti = async id => {\n    dispatch(removeOneNoti(id));\n    await axios.post('https://www.api.mohi.vn/api/auth/delete-notification', {\n      id: id\n    });\n  };\n\n  useEffect(() => {\n    readNotiFunc();\n  }, []);\n\n  const readNotiFunc = async () => {\n    await axios.post(\"https://www.api.mohi.vn/api/auth/read-notification\").then(res => {\n      dispatch(readNoti());\n    });\n  };\n\n  moment.updateLocale('en', {\n    relativeTime: {\n      future: \"%s\",\n      past: \"%s\",\n      s: 'vài giây',\n      ss: '%d phút',\n      m: \"1 phút\",\n      mm: \"%d phút\",\n      h: \"%d giờ\",\n      hh: \"%d giờ\",\n      d: \"một ngày\",\n      dd: \"%d ngày\",\n      w: \"một tuần\",\n      ww: \"%d tuần\",\n      M: \"một tháng\",\n      MM: \"%d tháng\",\n      y: \"một năm\",\n      yy: \"%d năm\"\n    }\n  });\n\n  if (loading && !list.length) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-container\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Spin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    })));\n  }\n\n  if (!loading && !list.length) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, \"Th\\xF4ng b\\xE1o c\\u1EE7a b\\u1EA1n\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, \"B\\u1EA1n ch\\u01B0a c\\xF3 th\\xF4ng b\\xE1o\")));\n  }\n\n  const Notifications = () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 16\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"noti-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"Th\\xF4ng b\\xE1o c\\u1EE7a b\\u1EA1n\")), list.map((noti, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"noti-main-content\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"noti-content-avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }, noti.notifications_send.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n        src: noti.notifications_send.user_avatar,\n        alt: noti.notifications_send.user_last_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }) : /*#__PURE__*/React.createElement(Image, {\n        cloudName: \"mohi-vn\",\n        publicId: noti.notifications_send.user_avatar + \".jpg\",\n        version: \"1607061343\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Transformation, {\n        height: noti.notifications_send.user_avatar_cropH,\n        width: noti.notifications_send.user_avatar_cropW,\n        x: noti.notifications_send.user_avatar_cropX,\n        y: noti.notifications_send.user_avatar_cropY,\n        crop: \"crop\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 19\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"noti-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/post/\" + noti.notification_PostIdFake,\n        style: {\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"noti-notification\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        style: {\n          color: 'rgba(0,128,128'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }, noti.notifications_send.user_first_name + ' ' + noti.notifications_send.user_last_name, \" \"), noti.notification_Content, JSON.parse(localStorage.getItem('ustk')).info.id === noti.notification_AdminPostId ? ' bạn' : /*#__PURE__*/React.createElement(\"b\", {\n        style: {\n          color: 'rgba(0,128,128'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 113\n        }\n      }, \"  \", noti.notifications_admin_post.user_first_name + ' ' + noti.notifications_admin_post.user_last_name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"noti-status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, noti.notification_Action === 'comment' ? /*#__PURE__*/React.createElement(FaCommentAlt, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 61\n        }\n      }) : /*#__PURE__*/React.createElement(FaRegSmile, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 79\n        }\n      }), \" \", moment(moment.utc(noti.created_at).toDate()).fromNow()))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          padding: '10px 5px',\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        trigger: `click`,\n        placement: `bottom`,\n        title: /*#__PURE__*/React.createElement(\"div\", {\n          onClick: () => removeNoti(noti.id),\n          style: {\n            background: 'white',\n            padding: '5px',\n            boderRadius: '2px',\n            cursor: 'pointer',\n            color: 'black'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 19\n          }\n        }, \"X\\xF3a th\\xF4ng b\\xE1o\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(BsThreeDotsVertical, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }))));\n    }))));\n  };\n\n  return /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    component: Notifications,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default Notifications;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Notifications/Notifications.jsx"],"names":["React","useEffect","AiFillPicture","Link","Route","Switch","Image","Transformation","FaCommentAlt","FaRegSmile","BsThreeDotsVertical","moment","useSelector","useDispatch","Spin","Tooltip","axios","removeOneNoti","readNoti","Notifications","notifycations","list","loading","state","dispatch","removeNoti","id","post","readNotiFunc","then","res","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","length","display","alignItems","justifyContent","height","map","noti","index","notifications_send","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","notification_PostIdFake","color","user_first_name","notification_Content","JSON","parse","localStorage","getItem","info","notification_AdminPostId","notifications_admin_post","notification_Action","utc","created_at","toDate","fromNow","padding","cursor","background","boderRadius"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {AiFillPicture} from 'react-icons/ai';\r\nimport {Link, Route, Switch} from 'react-router-dom';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {FaCommentAlt, FaRegSmile} from 'react-icons/fa';\r\nimport {BsThreeDotsVertical} from 'react-icons/bs';\r\nimport './Notifications.css';\r\nimport moment from 'moment';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {Spin, Tooltip} from 'antd';\r\nimport axios from 'axios';\r\nimport {removeOneNoti} from './../../Actions/index.jsx';\r\nimport {readNoti} from './../../Actions/index.jsx';\r\n\r\nfunction Notifications({notifycations}) {\r\n  const {list, loading} = useSelector(state => state.notifycations);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const removeNoti = async (id) => {\r\n      dispatch(removeOneNoti(id))\r\n\r\n      await axios.post('https://www.api.mohi.vn/api/auth/delete-notification', {id: id})\r\n  }\r\n\r\n  useEffect(() => {\r\n    readNotiFunc()\r\n  }, [])\r\n\r\n  const readNotiFunc = async () => {\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/read-notification\")\r\n    .then((res) => {\r\n      dispatch(readNoti())\r\n    })\r\n  }\r\n  moment.updateLocale('en', {\r\n    relativeTime : {\r\n        future: \"%s\",\r\n        past:   \"%s\",\r\n        s  : 'vài giây',\r\n        ss : '%d phút',\r\n        m:  \"1 phút\",\r\n        mm: \"%d phút\",\r\n        h:  \"%d giờ\",\r\n        hh: \"%d giờ\",\r\n        d:  \"một ngày\",\r\n        dd: \"%d ngày\",\r\n        w:  \"một tuần\",\r\n        ww: \"%d tuần\",\r\n        M:  \"một tháng\",\r\n        MM: \"%d tháng\",\r\n        y:  \"một năm\",\r\n        yy: \"%d năm\"\r\n    }\r\n  });\r\n\r\n  if (loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          height: '100vh'\r\n        }}>\r\n        <Spin/>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  if (!loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" >\r\n        <div className=\"noti-title\">\r\n          <h4>\r\n            Thông báo của bạn</h4>\r\n        </div>\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '100vh'\r\n          }}>Bạn chưa có thông báo</div>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  const Notifications = () => {\r\n    return (<> < div className = \"noti-all\" > <div className=\"noti-container\">\r\n      <div className=\"noti-title\">\r\n        <h4>\r\n          Thông báo của bạn</h4>\r\n      </div>\r\n      {list.map((noti, index) => {\r\n        return(\r\n          <div className=\"noti-main-content\" key={index}>\r\n            <div className=\"noti-content-avatar\">\r\n              {noti.notifications_send.user_avatar_cropX === null ?\r\n                <img src={noti.notifications_send.user_avatar} alt={noti.notifications_send.user_last_name} />\r\n                :\r\n                <Image cloudName=\"mohi-vn\" publicId={noti.notifications_send.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                  <Transformation height={noti.notifications_send.user_avatar_cropH}  width={noti.notifications_send.user_avatar_cropW} x={noti.notifications_send.user_avatar_cropX} y={noti.notifications_send.user_avatar_cropY} crop=\"crop\" />\r\n                </Image>\r\n              }\r\n          </div>\r\n            <div className=\"noti-content\">\r\n              <Link to={\"/post/\" + noti.notification_PostIdFake} style={{color: 'black'}}>\r\n              <div className=\"noti-notification\">\r\n                <b style={{color: 'rgba(0,128,128'}} >{noti.notifications_send.user_first_name + ' ' + noti.notifications_send.user_last_name} </b>\r\n                {noti.notification_Content}\r\n                {JSON.parse(localStorage.getItem('ustk')).info.id === noti.notification_AdminPostId ? ' bạn'  : <b style={{color: 'rgba(0,128,128'}} >  {noti.notifications_admin_post.user_first_name + ' ' + noti.notifications_admin_post.user_last_name}</b>}\r\n              </div>\r\n              <div className=\"noti-status\">\r\n                  {noti.notification_Action === 'comment' ? <FaCommentAlt/> : <FaRegSmile />} {moment(moment.utc(noti.created_at).toDate()).fromNow()}\r\n              </div>\r\n            </Link>\r\n            </div>\r\n            <div style={{padding: '10px 5px', cursor: 'pointer'}}>\r\n              <Tooltip\r\n                trigger={`click`}\r\n                placement={`bottom`}\r\n                title={\r\n                  <div\r\n                    onClick={() => removeNoti(noti.id)}\r\n                    style={{\r\n                      background: 'white',\r\n                     padding: '5px',\r\n                     boderRadius: '2px',\r\n                     cursor: 'pointer',\r\n                     color:'black'\r\n                   }}\r\n                  >\r\n                    Xóa thông báo\r\n                  </div>\r\n                }\r\n              >\r\n                <BsThreeDotsVertical/>\r\n              </Tooltip>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  </div>\r\n</>)\r\n  }\r\n  return (<Switch>\r\n    <Route component={Notifications}/>\r\n  </Switch>)\r\n}\r\nexport default Notifications;\r\n"]},"metadata":{},"sourceType":"module"}