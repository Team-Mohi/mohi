{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\PresentialModal\\\\ModalSharePost.jsx\";\nimport React, { useState } from 'react';\nimport './ModalSharePost.css';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from 'react-redux';\nimport { MdPublic } from 'react-icons/md';\nimport { FaLock } from 'react-icons/fa';\nimport { Select, Button } from 'antd';\nimport { FaRegCommentAlt, FaRegWindowClose, FaUserLock, FaUserAlt } from \"react-icons/fa\";\nimport { Editor, EditorState } from 'draft-js';\nimport ModalSharePostImage from './ModalSharePostImage.jsx';\nimport CustomEmojiEditor from './EditorEmoji.jsx';\nimport { Image, Transformation } from 'cloudinary-react';\nimport axios from 'axios';\n\nfunction ModalSharePost({\n  presentialModal\n}) {\n  moment.updateLocale('en', {\n    relativeTime: {\n      future: \"%s\",\n      past: \"%s trước\",\n      s: 'vài giây',\n      ss: '%d phút',\n      m: \"1 phút trước\",\n      mm: \"%d phút\",\n      h: \"an giờ\",\n      hh: \"%d giờ\",\n      d: \"một ngày\",\n      dd: \"%d ngày\",\n      w: \"một tuần\",\n      ww: \"%d tuần\",\n      M: \"một tháng\",\n      MM: \"%d tháng\",\n      y: \"một năm\",\n      yy: \"%d năm\"\n    }\n  });\n  const [valueEditor, setValueEditor] = useState();\n  const [privacyShare, setPrivacyShare] = useState('public');\n  const userSharePost = JSON.parse(localStorage.getItem('ustk')).info;\n  const {\n    Option\n  } = Select;\n  const dispatch = useDispatch();\n  const {\n    data\n  } = useSelector(state => state.presentialModal);\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n\n  function changeStatusButtonSubmit(value) {\n    setValueEditor(value);\n  }\n\n  const onSubmit = data => {\n    dispatch(toggleStatusPresentialModal());\n  };\n\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\n\n  const PrivacyPost = () => {\n    switch (data.post_Privacy) {\n      case \"public\":\n        return /*#__PURE__*/React.createElement(MdPublic, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 24\n          }\n        });\n        break;\n\n      case \"onlyme\":\n        return /*#__PURE__*/React.createElement(FaUserLock, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 24\n          }\n        });\n        break;\n\n      case \"friend\":\n        return /*#__PURE__*/React.createElement(FaUserAlt, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 24\n          }\n        });\n        break;\n\n      default:\n        return null;\n    }\n  };\n\n  const onChangeShareContent = value => {\n    setPrivacyShare(value);\n  };\n\n  const sharePost = async idPost => {\n    await axios.post(\"https://www.api.mohi.vn/api/auth/share-post\", {\n      post_Content: valueEditor,\n      shares_PostChildId: idPost,\n      post_Privacy: privacyShare\n    }).then(res => {\n      console.log(res);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-custom modal-share-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, userSharePost.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: userSharePost.user_avatar,\n    alt: userSharePost.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: userSharePost.user_avatar + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: userSharePost.user_avatar_cropH,\n    width: userSharePost.user_avatar_cropW,\n    x: userSharePost.user_avatar_cropX,\n    y: userSharePost.user_avatar_cropY,\n    crop: \"crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 31\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, userSharePost.user_first_name + ' ' + userSharePost.user_last_name), /*#__PURE__*/React.createElement(Select, {\n    style: {\n      width: '100%'\n    },\n    defaultValue: \"public\",\n    onChange: value => onChangeShareContent(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"public\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(MdPublic, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 57\n    }\n  }), \" C\\xF4ng khai\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"onlyme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FaLock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 56\n    }\n  }), \" Ri\\xEAng t\\u01B0\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CustomEmojiEditor, {\n    changeStatusButtonSubmit: changeStatusButtonSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(ModalSharePostImage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-title-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }, data.user_admin_post.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: data.user_admin_post.user_avatar,\n    alt: data.user_admin_post.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 41\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: data.user_admin_post.user_avatar + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: data.user_admin_post.user_avatar_cropH,\n    width: data.user_admin_post.user_avatar_cropW,\n    x: data.user_admin_post.user_avatar_cropX,\n    y: data.user_admin_post.user_avatar_cropY,\n    crop: \"crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 43\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-title-name-and-privacy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-title-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, data.user_admin_post.user_first_name + ' ' + data.user_admin_post.user_last_name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"modal-share-post-main-title-privacy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 37\n    }\n  }, moment(moment.utc(data.created_at).toDate()).fromNow(), \" \", /*#__PURE__*/React.createElement(PrivacyPost, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 145\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-main-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, data.post_Content))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-share-post-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => sharePost(data.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"\\u0110\\u0103ng\")))));\n}\n\nexport default ModalSharePost;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/PresentialModal/ModalSharePost.jsx"],"names":["React","useState","useDispatch","moment","toggleStatusPresentialModal","useForm","useSelector","MdPublic","FaLock","Select","Button","FaRegCommentAlt","FaRegWindowClose","FaUserLock","FaUserAlt","Editor","EditorState","ModalSharePostImage","CustomEmojiEditor","Image","Transformation","axios","ModalSharePost","presentialModal","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","valueEditor","setValueEditor","privacyShare","setPrivacyShare","userSharePost","JSON","parse","localStorage","getItem","info","Option","dispatch","data","state","register","handleSubmit","watch","errors","changeStatusButtonSubmit","value","onSubmit","editorState","setEditorState","createEmpty","PrivacyPost","post_Privacy","onChangeShareContent","sharePost","idPost","post","post_Content","shares_PostChildId","then","res","console","log","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_first_name","width","user_admin_post","utc","created_at","toDate","fromNow","id"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport './ModalSharePost.css';\r\nimport { useDispatch } from 'react-redux';\r\nimport moment from 'moment';\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useSelector } from 'react-redux';\r\nimport { MdPublic } from 'react-icons/md';\r\nimport { FaLock } from 'react-icons/fa';\r\nimport { Select, Button } from 'antd';\r\nimport { FaRegCommentAlt, FaRegWindowClose, FaUserLock, FaUserAlt } from \"react-icons/fa\";\r\nimport { Editor, EditorState } from 'draft-js';\r\nimport ModalSharePostImage from './ModalSharePostImage.jsx'\r\nimport CustomEmojiEditor from './EditorEmoji.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport axios from 'axios';\r\n\r\nfunction ModalSharePost({ presentialModal }) {\r\n  moment.updateLocale('en', {\r\n      relativeTime: {\r\n          future: \"%s\",\r\n          past: \"%s trước\",\r\n          s: 'vài giây',\r\n          ss: '%d phút',\r\n          m: \"1 phút trước\",\r\n          mm: \"%d phút\",\r\n          h: \"an giờ\",\r\n          hh: \"%d giờ\",\r\n          d: \"một ngày\",\r\n          dd: \"%d ngày\",\r\n          w: \"một tuần\",\r\n          ww: \"%d tuần\",\r\n          M: \"một tháng\",\r\n          MM: \"%d tháng\",\r\n          y: \"một năm\",\r\n          yy: \"%d năm\"\r\n      }\r\n  });\r\n    const [valueEditor, setValueEditor] = useState();\r\n    const [privacyShare, setPrivacyShare] = useState('public');\r\n    const userSharePost = JSON.parse(localStorage.getItem('ustk')).info;\r\n    const { Option } = Select;\r\n    const dispatch = useDispatch();\r\n    const { data } = useSelector(state => state.presentialModal);\r\n    const { register, handleSubmit, watch, errors } = useForm();\r\n\r\n    function changeStatusButtonSubmit(value) {\r\n        setValueEditor(value)\r\n    }\r\n\r\n    const onSubmit = (data) => {\r\n        dispatch(toggleStatusPresentialModal())\r\n    }\r\n\r\n    const [editorState, setEditorState] = useState(() =>\r\n        EditorState.createEmpty(),\r\n    );\r\n\r\n    const PrivacyPost = () => {\r\n        switch (data.post_Privacy) {\r\n            case \"public\":\r\n                return <MdPublic />\r\n                break;\r\n            case \"onlyme\":\r\n                return <FaUserLock />\r\n                break;\r\n            case \"friend\":\r\n                return <FaUserAlt />\r\n                break;\r\n            default: return null\r\n\r\n        }\r\n    }\r\n\r\n    const onChangeShareContent = (value) => {\r\n      setPrivacyShare(value)\r\n    }\r\n\r\n    const sharePost = async (idPost) => {\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/share-post\", {\r\n        post_Content: valueEditor,\r\n        shares_PostChildId: idPost,\r\n        post_Privacy: privacyShare\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"modal-custom modal-share-post\">\r\n                <div className=\"modal-share-post-container\">\r\n                    <div className=\"modal-share-post-header\">\r\n                        <div className=\"modal-share-post-avatar\">\r\n                          {userSharePost.user_avatar_cropX === null ?\r\n                            <img src={userSharePost.user_avatar} alt={userSharePost.user_last_name} />\r\n                            :\r\n                            <Image cloudName=\"mohi-vn\" publicId={userSharePost.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                              <Transformation height={userSharePost.user_avatar_cropH}  width={userSharePost.user_avatar_cropW} x={userSharePost.user_avatar_cropX} y={userSharePost.user_avatar_cropY} crop=\"crop\" />\r\n                            </Image>\r\n                          }\r\n                        </div>\r\n                        <div className=\"modal-share-post-title\">\r\n                            <div className=\"modal-share-post-name\">{userSharePost.user_first_name + ' ' + userSharePost.user_last_name}</div>\r\n                          <Select style={{ width: '100%' }} defaultValue=\"public\" onChange={(value) => onChangeShareContent(value)}>\r\n                                <Option value=\"public\" ><MdPublic /> Công khai</Option>\r\n                                <Option value=\"onlyme\"><FaLock /> Riêng tư</Option>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"modal-share\">\r\n                        <div className=\"modal-share-post-content\">\r\n                            <CustomEmojiEditor changeStatusButtonSubmit={changeStatusButtonSubmit} />\r\n                        </div>\r\n                        <div className=\"modal-share-post-main\">\r\n                            <div className=\"modal-share-post-main-img\">\r\n                                <ModalSharePostImage />\r\n                            </div>\r\n                            <div className=\"modal-share-post-main-title\">\r\n                                <div className=\"modal-share-post-main-title-avatar\">\r\n                                      {data.user_admin_post.user_avatar_cropX === null ?\r\n                                        <img src={data.user_admin_post.user_avatar} alt={data.user_admin_post.user_last_name} />\r\n                                        :\r\n                                        <Image cloudName=\"mohi-vn\" publicId={data.user_admin_post.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                          <Transformation height={data.user_admin_post.user_avatar_cropH}  width={data.user_admin_post.user_avatar_cropW} x={data.user_admin_post.user_avatar_cropX} y={data.user_admin_post.user_avatar_cropY} crop=\"crop\" />\r\n                                        </Image>\r\n                                      }\r\n                                </div>\r\n                                <div className=\"modal-share-post-main-title-name-and-privacy\">\r\n                                    <div className=\"modal-share-post-main-title-name\">{data.user_admin_post.user_first_name + ' ' + data.user_admin_post.user_last_name}</div>\r\n                                    <p className=\"modal-share-post-main-title-privacy\">{moment(moment.utc(data.created_at).toDate()).fromNow()} <PrivacyPost /></p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"modal-share-post-main-content\">{data.post_Content}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"modal-share-post-footer\">\r\n                        <button onClick={() => sharePost(data.id)}>Đăng</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ModalSharePost;\r\n"]},"metadata":{},"sourceType":"module"}