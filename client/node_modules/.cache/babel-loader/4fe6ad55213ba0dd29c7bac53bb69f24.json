{"ast":null,"code":"import _classCallCheck from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 10px;\\n  border: 0;\\n  z-index: 2;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-height: 100px;\\n  overflow-y: auto;\\n  border: 1px solid #ddd;\\n  margin-left: 10px;\\n  font-size: 14px;\\n  padding: 5px 10px;\\n  border-radius: 30px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from\"react\";import Editor,{createEditorStateWithText}from\"draft-js-plugins-editor\";import createEmojiPlugin from\"draft-js-emoji-plugin\";import{convertToRaw,getDefaultKeyBinding,KeyBindingUtil,ContentState,EditorState}from\"draft-js\";import\"draft-js-emoji-plugin/lib/plugin.css\";import style from'styled-components';var hasCommandModifier=KeyBindingUtil.hasCommandModifier;var emojiPlugin=createEmojiPlugin({useNativeArt:true});var EmojiSuggestions=emojiPlugin.EmojiSuggestions,EmojiSelect=emojiPlugin.EmojiSelect;var plugins=[emojiPlugin];var text=\"\";var StyleEditor=style.div(_templateObject());var Wrapper=style.div(_templateObject2());var StyleEmoji=style.div(_templateObject3());var CommentEditor=/*#__PURE__*/function(_Component){_inherits(CommentEditor,_Component);var _super=_createSuper(CommentEditor);function CommentEditor(props){var _this;_classCallCheck(this,CommentEditor);_this=_super.call(this,props);_this.state={editorState:createEditorStateWithText(text)};_this.onChange=function(editorState){_this.setState({editorState:editorState});};_this.handleKeyCommand=_this.handleKeyCommand.bind(_assertThisInitialized(_this));return _this;}_createClass(CommentEditor,[{key:\"focusCommentInput\",value:function focusCommentInput(){this.commentInput.focus();}},{key:\"keyBindingFn\",value:function keyBindingFn(e){if(e.keyCode===13){return'submit-comment';}return getDefaultKeyBinding(e);}},{key:\"handleKeyCommand\",value:function handleKeyCommand(command){if(command==='submit-comment'){var value=this.state.editorState.getCurrentContent().getPlainText();var content=this.state.editorState.getCurrentContent();var isEditorEmpty=!content.hasText();var lengthOfTrimmedContent=value.trim().length;var isContainOnlySpaces=!isEditorEmpty&&!lengthOfTrimmedContent;if(value&&!isContainOnlySpaces){this.props.onSubmitComment(value);var editorState=EditorState.push(this.state.editorState,ContentState.createFromText(''));this.setState({editorState:editorState});}return'handled';}return'not-handled';}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(StyleEditor,null,/*#__PURE__*/React.createElement(Editor,{keyBindingFn:this.keyBindingFn,handleKeyCommand:this.handleKeyCommand,editorState:this.state.editorState,onChange:this.onChange,plugins:plugins,placeholder:\"Vi\\u1EBFt b\\xECnh lu\\u1EADn...\",ref:function ref(element){_this2.commentInput=element;}}),/*#__PURE__*/React.createElement(EmojiSuggestions,null)));}}]);return CommentEditor;}(Component);export{CommentEditor as default};","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/SinglePost/CommentEditor.jsx"],"names":["React","Component","Editor","createEditorStateWithText","createEmojiPlugin","convertToRaw","getDefaultKeyBinding","KeyBindingUtil","ContentState","EditorState","style","hasCommandModifier","emojiPlugin","useNativeArt","EmojiSuggestions","EmojiSelect","plugins","text","StyleEditor","div","Wrapper","StyleEmoji","CommentEditor","props","state","editorState","onChange","setState","handleKeyCommand","bind","commentInput","focus","e","keyCode","command","value","getCurrentContent","getPlainText","content","isEditorEmpty","hasText","lengthOfTrimmedContent","trim","length","isContainOnlySpaces","onSubmitComment","push","createFromText","keyBindingFn","element"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Editor, { createEditorStateWithText} from \"draft-js-plugins-editor\";\r\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\r\nimport {convertToRaw, getDefaultKeyBinding, KeyBindingUtil, ContentState, EditorState} from \"draft-js\";\r\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\r\nimport style from 'styled-components';\r\n\r\nconst {hasCommandModifier} = KeyBindingUtil;\r\nconst emojiPlugin = createEmojiPlugin({\r\n  useNativeArt: true\r\n});\r\nconst { EmojiSuggestions, EmojiSelect } = emojiPlugin;\r\nconst plugins = [emojiPlugin];\r\nconst text = ``;\r\n\r\nconst StyleEditor = style.div`\r\n  width: 100%;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n  border: 1px solid #ddd;\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n  padding: 5px 10px;\r\n  border-radius: 30px;\r\n`;\r\n\r\nconst Wrapper = style.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst StyleEmoji = style.div`\r\n  position: absolute;\r\n  right: 10px;\r\n  border: 0;\r\n  z-index: 2;\r\n`;\r\n\r\nexport default class CommentEditor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleKeyCommand = this.handleKeyCommand.bind(this);\r\n  }\r\n    state = {\r\n      editorState: createEditorStateWithText(text)\r\n  }\r\n\r\n  onChange = (editorState) => {\r\n    this.setState({\r\n      editorState\r\n    });\r\n  };\r\n\r\n  focusCommentInput(){\r\n    this.commentInput.focus();\r\n  }\r\n\r\n  keyBindingFn(e){\r\n    if (e.keyCode === 13) {\r\n      return 'submit-comment'\r\n    }\r\n\r\n    return getDefaultKeyBinding(e)\r\n  }\r\n\r\n  handleKeyCommand(command){\r\n    if (command === 'submit-comment') {\r\n      const value = this.state.editorState.getCurrentContent().getPlainText();\r\n      const content = this.state.editorState.getCurrentContent();\r\n      const isEditorEmpty = !content.hasText();\r\n      const lengthOfTrimmedContent = value.trim().length;\r\n      const isContainOnlySpaces = !isEditorEmpty && !lengthOfTrimmedContent;\r\n\r\n      if(value && !isContainOnlySpaces) {\r\n        this.props.onSubmitComment(value)\r\n        const editorState = EditorState.push(this.state.editorState, ContentState.createFromText(''));\r\n        this.setState({ editorState });\r\n      }\r\n      return 'handled'\r\n    }\r\n\r\n    return 'not-handled'\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Wrapper>\r\n        <StyleEditor>\r\n          <Editor\r\n            keyBindingFn={this.keyBindingFn}\r\n            handleKeyCommand={this.handleKeyCommand}\r\n            editorState={this.state.editorState}\r\n            onChange={this.onChange}\r\n            plugins={plugins}\r\n            placeholder=\"Viết bình luận...\"\r\n            ref={(element) => {\r\n              this.commentInput = element;\r\n            }}\r\n          />\r\n          <EmojiSuggestions />\r\n        </StyleEditor>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}