{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{Link}from'react-router-dom';import CommentChild from'./CommentChild.jsx';import CommentReplyEditor from'./CommentReplyEditor.jsx';import moment from'moment';import{Image,Transformation}from'cloudinary-react';import{Tooltip}from'antd';import{BsThreeDots}from'react-icons/bs';import axios from'axios';import{toggleStatusPresentialModal}from'./../../../Actions/index.jsx';import{useDispatch}from'react-redux';function CommentParent(props){var comment=props.comment;var inputCommentParentReplyRef=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),userReceivedReply=_useState2[0],setUserReceivedReply=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),idUserReceivedReply=_useState4[0],setIdUserReceivedReply=_useState4[1];var listChildComment=props.listChildComment;var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isDelete=_useState6[0],setIsDelete=_useState6[1];moment.updateLocale('vi',{relativeTime:{future:\"%s\",past:\"%s trước\",s:'vài giây',ss:'%d phút',m:\"1 phút trước\",mm:\"%d phút\",h:\"%d giờ\",hh:\"%d giờ\",d:\"một ngày\",dd:\"%d ngày\",w:\"một tuần\",ww:\"%d tuần\",M:\"một tháng\",MM:\"%d tháng\",y:\"một năm\",yy:\"%d năm\"}});var appendInputParentReply=function appendInputParentReply(commentUserId,commentUser){inputCommentParentReplyRef.current.style.display='block';setUserReceivedReply(commentUser);setIdUserReceivedReply(commentUserId);};var updateComment=function updateComment(idPost,id,value){dispatch(toggleStatusPresentialModal('edit_comment_profile',{idPost:idPost,id:id,value:value}));};var deleteComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\",{id:id});case 2:setIsDelete(true);case 3:case\"end\":return _context.stop();}}},_callee);}));return function deleteComment(_x){return _ref.apply(this,arguments);};}();if(isDelete)return null;return/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+comment.user_username},comment.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:comment.user_avatar,alt:comment.user_first_name+' '+comment.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:comment.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:comment.user_avatar_cropH,width:comment.user_avatar_cropW,x:comment.user_avatar_cropX,y:comment.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info-user\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+comment.user_username},comment.user_first_name+' '+comment.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-content\"},/*#__PURE__*/React.createElement(\"p\",null,comment.pivot.comment_Content)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-action\"},/*#__PURE__*/React.createElement(\"span\",null,moment(moment.utc(comment.pivot.created_at).toDate()).fromNow()))),comment.id===JSON.parse(localStorage.getItem('ustk')).info.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post\"},/*#__PURE__*/React.createElement(Tooltip,{trigger:\"click\",placement:\"bottom\",title:/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post-tooltip\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return updateComment(props.idPost,comment.pivot.id,comment.pivot.comment_Content);}},\"S\\u1EEDa b\\xECnh lu\\u1EADn\"),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return deleteComment(comment.pivot.id);}},\"X\\xF3a b\\xECnh lu\\u1EADn\"))},/*#__PURE__*/React.createElement(BsThreeDots,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-reply\",ref:inputCommentParentReplyRef},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-reply-input-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-reply-avatar\"},/*#__PURE__*/React.createElement(\"img\",{src:JSON.parse(localStorage.getItem('ustk')).info.user_avatar,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-reply-input\"},/*#__PURE__*/React.createElement(CommentReplyEditor,{idUserReceivedReply:idUserReceivedReply,userReceivedReply:userReceivedReply})))));}export default CommentParent;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/CommentParent.jsx"],"names":["React","useState","useRef","Link","CommentChild","CommentReplyEditor","moment","Image","Transformation","Tooltip","BsThreeDots","axios","toggleStatusPresentialModal","useDispatch","CommentParent","props","comment","inputCommentParentReplyRef","userReceivedReply","setUserReceivedReply","idUserReceivedReply","setIdUserReceivedReply","listChildComment","dispatch","isDelete","setIsDelete","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","appendInputParentReply","commentUserId","commentUser","current","style","display","updateComment","idPost","id","value","deleteComment","post","user_username","user_avatar_cropX","user_avatar","user_first_name","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","pivot","comment_Content","utc","created_at","toDate","fromNow","JSON","parse","localStorage","getItem","info"],"mappings":"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","sourcesContent":["import React, {useState, useRef} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport CommentChild from './CommentChild.jsx';\r\nimport CommentReplyEditor from './CommentReplyEditor.jsx';\r\nimport moment from 'moment';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {Tooltip} from 'antd';\r\nimport {BsThreeDots} from 'react-icons/bs';\r\nimport axios from 'axios';\r\nimport { toggleStatusPresentialModal } from './../../../Actions/index.jsx';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nfunction CommentParent(props) {\r\n  let comment = props.comment;\r\n  const inputCommentParentReplyRef = useRef();\r\n  const [userReceivedReply, setUserReceivedReply] = useState();\r\n  const [idUserReceivedReply, setIdUserReceivedReply] = useState();\r\n  let listChildComment = props.listChildComment;\r\n  const dispatch = useDispatch();\r\n  const [isDelete, setIsDelete] = useState(false);\r\n\r\n  moment.updateLocale('vi', {\r\n    relativeTime : {\r\n        future: \"%s\",\r\n        past:   \"%s trước\",\r\n        s  : 'vài giây',\r\n        ss : '%d phút',\r\n        m:  \"1 phút trước\",\r\n        mm: \"%d phút\",\r\n        h:  \"%d giờ\",\r\n        hh: \"%d giờ\",\r\n        d:  \"một ngày\",\r\n        dd: \"%d ngày\",\r\n        w:  \"một tuần\",\r\n        ww: \"%d tuần\",\r\n        M:  \"một tháng\",\r\n        MM: \"%d tháng\",\r\n        y:  \"một năm\",\r\n        yy: \"%d năm\"\r\n    }\r\n  });\r\n\r\n  const appendInputParentReply = (commentUserId, commentUser) => {\r\n    inputCommentParentReplyRef.current.style.display = 'block';\r\n    setUserReceivedReply(commentUser);\r\n    setIdUserReceivedReply(commentUserId)\r\n  }\r\n\r\n\r\n  const updateComment = (idPost, id, value) => {\r\n    dispatch(toggleStatusPresentialModal('edit_comment_profile', {idPost: idPost, id: id, value: value}))\r\n  }\r\n\r\n  const deleteComment = async (id) => {\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\", {id: id})\r\n    setIsDelete(true)\r\n  }\r\n\r\n  if(isDelete) return null\r\n\r\n  return (<div className=\"post-comment-item\">\r\n    <div className=\"post-comment-item-parent\">\r\n      <div className=\"post-comment-item-parent-avatar\">\r\n        <Link to={'/profile/'+ comment.user_username}>\r\n          {comment.user_avatar_cropX === null ?\r\n            <img src={comment.user_avatar} alt={comment.user_first_name + ' ' + comment.user_last_name} />\r\n            :\r\n            <Image cloudName=\"mohi-vn\" publicId={comment.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n              <Transformation height={comment.user_avatar_cropH}  width={comment.user_avatar_cropW} x={comment.user_avatar_cropX} y={comment.user_avatar_cropY} crop=\"crop\" />\r\n            </Image>\r\n          }\r\n        </Link>\r\n      </div>\r\n      <div className=\"post-comment-item-parent-info\">\r\n        <div className=\"post-comment-item-parent-info-user\">\r\n          <Link to={'/profile/'+ comment.user_username}>{comment.user_first_name + ' ' + comment.user_last_name}</Link>\r\n        </div>\r\n        <div className=\"post-comment-item-parent-content\">\r\n          <p>{comment.pivot.comment_Content}</p>\r\n        </div>\r\n        <div className=\"post-comment-item-parent-action\">\r\n          <span>{moment(moment.utc(comment.pivot.created_at).toDate()).fromNow()}</span>\r\n        </div>\r\n      </div>\r\n      {comment.id === JSON.parse(localStorage.getItem('ustk')).info.id && <div className=\"setting-comment-post\">\r\n        <Tooltip\r\n          trigger=\"click\"\r\n          placement=\"bottom\"\r\n          title={\r\n            <div className=\"setting-comment-post-tooltip\">\r\n              <div onClick={() => updateComment(props.idPost, comment.pivot.id, comment.pivot.comment_Content)}>\r\n                Sửa bình luận\r\n              </div>\r\n              <div onClick={() => deleteComment(comment.pivot.id)}>\r\n                Xóa bình luận\r\n              </div>\r\n            </div>\r\n          }\r\n        >\r\n          <BsThreeDots />\r\n        </Tooltip>\r\n      </div>\r\n      }\r\n    </div>\r\n    <div className=\"post-comment-item-parent-reply\" ref={inputCommentParentReplyRef}>\r\n      <div className=\"post-comment-item-parent-reply-input-container\">\r\n        <div className=\"post-comment-item-parent-reply-avatar\">\r\n          <img src={JSON.parse(localStorage.getItem('ustk')).info.user_avatar} alt=\"\"/>\r\n        </div>\r\n        <div className=\"post-comment-item-parent-reply-input\">\r\n          <CommentReplyEditor idUserReceivedReply={idUserReceivedReply} userReceivedReply={userReceivedReply}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>)\r\n}\r\n\r\nexport default CommentParent;\r\n"]},"metadata":{},"sourceType":"module"}