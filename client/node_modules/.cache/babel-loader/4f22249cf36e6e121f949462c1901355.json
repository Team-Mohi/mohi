{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import*as Types from'./../Constants/ActionTypes.jsx';var initialState={currentPage:1,loading:true,hasMore:false,error:false,listPosts:[],loadingAddComment:false};var findItem=function findItem(type,arr,id){var result={index:-1,item:''};arr.forEach(function(item,i){if(type==='post'){if(item.id===id){result.index=i;result.item=item;}}if(type==='comment'){if(item.pivot.id===id){result.index=i;result.item=item;}}});return result;};export var posts=function posts(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case Types.FECTH_POSTS:return _objectSpread(_objectSpread({},state),{},{listPosts:[],currentPage:1,loading:true});break;case Types.RESPONSE_POSTS:state.listPosts=action.posts.data;state.loading=false;state.hasMore=action.posts.last_page>action.posts.current_page;return _objectSpread({},state);break;case Types.SET_CURRENT_PAGE:state.currentPage=state.currentPage+1;return _objectSpread({},state);break;case Types.FECTH_MORE_POSTS:return _objectSpread(_objectSpread({},state),{},{loading:true});break;case Types.RESPONSE_MORE_POSTS:state.listPosts=[].concat(_toConsumableArray(state.listPosts),_toConsumableArray(action.posts.data));state.loading=false;state.hasMore=action.posts.last_page>action.posts.current_page;return _objectSpread({},state);break;case Types.REQUEST_ADD_COMMENT:return _objectSpread(_objectSpread({},state),{},{loadingAddComment:true});break;case Types.RESPONSE_ADD_COMMENT:var post=findItem('post',state.listPosts,action.payload.idPost);state.listPosts[post.index].comment_post=[].concat(_toConsumableArray(state.listPosts[post.index].comment_post),_toConsumableArray(action.payload.comment));return _objectSpread(_objectSpread({},state),{},{loadingAddComment:false});break;case Types.UPDATE_COMMENT_POST:var post=findItem('post',state.listPosts,action.payload.idPost);var commentPost=findItem('comment',post.item.comment_post,action.payload.id);state.listPosts[post.index].comment_post[commentPost.index].pivot.comment_Content=action.payload.value;return _objectSpread({},state);break;default:return state;}};","map":{"version":3,"sources":["D:/Web/mohi/client/src/Reducers/Posts.jsx"],"names":["Types","initialState","currentPage","loading","hasMore","error","listPosts","loadingAddComment","findItem","type","arr","id","result","index","item","forEach","i","pivot","posts","state","action","FECTH_POSTS","RESPONSE_POSTS","data","last_page","current_page","SET_CURRENT_PAGE","FECTH_MORE_POSTS","RESPONSE_MORE_POSTS","REQUEST_ADD_COMMENT","RESPONSE_ADD_COMMENT","post","payload","idPost","comment_post","comment","UPDATE_COMMENT_POST","commentPost","comment_Content","value"],"mappings":"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","sourcesContent":["import * as Types from './../Constants/ActionTypes.jsx';\r\n\r\nconst initialState = {\r\n  currentPage: 1,\r\n  loading: true,\r\n  hasMore: false,\r\n  error: false,\r\n  listPosts: [],\r\n  loadingAddComment: false,\r\n};\r\n\r\nvar findItem = (type, arr, id) => {\r\n  var result = {\r\n    index: -1,\r\n    item: ''\r\n  };\r\n\r\n  arr.forEach((item, i) => {\r\n    if(type === 'post'){\r\n      if(item.id === id){\r\n        result.index = i;\r\n        result.item = item;\r\n      }\r\n    }\r\n\r\n    if(type === 'comment'){\r\n      if(item.pivot.id === id){\r\n        result.index = i;\r\n        result.item = item;\r\n      }\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nexport const posts = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case Types.FECTH_POSTS:\r\n      return {\r\n              ...state,\r\n              listPosts: [],\r\n              currentPage: 1,\r\n              loading: true\r\n            }\r\n      break;\r\n    case Types.RESPONSE_POSTS:\r\n      state.listPosts = action.posts.data\r\n      state.loading = false\r\n      state.hasMore = action.posts.last_page > action.posts.current_page\r\n      return {...state}\r\n      break;\r\n    case Types.SET_CURRENT_PAGE:\r\n      state.currentPage = state.currentPage + 1\r\n      return {...state}\r\n      break;\r\n    case Types.FECTH_MORE_POSTS:\r\n      return {\r\n              ...state,\r\n              loading: true\r\n            }\r\n      break;\r\n    case Types.RESPONSE_MORE_POSTS:\r\n      state.listPosts = [...state.listPosts, ...action.posts.data]\r\n      state.loading = false\r\n      state.hasMore = action.posts.last_page > action.posts.current_page\r\n      return {...state}\r\n      break;\r\n    case Types.REQUEST_ADD_COMMENT:\r\n      return {...state, loadingAddComment: true}\r\n      break;\r\n    case Types.RESPONSE_ADD_COMMENT:\r\n      var post = findItem('post', state.listPosts, action.payload.idPost);\r\n      state.listPosts[post.index].comment_post = [...state.listPosts[post.index].comment_post, ...action.payload.comment];\r\n\r\n      return {...state, loadingAddComment:false}\r\n      break;\r\n    case Types.UPDATE_COMMENT_POST:\r\n      var post = findItem('post', state.listPosts, action.payload.idPost);\r\n      var commentPost = findItem('comment', post.item.comment_post, action.payload.id);\r\n\r\n      state.listPosts[post.index].comment_post[commentPost.index].pivot.comment_Content = action.payload.value;\r\n\r\n      return {...state}\r\n      break;\r\n    default: return state\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}