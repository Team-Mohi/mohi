{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./FriendRequestMenu.css';import{Image,Transformation}from'cloudinary-react';import{Link}from'react-router-dom';import{useSelector}from'react-redux';import{Spin}from'antd';import axios from'axios';var Button=function Button(props){var _useState=useState('default'),_useState2=_slicedToArray(_useState,2),isAccept=_useState2[0],setIsAccept=_useState2[1];var onSubmitFriendRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type,id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type==='accept')){_context.next=6;break;}setIsAccept(true);_context.next=4;return axios.post('https://www.api.mohi.vn/api/auth/accept-friend',{follow_users_UserId:id});case 4:_context.next=9;break;case 6:setIsAccept(false);_context.next=9;return axios.post('https://www.api.mohi.vn/api/auth/refuse-friend',{follow_users_UserId:id});case 9:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitFriendRequest(_x,_x2){return _ref.apply(this,arguments);};}();if(!isAccept){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{style:{backgroundColor:'red',color:'white'}},\"\\u0110\\xE3 h\\u1EE7y\"));}return/*#__PURE__*/React.createElement(React.Fragment,null,isAccept&&isAccept==='default'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onSubmitFriendRequest('accept',props.user.id);}},\"X\\xE1c nh\\u1EADn\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onSubmitFriendRequest('remove',props.user.id);}},\"H\\u1EE7y\")):/*#__PURE__*/React.createElement(\"button\",{style:{backgroundColor:'rgba(0,128,128)',color:'white'}},\"B\\u1EA1n b\\xE8\"));};function MenuFriendRequests(_ref2){var friendsRequest=_ref2.friendsRequest;var _useSelector=useSelector(function(state){return state.friendsRequest;}),list=_useSelector.list,loading=_useSelector.loading;if(loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-title\"},/*#__PURE__*/React.createElement(\"h5\",null,\"L\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\"),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-title-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-may-know-container\",style:{minHeight:'80px',display:'flex',alignItems:'center',justifyContent:'center'}},/*#__PURE__*/React.createElement(Spin,null))));}if(!loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-title\"},/*#__PURE__*/React.createElement(\"h5\",null,\"L\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\"),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-title-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"friend-may-know-container\",style:{minHeight:'80px',display:'flex',alignItems:'center',justifyContent:'center'}},\"B\\u1EA1n ch\\u01B0a c\\xF3 l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")));}return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-title\"},/*#__PURE__*/React.createElement(\"h5\",null,\"L\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-dropdown-scroll\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-dropdown-scroll-thumb\"},list.map(function(user,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-friend-requests-content\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-content-avatar\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile/\"+user.user_username},user.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:user.user_avatar,alt:user.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:user.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:user.user_avatar_cropH,width:user.user_avatar_cropW,x:user.user_avatar_cropX,y:user.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-friend-requests-content-title\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile/\"+user.user_username},user.user_first_name+' '+user.user_last_name),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-friend-requests-content-button\"},/*#__PURE__*/React.createElement(\"p\",null,\"100 b\\u1EA1n chung\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-friend-requests-content-right\"},/*#__PURE__*/React.createElement(Button,{user:user})));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-noti-footer\"},/*#__PURE__*/React.createElement(Link,{to:\"/friendrequests\"},\"Xem t\\u1EA5t c\\u1EA3\"))));}export default MenuFriendRequests;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/FriendRequests/FriendRequestMenu.jsx"],"names":["React","useState","Image","Transformation","Link","useSelector","Spin","axios","Button","props","isAccept","setIsAccept","onSubmitFriendRequest","type","id","post","follow_users_UserId","backgroundColor","color","user","MenuFriendRequests","friendsRequest","state","list","loading","length","minHeight","display","alignItems","justifyContent","map","index","user_username","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_first_name"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport './FriendRequestMenu.css';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {Link} from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { Spin } from 'antd';\r\nimport axios from 'axios';\r\n\r\nconst Button = (props) => {\r\n    const [isAccept, setIsAccept] = useState('default');\r\n\r\n    const onSubmitFriendRequest = async (type, id) => {\r\n      if(type === 'accept'){\r\n        setIsAccept(true)\r\n        await axios.post('https://www.api.mohi.vn/api/auth/accept-friend', {follow_users_UserId: id})\r\n      }else {\r\n        setIsAccept(false)\r\n        await axios.post('https://www.api.mohi.vn/api/auth/refuse-friend', {follow_users_UserId: id})\r\n      }\r\n    }\r\n\r\n    if(!isAccept){\r\n      return(\r\n        <React.Fragment>\r\n            <button style={{backgroundColor: 'red', color: 'white'}}>Đã hủy</button>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    return(\r\n      <React.Fragment>\r\n        {isAccept && isAccept === 'default' ? <>\r\n          <button onClick={() => onSubmitFriendRequest('accept', props.user.id)}>Xác nhận</button>\r\n        <button onClick={() => onSubmitFriendRequest('remove', props.user.id)}>Hủy</button>\r\n      </>\r\n        :\r\n          <button style={{backgroundColor: 'rgba(0,128,128)', color: 'white'}}>Bạn bè</button>\r\n        }\r\n      </React.Fragment>\r\n    )\r\n}\r\n\r\nfunction MenuFriendRequests({friendsRequest}) {\r\n  const {list, loading} = useSelector(state => state.friendsRequest);\r\n\r\n  if(loading && !list.length){\r\n    return(\r\n      <div className = \"menu-noti-container\">\r\n        <div className=\"menu-noti-main\">\r\n          <div className=\"menu-noti-title\">\r\n            <h5>Lời mời kết bạn</h5>\r\n            <div className=\"menu-noti-title-control\">\r\n            </div>\r\n          </div>\r\n          <div className=\"friend-may-know-container\"\r\n            style={{\r\n              minHeight: '80px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            <Spin />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if(!loading && !list.length){\r\n    return(\r\n      <div className = \"menu-noti-container\">\r\n        <div className=\"menu-noti-main\">\r\n          <div className=\"menu-noti-title\">\r\n            <h5>Lời mời kết bạn</h5>\r\n            <div className=\"menu-noti-title-control\">\r\n            </div>\r\n          </div>\r\n          <div className=\"friend-may-know-container\"\r\n            style={{\r\n              minHeight: '80px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}\r\n          >\r\n            Bạn chưa có lời mời kết bạn\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"menu-noti-container\">\r\n      <div className=\"menu-noti-main\">\r\n    <div className=\"menu-noti-title\">\r\n      <h5>Lời mời kết bạn</h5>\r\n    </div>\r\n    <div className=\"menu-dropdown-scroll\">\r\n      <div className=\"menu-dropdown-scroll-thumb\">\r\n        {list.map((user, index) => {\r\n          return(\r\n            <div className=\"menu-friend-requests-content\" key={index}>\r\n              <div className=\"menu-noti-content-avatar\">\r\n                <Link to={\"/profile/\" + user.user_username}>\r\n                  {user.user_avatar_cropX === null ?\r\n                    <img src={user.user_avatar} alt={user.user_last_name} />\r\n                    :\r\n                    <Image cloudName=\"mohi-vn\" publicId={user.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                      <Transformation height={user.user_avatar_cropH}  width={user.user_avatar_cropW} x={user.user_avatar_cropX} y={user.user_avatar_cropY} crop=\"crop\" />\r\n                    </Image>\r\n                  }\r\n              </Link>\r\n              </div>\r\n              <div className=\"menu-friend-requests-content-title\">\r\n                <Link to={\"/profile/\" + user.user_username}>{user.user_first_name + ' ' + user.user_last_name}</Link>\r\n                <div className=\"menu-friend-requests-content-button\">\r\n                  <p>100 bạn chung\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"menu-friend-requests-content-right\">\r\n                <Button user={user}/>\r\n              </div>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n    <div className=\"menu-noti-footer\">\r\n      <Link to=\"/friendrequests\">Xem tất cả</Link>\r\n    </div>\r\n  </div>\r\n</div>\r\n)\r\n}\r\nexport default MenuFriendRequests;\r\n"]},"metadata":{},"sourceType":"module"}