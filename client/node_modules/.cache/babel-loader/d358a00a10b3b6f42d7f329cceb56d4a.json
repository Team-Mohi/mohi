{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Suspense,lazy,useEffect,useState,useRef,useContext}from'react';import'./Home.css';import{Link,Route,Switch,useHistory,useLocation}from'react-router-dom';import{Layout,Menu,Input,Dropdown}from'antd';import{FaUserFriends,FaFacebookMessenger,FaBell,FaDotCircle,FaShare}from'react-icons/fa';import{AiFillCaretDown}from\"react-icons/ai\";import MenuItem from'antd/lib/menu/MenuItem';import ChatSider from'./../Components/ChatSider/ChatSider.jsx';import ChatMini from'./../Components/ChatMini/ChatMini.jsx';import Watch from'./../Components/Watch/Watch.jsx';import Page from'./../Components/Page/Page.jsx';import Group from'./../Components/Group/Group.jsx';import GroupAllContainer from'./../Containers/GroupAllContainer.jsx';import ModalPost from'./../Components/ModalPost/index.jsx';import Main from'./../Components/NewFeed/Index.jsx';import ProfileContainer from'./../Containers/ProfileContainer.jsx';import MessengerContainer from'./../Containers/MessengerContainer.jsx';import SearchNavigation from'./../Components/Search/index.jsx';import FriendRequests from'./../Components/FriendRequests/FriendRequests.jsx';import FriendSent from'./../Components/FriendRequests/FriendSent.jsx';import PageAllContainer from'./../Containers/PageAllContainer.jsx';import MenuNoti from'../Components/Notifications/NotificationsMenu.jsx';import MenuMessenger from'./../Components/Messenger/MessengerMenu.jsx';import SinglePost from'./../Components/SinglePost/SinglePost.jsx';import MenuFriendRequests from'./../Components/FriendRequests/FriendRequestMenu.jsx';import MenuSetting from'./../Components/Setting/SettingMenu.jsx';import Notifications from'./../Components/Notifications/Notifications.jsx';import Rules from'./../Components/Footer/Rules.jsx';import Setting from'../Components/Setting/Setting.jsx';import Help from'../Components/Footer/Help.jsx';import{PUBLIC_URL}from'./../Constants/public.jsx';import NotFound from'./../Components/NotFound/index.jsx';import CommingSoon from'./../Components/CommingSoon/index.jsx';import{Image,Transformation}from'cloudinary-react';import{useSelector}from'react-redux';import SocketContext from'./../Components/Socket/index.jsx';function Home(props,_ref){var message=_ref.message,friendsRequest=_ref.friendsRequest,notifycations=_ref.notifycations;var _useSelector=useSelector(function(state){return state.message;}),list=_useSelector.list;var listFriendsRequest=useSelector(function(state){return state.friendsRequest.list;});var listNoti=useSelector(function(state){return state.notifycations.list;});var countFriendRequest=listFriendsRequest.length;var countMess=0;var countNoti=0;var Header=Layout.Header;var Search=Input.Search;var history=useHistory();var path=useLocation().pathname.split('/');var key=history.location.key;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listChatMini=_useState2[0],setListChatMini=_useState2[1];var parentChatRef=useRef();var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var socket=useContext(SocketContext);useEffect(function(){socket.emit('register',currentUser.user_username);if(listChatMini.length===0){if(localStorage.getItem('listChatMini')){setListChatMini(localStorage.getItem('listChatMini').split(','));}}},[]);useEffect(function(){if(!path[2]){window.scrollTo(0,0);}},[key]);function _onSearch(value){var filter=/^[\\s]*$/;if(filter.test(value)){return;}history.push('/search/'+value);}var increaseChatMini=function increaseChatMini(iduser){if(!listChatMini.includes(iduser)){if(listChatMini.length>2){listChatMini.splice(0,1);}setListChatMini([].concat(_toConsumableArray(listChatMini),[iduser]));localStorage.setItem('listChatMini',[].concat(_toConsumableArray(listChatMini),[iduser]));}parentChatRef.current.showChatMiniFunc();};var closeChatMini=function closeChatMini(iduser){if(listChatMini.includes(iduser)){var newListChatMini=listChatMini.filter(function(chatmini){return chatmini!==iduser;});setListChatMini(newListChatMini);localStorage.setItem('listChatMini',newListChatMini);}};list.forEach(function(mess,i){if(!mess.pivot.messages_ReadAt&&mess.pivot.messages_From!==currentUser.id){countMess++;}});listNoti.forEach(function(noti,i){if(!noti.notification_IsRead){countNoti++;}});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Layout,{className:\"layout \"},/*#__PURE__*/React.createElement(Header,{className:\"nav-home\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrapper d-flex header-home \"},/*#__PURE__*/React.createElement(\"div\",{className:\"logo \"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:PUBLIC_URL+\"logo.png\",alt:\"Mohi.vn\",title:\"Mohi.vn\"}))),/*#__PURE__*/React.createElement(Search,{className:\"search-all\",placeholder:\"T\\xECm ki\\u1EBFm\",onSearch:function onSearch(value){return _onSearch(value);},enterButton:true}),/*#__PURE__*/React.createElement(Menu,{className:\"menu-home\",mode:\"horizontal\"},/*#__PURE__*/React.createElement(Menu.Item,{className:\"after-li\"},/*#__PURE__*/React.createElement(Link,{className:\"avatar-home\",to:\"/profile/\"+currentUser.user_username},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"})),/*#__PURE__*/React.createElement(\"span\",null,currentUser.user_last_name))),/*#__PURE__*/React.createElement(Menu.Item,{className:\"after-li\"},/*#__PURE__*/React.createElement(Link,{className:\"home\",to:\"/\"},\" Trang ch\\u1EE7\")),/*#__PURE__*/React.createElement(Menu.Item,null,/*#__PURE__*/React.createElement(Dropdown,{className:\"dropdown-setting\",trigger:['click'],overlay:/*#__PURE__*/React.createElement(MenuFriendRequests,null),placement:\"bottomCenter\",arrow:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"icon-friend-request\"},/*#__PURE__*/React.createElement(FaUserFriends,{title:\"B\\u1EA1n b\\xE8\"}),countFriendRequest?/*#__PURE__*/React.createElement(\"p\",{className:\"count-friend-request\"},countFriendRequest):null)))),/*#__PURE__*/React.createElement(Menu.Item,null,/*#__PURE__*/React.createElement(Dropdown,{className:\"dropdown-setting\",trigger:['click'],overlay:/*#__PURE__*/React.createElement(MenuMessenger,null),placement:\"bottomCenter\",arrow:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"icon-friend-request\"},/*#__PURE__*/React.createElement(FaFacebookMessenger,{title:\"Tin nh\\u1EAFn\"}),countMess?/*#__PURE__*/React.createElement(\"p\",{className:\"count-friend-request\"},countMess):null)))),/*#__PURE__*/React.createElement(Menu.Item,null,/*#__PURE__*/React.createElement(Dropdown,{className:\"dropdown-setting\",trigger:['click'],overlay:/*#__PURE__*/React.createElement(MenuNoti,null),placement:\"bottomCenter\",arrow:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"icon-friend-request\"},/*#__PURE__*/React.createElement(FaBell,{title:\"Th\\xF4ng b\\xE1o\"}),countNoti?/*#__PURE__*/React.createElement(\"p\",{className:\"count-friend-request\"},countNoti):null)))),/*#__PURE__*/React.createElement(Menu.Item,{className:\"menu-item-last-child\"},/*#__PURE__*/React.createElement(Dropdown,{className:\"dropdown-setting\",trigger:['click'],overlay:/*#__PURE__*/React.createElement(MenuSetting,null),placement:\"bottomCenter\",arrow:true},/*#__PURE__*/React.createElement(AiFillCaretDown,{title:\"C\\xE0i \\u0111\\u1EB7t\"})))))),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Main}),/*#__PURE__*/React.createElement(Route,{path:\"/messenger\",component:MessengerContainer}),/*#__PURE__*/React.createElement(Route,{path:\"/friendrequests\",component:FriendRequests}),/*#__PURE__*/React.createElement(Route,{path:\"/search/:value\",component:SearchNavigation}),/*#__PURE__*/React.createElement(Route,{path:\"/friend-sent\",component:FriendSent}),/*#__PURE__*/React.createElement(Route,{path:\"/watch\",component:Watch}),/*#__PURE__*/React.createElement(Route,{path:\"/photo/:index\",component:ModalPost}),/*#__PURE__*/React.createElement(Route,{path:\"/setting\",component:Setting}),/*#__PURE__*/React.createElement(Route,{path:\"/notifications\",component:Notifications}),/*#__PURE__*/React.createElement(Route,{path:\"/rules-mohi\",component:Rules}),/*#__PURE__*/React.createElement(Route,{path:\"/help\",component:Help}),/*#__PURE__*/React.createElement(Route,{path:\"/profile/:idProfile\",component:ProfileContainer}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:idPost\",component:SinglePost}),/*#__PURE__*/React.createElement(Route,{path:\"/comming-soon\",component:CommingSoon}),/*#__PURE__*/React.createElement(Route,{path:\"/404\",component:NotFound}),/*#__PURE__*/React.createElement(Route,{component:NotFound}))));}export default Home;","map":{"version":3,"sources":["D:/Web/mohi/client/src/app/Home.jsx"],"names":["React","Suspense","lazy","useEffect","useState","useRef","useContext","Link","Route","Switch","useHistory","useLocation","Layout","Menu","Input","Dropdown","FaUserFriends","FaFacebookMessenger","FaBell","FaDotCircle","FaShare","AiFillCaretDown","MenuItem","ChatSider","ChatMini","Watch","Page","Group","GroupAllContainer","ModalPost","Main","ProfileContainer","MessengerContainer","SearchNavigation","FriendRequests","FriendSent","PageAllContainer","MenuNoti","MenuMessenger","SinglePost","MenuFriendRequests","MenuSetting","Notifications","Rules","Setting","Help","PUBLIC_URL","NotFound","CommingSoon","Image","Transformation","useSelector","SocketContext","Home","props","message","friendsRequest","notifycations","state","list","listFriendsRequest","listNoti","countFriendRequest","length","countMess","countNoti","Header","Search","history","path","pathname","split","key","location","listChatMini","setListChatMini","parentChatRef","currentUser","JSON","parse","localStorage","getItem","info","socket","emit","user_username","window","scrollTo","onSearch","value","filter","test","push","increaseChatMini","iduser","includes","splice","setItem","current","showChatMiniFunc","closeChatMini","newListChatMini","chatmini","forEach","mess","i","pivot","messages_ReadAt","messages_From","id","noti","notification_IsRead","user_avatar_cropX","user_avatar","user_first_name","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY"],"mappings":"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","sourcesContent":["import React, { Suspense, lazy, useEffect, useState, useRef, useContext } from 'react';\r\nimport './Home.css';\r\nimport { Link, Route, Switch, useHistory, useLocation } from 'react-router-dom';\r\nimport { Layout, Menu, Input, Dropdown } from 'antd';\r\nimport { FaUserFriends, FaFacebookMessenger, FaBell,FaDotCircle,FaShare } from 'react-icons/fa';\r\nimport { AiFillCaretDown } from \"react-icons/ai\";\r\nimport MenuItem from 'antd/lib/menu/MenuItem';\r\nimport ChatSider from './../Components/ChatSider/ChatSider.jsx';\r\nimport ChatMini from './../Components/ChatMini/ChatMini.jsx';\r\nimport Watch from './../Components/Watch/Watch.jsx';\r\nimport Page from './../Components/Page/Page.jsx';\r\nimport Group from './../Components/Group/Group.jsx';\r\nimport GroupAllContainer from './../Containers/GroupAllContainer.jsx';\r\nimport ModalPost from './../Components/ModalPost/index.jsx';\r\nimport  Main from './../Components/NewFeed/Index.jsx';\r\nimport  ProfileContainer from './../Containers/ProfileContainer.jsx';\r\nimport  MessengerContainer from './../Containers/MessengerContainer.jsx';\r\nimport  SearchNavigation from './../Components/Search/index.jsx';\r\nimport  FriendRequests from './../Components/FriendRequests/FriendRequests.jsx';\r\nimport  FriendSent from './../Components/FriendRequests/FriendSent.jsx';\r\nimport PageAllContainer from './../Containers/PageAllContainer.jsx';\r\nimport MenuNoti from '../Components/Notifications/NotificationsMenu.jsx';\r\nimport MenuMessenger from './../Components/Messenger/MessengerMenu.jsx';\r\nimport SinglePost from './../Components/SinglePost/SinglePost.jsx';\r\nimport MenuFriendRequests from './../Components/FriendRequests/FriendRequestMenu.jsx';\r\nimport MenuSetting from './../Components/Setting/SettingMenu.jsx';\r\nimport Notifications from './../Components/Notifications/Notifications.jsx';\r\nimport Rules from './../Components/Footer/Rules.jsx';\r\nimport Setting from '../Components/Setting/Setting.jsx';\r\nimport Help from '../Components/Footer/Help.jsx';\r\nimport {PUBLIC_URL} from './../Constants/public.jsx';\r\nimport NotFound from './../Components/NotFound/index.jsx';\r\nimport CommingSoon from './../Components/CommingSoon/index.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {useSelector} from 'react-redux';\r\nimport SocketContext from './../Components/Socket/index.jsx';\r\n\r\nfunction Home(props, {message, friendsRequest, notifycations}) {\r\n    const {list} = useSelector(state => state.message);\r\n    const listFriendsRequest = useSelector(state => state.friendsRequest.list);\r\n    const listNoti = useSelector(state => state.notifycations.list);\r\n    var countFriendRequest = listFriendsRequest.length;\r\n    var countMess = 0;\r\n    var countNoti = 0;\r\n    const { Header } = Layout;\r\n    const { Search } = Input;\r\n    const history = useHistory();\r\n    const path = useLocation().pathname.split('/');\r\n    const key = history.location.key;\r\n    const [listChatMini, setListChatMini] = useState([]);\r\n    const parentChatRef = useRef();\r\n    const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n    const socket = useContext(SocketContext);\r\n\r\n    useEffect(() => {\r\n      socket.emit('register', currentUser.user_username);\r\n\r\n      if(listChatMini.length === 0){\r\n        if(localStorage.getItem('listChatMini')){\r\n          setListChatMini(localStorage.getItem('listChatMini').split(','))\r\n        }\r\n      }\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n      if(!path[2]){\r\n        window.scrollTo(0, 0)\r\n      }\r\n    },[key]);\r\n\r\n    function onSearch(value) {\r\n      var filter = /^[\\s]*$/;\r\n      if (filter.test(value)) {\r\n        return\r\n      }\r\n\r\n      history.push('/search/' + value)\r\n    }\r\n\r\n    const increaseChatMini = (iduser) =>{\r\n      if(!listChatMini.includes(iduser)){\r\n        if(listChatMini.length > 2){\r\n          listChatMini.splice(0,1)\r\n        }\r\n        setListChatMini([...listChatMini, iduser])\r\n        localStorage.setItem('listChatMini', [...listChatMini, iduser,])\r\n      }\r\n      parentChatRef.current.showChatMiniFunc()\r\n    }\r\n\r\n    const closeChatMini = (iduser) => {\r\n      if(listChatMini.includes(iduser)){\r\n        let newListChatMini = listChatMini.filter(chatmini => chatmini !== iduser)\r\n        setListChatMini(newListChatMini)\r\n        localStorage.setItem('listChatMini', newListChatMini)\r\n      }\r\n    }\r\n\r\n    list.forEach((mess, i) => {\r\n      if(!mess.pivot.messages_ReadAt && mess.pivot.messages_From !== currentUser.id){\r\n        countMess++\r\n      }\r\n    });\r\n\r\n    listNoti.forEach((noti, i) => {\r\n      if(!noti.notification_IsRead){\r\n        countNoti++\r\n      }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Layout className=\"layout \" >\r\n\r\n                <Header className=\"nav-home\">\r\n                    <div className=\"wrapper d-flex header-home \" >\r\n                        <div className=\"logo \" >\r\n                            <Link to=\"/\"><img src={PUBLIC_URL + \"logo.png\"} alt=\"Mohi.vn\" title=\"Mohi.vn\" /></Link>\r\n                        </div>\r\n                        <Search\r\n                            className=\"search-all\"\r\n                            placeholder=\"Tìm kiếm\"\r\n                            onSearch={(value) => onSearch(value)}\r\n                            enterButton\r\n                        />\r\n                        <Menu className=\"menu-home\" mode=\"horizontal\" >\r\n                            <Menu.Item className=\"after-li\">\r\n                                <Link className=\"avatar-home\" to={\"/profile/\" + currentUser.user_username} >\r\n                                    {currentUser.user_avatar_cropX === null ?\r\n                                      <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                                      :\r\n                                      <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                        <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                                      </Image>\r\n                                    }\r\n                                    <span>{currentUser.user_last_name}</span>\r\n                                </Link>\r\n                            </Menu.Item>\r\n                            <Menu.Item className=\"after-li\">\r\n                                <Link className=\"home\" to=\"/\"  > Trang chủ</Link>\r\n                            </Menu.Item>\r\n                            <Menu.Item >\r\n                                <Dropdown className=\"dropdown-setting\" trigger={['click']} overlay={<MenuFriendRequests />} placement=\"bottomCenter\" arrow>\r\n                                  <div>\r\n                                    <div className=\"icon-friend-request\">\r\n                                      <FaUserFriends title=\"Bạn bè\" />\r\n                                      {countFriendRequest ? <p className=\"count-friend-request\">{countFriendRequest}</p> : null}\r\n                                    </div>\r\n                                  </div>\r\n                                </Dropdown>\r\n                            </Menu.Item>\r\n                            <Menu.Item >\r\n                                <Dropdown className=\"dropdown-setting\" trigger={['click']} overlay={<MenuMessenger />} placement=\"bottomCenter\" arrow>\r\n                                    <div>\r\n                                      <div className=\"icon-friend-request\">\r\n                                        <FaFacebookMessenger title=\"Tin nhắn\" />\r\n                                        {countMess ? <p className=\"count-friend-request\">{countMess}</p> : null}\r\n                                      </div>\r\n                                    </div>\r\n                                </Dropdown>\r\n                            </Menu.Item>\r\n                            <Menu.Item >\r\n                                <Dropdown className=\"dropdown-setting\" trigger={['click']} overlay={<MenuNoti />} placement=\"bottomCenter\" arrow>\r\n                                    <div>\r\n                                      <div className=\"icon-friend-request\">\r\n                                        <FaBell title=\"Thông báo\" />\r\n                                        {countNoti ? <p className=\"count-friend-request\">{countNoti}</p> : null}\r\n                                      </div>\r\n                                    </div>\r\n                                </Dropdown>\r\n                            </Menu.Item>\r\n                            <Menu.Item className=\"menu-item-last-child\">\r\n                                <Dropdown className=\"dropdown-setting\" trigger={['click']} overlay={<MenuSetting />} placement=\"bottomCenter\" arrow>\r\n                                    <AiFillCaretDown title=\"Cài đặt\" />\r\n                                </Dropdown>\r\n                            </Menu.Item>\r\n                        </Menu>\r\n                    </div>\r\n                </Header>\r\n                    <Switch>\r\n                      <Route exact path=\"/\" component={Main} />\r\n                      <Route path=\"/messenger\" component={MessengerContainer} />\r\n                      <Route path=\"/friendrequests\" component={FriendRequests} />\r\n                      <Route path={`/search/:value`} component={SearchNavigation} />\r\n                      <Route path=\"/friend-sent\" component={FriendSent} />\r\n                      <Route path=\"/watch\" component={Watch} />\r\n                      <Route path=\"/photo/:index\" component={ModalPost} />\r\n                      <Route path=\"/setting\" component={Setting} />\r\n                      <Route path=\"/notifications\" component={Notifications} />\r\n                      <Route path=\"/rules-mohi\" component={Rules} />\r\n                      <Route path=\"/help\" component={Help} />\r\n                      <Route path=\"/profile/:idProfile\" component={ProfileContainer} />\r\n                      <Route path=\"/post/:idPost\" component={SinglePost} />\r\n                      <Route path=\"/comming-soon\" component={CommingSoon} />\r\n                      <Route path=\"/404\" component={NotFound} />\r\n                      <Route component={NotFound} />\r\n                    </Switch>\r\n            </Layout>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}