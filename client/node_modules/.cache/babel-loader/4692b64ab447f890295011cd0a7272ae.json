{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _draftJs = require('draft-js');\n\nvar _immutable = require('immutable');\n\nvar _proxies = require('./proxies');\n\nvar _proxies2 = _interopRequireDefault(_proxies);\n\nvar _moveSelectionToEnd = require('./moveSelectionToEnd');\n\nvar _moveSelectionToEnd2 = _interopRequireDefault(_moveSelectionToEnd);\n\nvar _resolveDecorators = require('./resolveDecorators');\n\nvar _resolveDecorators2 = _interopRequireDefault(_resolveDecorators);\n\nvar _defaultKeyBindings = require('./defaultKeyBindings');\n\nvar _defaultKeyBindings2 = _interopRequireDefault(_defaultKeyBindings);\n\nvar _defaultKeyCommands = require('./defaultKeyCommands');\n\nvar _defaultKeyCommands2 = _interopRequireDefault(_defaultKeyCommands);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint-disable no-continue,no-restricted-syntax */\n\n\nvar getDecoratorLength = function getDecoratorLength(obj) {\n  var decorators = void 0;\n\n  if (obj.decorators != null) {\n    decorators = obj.decorators;\n  } else if (obj._decorators != null) {\n    decorators = obj._decorators;\n  }\n\n  return decorators.size != null ? decorators.size : decorators.length;\n};\n/**\r\n * The main editor component\r\n */\n\n\nvar PluginEditor = function (_Component) {\n  _inherits(PluginEditor, _Component);\n\n  function PluginEditor(props) {\n    _classCallCheck(this, PluginEditor);\n\n    var _this = _possibleConstructorReturn(this, (PluginEditor.__proto__ || Object.getPrototypeOf(PluginEditor)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var plugins = [_this.props].concat(_toConsumableArray(_this.resolvePlugins()));\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.initialize !== 'function') return;\n      plugin.initialize(_this.getPluginMethods());\n    }); // attach proxy methods like `focus` or `blur`\n\n    _proxies2.default.forEach(function (method) {\n      _this[method] = function () {\n        var _this$editor;\n\n        return (_this$editor = _this.editor)[method].apply(_this$editor, arguments);\n      };\n    });\n\n    _this.state = {}; // TODO for Nik: ask ben why this is relevent\n\n    return _this;\n  }\n\n  _createClass(PluginEditor, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      var decorator = (0, _resolveDecorators2.default)(this.props, this.getEditorState, this.onChange);\n\n      var editorState = _draftJs.EditorState.set(this.props.editorState, {\n        decorator: decorator\n      });\n\n      this.onChange((0, _moveSelectionToEnd2.default)(editorState));\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(next) {\n      var curr = this.props;\n      var currDec = curr.editorState.getDecorator();\n      var nextDec = next.editorState.getDecorator(); // If there is not current decorator, there's nothing to carry over to the next editor state\n\n      if (!currDec) return; // If the current decorator is the same as the new one, don't call onChange to avoid infinite loops\n\n      if (currDec === nextDec) return; // If the old and the new decorator are the same, but no the same object, also don't call onChange to avoid infinite loops\n\n      if (currDec && nextDec && getDecoratorLength(currDec) === getDecoratorLength(nextDec)) return;\n\n      var editorState = _draftJs.EditorState.set(next.editorState, {\n        decorator: currDec\n      });\n\n      this.onChange((0, _moveSelectionToEnd2.default)(editorState));\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _this2 = this;\n\n      this.resolvePlugins().forEach(function (plugin) {\n        if (plugin.willUnmount) {\n          plugin.willUnmount({\n            getEditorState: _this2.getEditorState,\n            setEditorState: _this2.onChange\n          });\n        }\n      });\n    } // Cycle through the plugins, changing the editor state with what the plugins\n    // changed (or didn't)\n    // TODO further down in render we use readOnly={this.props.readOnly || this.state.readOnly}. Ask Ben why readOnly is here just from the props? Why would plugins use this instead of just taking it from getProps?\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var pluginHooks = this.createPluginHooks();\n      var customStyleMap = this.resolveCustomStyleMap();\n      var accessibilityProps = this.resolveAccessibilityProps();\n      var blockRenderMap = this.resolveblockRenderMap();\n      return _react2.default.createElement(_draftJs.Editor, _extends({}, this.props, accessibilityProps, pluginHooks, {\n        readOnly: this.props.readOnly || this.state.readOnly,\n        customStyleMap: customStyleMap,\n        blockRenderMap: blockRenderMap,\n        onChange: this.onChange,\n        editorState: this.props.editorState,\n        ref: function ref(element) {\n          _this3.editor = element;\n        }\n      }));\n    }\n  }]);\n\n  return PluginEditor;\n}(_react.Component);\n\nPluginEditor.propTypes = {\n  editorState: _propTypes2.default.object.isRequired,\n  onChange: _propTypes2.default.func.isRequired,\n  plugins: _propTypes2.default.array,\n  defaultKeyBindings: _propTypes2.default.bool,\n  defaultKeyCommands: _propTypes2.default.bool,\n  defaultBlockRenderMap: _propTypes2.default.bool,\n  customStyleMap: _propTypes2.default.object,\n  // eslint-disable-next-line react/no-unused-prop-types\n  decorators: _propTypes2.default.array\n};\nPluginEditor.defaultProps = {\n  defaultBlockRenderMap: true,\n  defaultKeyBindings: true,\n  defaultKeyCommands: true,\n  customStyleMap: {},\n  plugins: [],\n  decorators: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onChange = function (editorState) {\n    var newEditorState = editorState;\n\n    _this4.resolvePlugins().forEach(function (plugin) {\n      if (plugin.onChange) {\n        newEditorState = plugin.onChange(newEditorState, _this4.getPluginMethods());\n      }\n    });\n\n    if (_this4.props.onChange) {\n      _this4.props.onChange(newEditorState, _this4.getPluginMethods());\n    }\n  };\n\n  this.getPlugins = function () {\n    return _this4.props.plugins.slice(0);\n  };\n\n  this.getProps = function () {\n    return _extends({}, _this4.props);\n  };\n\n  this.getReadOnly = function () {\n    return _this4.props.readOnly;\n  };\n\n  this.setReadOnly = function (readOnly) {\n    if (readOnly !== _this4.state.readOnly) _this4.setState({\n      readOnly: readOnly\n    });\n  };\n\n  this.getEditorRef = function () {\n    return _this4.editor;\n  };\n\n  this.getEditorState = function () {\n    return _this4.props.editorState;\n  };\n\n  this.getPluginMethods = function () {\n    return {\n      getPlugins: _this4.getPlugins,\n      getProps: _this4.getProps,\n      setEditorState: _this4.onChange,\n      getEditorState: _this4.getEditorState,\n      getReadOnly: _this4.getReadOnly,\n      setReadOnly: _this4.setReadOnly,\n      getEditorRef: _this4.getEditorRef\n    };\n  };\n\n  this.createEventHooks = function (methodName, plugins) {\n    return function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var newArgs = [].slice.apply(args);\n      newArgs.push(_this4.getPluginMethods());\n      return plugins.some(function (plugin) {\n        return typeof plugin[methodName] === 'function' && plugin[methodName].apply(plugin, _toConsumableArray(newArgs)) === true;\n      });\n    };\n  };\n\n  this.createHandleHooks = function (methodName, plugins) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var newArgs = [].slice.apply(args);\n      newArgs.push(_this4.getPluginMethods());\n      return plugins.some(function (plugin) {\n        return typeof plugin[methodName] === 'function' && plugin[methodName].apply(plugin, _toConsumableArray(newArgs)) === 'handled';\n      }) ? 'handled' : 'not-handled';\n    };\n  };\n\n  this.createFnHooks = function (methodName, plugins) {\n    return function () {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      var newArgs = [].slice.apply(args);\n      newArgs.push(_this4.getPluginMethods());\n\n      if (methodName === 'blockRendererFn') {\n        var block = {\n          props: {}\n        };\n        plugins.forEach(function (plugin) {\n          if (typeof plugin[methodName] !== 'function') return;\n          var result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\n\n          if (result !== undefined && result !== null) {\n            var pluginProps = result.props,\n                pluginRest = _objectWithoutProperties(result, ['props']); // eslint-disable-line no-use-before-define\n\n\n            var _block = block,\n                props = _block.props,\n                rest = _objectWithoutProperties(_block, ['props']); // eslint-disable-line no-use-before-define\n\n\n            block = _extends({}, rest, pluginRest, {\n              props: _extends({}, props, pluginProps)\n            });\n          }\n        });\n        return block.component ? block : false;\n      } else if (methodName === 'blockStyleFn') {\n        var styles = void 0;\n        plugins.forEach(function (plugin) {\n          if (typeof plugin[methodName] !== 'function') return;\n          var result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\n\n          if (result !== undefined && result !== null) {\n            styles = (styles ? styles + ' ' : '') + result;\n          }\n        });\n        return styles || '';\n      }\n\n      var result = void 0;\n      var wasHandled = plugins.some(function (plugin) {\n        if (typeof plugin[methodName] !== 'function') return false;\n        result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\n        return result !== undefined;\n      });\n      return wasHandled ? result : false;\n    };\n  };\n\n  this.createPluginHooks = function () {\n    var pluginHooks = {};\n    var eventHookKeys = [];\n    var handleHookKeys = [];\n    var fnHookKeys = [];\n    var plugins = [_this4.props].concat(_toConsumableArray(_this4.resolvePlugins()));\n    plugins.forEach(function (plugin) {\n      Object.keys(plugin).forEach(function (attrName) {\n        if (attrName === 'onChange') return; // if `attrName` has been added as a hook key already, ignore this one\n\n        if (eventHookKeys.indexOf(attrName) !== -1 || fnHookKeys.indexOf(attrName) !== -1) return;\n        var isEventHookKey = attrName.indexOf('on') === 0;\n\n        if (isEventHookKey) {\n          eventHookKeys.push(attrName);\n          return;\n        }\n\n        var isHandleHookKey = attrName.indexOf('handle') === 0;\n\n        if (isHandleHookKey) {\n          handleHookKeys.push(attrName);\n          return;\n        } // checks if `attrName` ends with 'Fn'\n\n\n        var isFnHookKey = attrName.length - 2 === attrName.indexOf('Fn');\n\n        if (isFnHookKey) {\n          fnHookKeys.push(attrName);\n        }\n      });\n    });\n    eventHookKeys.forEach(function (attrName) {\n      pluginHooks[attrName] = _this4.createEventHooks(attrName, plugins);\n    });\n    handleHookKeys.forEach(function (attrName) {\n      pluginHooks[attrName] = _this4.createHandleHooks(attrName, plugins);\n    });\n    fnHookKeys.forEach(function (attrName) {\n      pluginHooks[attrName] = _this4.createFnHooks(attrName, plugins);\n    });\n    return pluginHooks;\n  };\n\n  this.resolvePlugins = function () {\n    var plugins = _this4.props.plugins.slice(0);\n\n    if (_this4.props.defaultKeyBindings === true) {\n      plugins.push(_defaultKeyBindings2.default);\n    }\n\n    if (_this4.props.defaultKeyCommands === true) {\n      plugins.push(_defaultKeyCommands2.default);\n    }\n\n    return plugins;\n  };\n\n  this.resolveCustomStyleMap = function () {\n    return _this4.props.plugins.filter(function (plug) {\n      return plug.customStyleMap !== undefined;\n    }).map(function (plug) {\n      return plug.customStyleMap;\n    }).concat([_this4.props.customStyleMap]).reduce(function (styles, style) {\n      return _extends({}, styles, style);\n    }, {});\n  };\n\n  this.resolveblockRenderMap = function () {\n    var blockRenderMap = _this4.props.plugins.filter(function (plug) {\n      return plug.blockRenderMap !== undefined;\n    }).reduce(function (maps, plug) {\n      return maps.merge(plug.blockRenderMap);\n    }, (0, _immutable.Map)({}));\n\n    if (_this4.props.defaultBlockRenderMap) {\n      blockRenderMap = _draftJs.DefaultDraftBlockRenderMap.merge(blockRenderMap);\n    }\n\n    if (_this4.props.blockRenderMap) {\n      blockRenderMap = blockRenderMap.merge(_this4.props.blockRenderMap);\n    }\n\n    return blockRenderMap;\n  };\n\n  this.resolveAccessibilityProps = function () {\n    var accessibilityProps = {};\n    var plugins = [_this4.props].concat(_toConsumableArray(_this4.resolvePlugins()));\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.getAccessibilityProps !== 'function') return;\n      var props = plugin.getAccessibilityProps();\n      var popupProps = {};\n\n      if (accessibilityProps.ariaHasPopup === undefined) {\n        popupProps.ariaHasPopup = props.ariaHasPopup;\n      } else if (props.ariaHasPopup === 'true') {\n        popupProps.ariaHasPopup = 'true';\n      }\n\n      if (accessibilityProps.ariaExpanded === undefined) {\n        popupProps.ariaExpanded = props.ariaExpanded;\n      } else if (props.ariaExpanded === true) {\n        popupProps.ariaExpanded = true;\n      }\n\n      accessibilityProps = _extends({}, accessibilityProps, props, popupProps);\n    });\n    return accessibilityProps;\n  };\n};\n\nexports.default = PluginEditor;","map":{"version":3,"sources":["D:/Web/mohi/client/node_modules/draft-js-plugins-editor/lib/Editor/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_draftJs","_immutable","_proxies","_proxies2","_moveSelectionToEnd","_moveSelectionToEnd2","_resolveDecorators","_resolveDecorators2","_defaultKeyBindings","_defaultKeyBindings2","_defaultKeyCommands","_defaultKeyCommands2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getDecoratorLength","decorators","_decorators","size","PluginEditor","_Component","_this","getPrototypeOf","_initialiseProps","plugins","concat","resolvePlugins","forEach","plugin","initialize","getPluginMethods","method","_this$editor","editor","apply","state","componentWillMount","decorator","getEditorState","onChange","editorState","EditorState","set","componentWillReceiveProps","next","curr","currDec","getDecorator","nextDec","componentWillUnmount","_this2","willUnmount","setEditorState","render","_this3","pluginHooks","createPluginHooks","customStyleMap","resolveCustomStyleMap","accessibilityProps","resolveAccessibilityProps","blockRenderMap","resolveblockRenderMap","createElement","Editor","readOnly","ref","element","Component","propTypes","object","isRequired","func","array","defaultKeyBindings","bool","defaultKeyCommands","defaultBlockRenderMap","defaultProps","_this4","newEditorState","getPlugins","slice","getProps","getReadOnly","setReadOnly","setState","getEditorRef","createEventHooks","methodName","_len","args","_key","newArgs","push","some","createHandleHooks","_len2","_key2","createFnHooks","_len3","_key3","block","result","undefined","pluginProps","pluginRest","_block","rest","component","styles","wasHandled","eventHookKeys","handleHookKeys","fnHookKeys","attrName","isEventHookKey","isHandleHookKey","isFnHookKey","filter","plug","map","reduce","style","maps","merge","Map","DefaultDraftBlockRenderMap","getAccessibilityProps","popupProps","ariaHasPopup","ariaExpanded"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _react = require('react');\r\n\r\nvar _react2 = _interopRequireDefault(_react);\r\n\r\nvar _propTypes = require('prop-types');\r\n\r\nvar _propTypes2 = _interopRequireDefault(_propTypes);\r\n\r\nvar _draftJs = require('draft-js');\r\n\r\nvar _immutable = require('immutable');\r\n\r\nvar _proxies = require('./proxies');\r\n\r\nvar _proxies2 = _interopRequireDefault(_proxies);\r\n\r\nvar _moveSelectionToEnd = require('./moveSelectionToEnd');\r\n\r\nvar _moveSelectionToEnd2 = _interopRequireDefault(_moveSelectionToEnd);\r\n\r\nvar _resolveDecorators = require('./resolveDecorators');\r\n\r\nvar _resolveDecorators2 = _interopRequireDefault(_resolveDecorators);\r\n\r\nvar _defaultKeyBindings = require('./defaultKeyBindings');\r\n\r\nvar _defaultKeyBindings2 = _interopRequireDefault(_defaultKeyBindings);\r\n\r\nvar _defaultKeyCommands = require('./defaultKeyCommands');\r\n\r\nvar _defaultKeyCommands2 = _interopRequireDefault(_defaultKeyCommands);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\r\n\r\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable no-continue,no-restricted-syntax */\r\n\r\n\r\nvar getDecoratorLength = function getDecoratorLength(obj) {\r\n  var decorators = void 0;\r\n\r\n  if (obj.decorators != null) {\r\n    decorators = obj.decorators;\r\n  } else if (obj._decorators != null) {\r\n    decorators = obj._decorators;\r\n  }\r\n\r\n  return decorators.size != null ? decorators.size : decorators.length;\r\n};\r\n\r\n/**\r\n * The main editor component\r\n */\r\n\r\nvar PluginEditor = function (_Component) {\r\n  _inherits(PluginEditor, _Component);\r\n\r\n  function PluginEditor(props) {\r\n    _classCallCheck(this, PluginEditor);\r\n\r\n    var _this = _possibleConstructorReturn(this, (PluginEditor.__proto__ || Object.getPrototypeOf(PluginEditor)).call(this, props));\r\n\r\n    _initialiseProps.call(_this);\r\n\r\n    var plugins = [_this.props].concat(_toConsumableArray(_this.resolvePlugins()));\r\n    plugins.forEach(function (plugin) {\r\n      if (typeof plugin.initialize !== 'function') return;\r\n      plugin.initialize(_this.getPluginMethods());\r\n    });\r\n\r\n    // attach proxy methods like `focus` or `blur`\r\n    _proxies2.default.forEach(function (method) {\r\n      _this[method] = function () {\r\n        var _this$editor;\r\n\r\n        return (_this$editor = _this.editor)[method].apply(_this$editor, arguments);\r\n      };\r\n    });\r\n\r\n    _this.state = {}; // TODO for Nik: ask ben why this is relevent\r\n    return _this;\r\n  }\r\n\r\n  _createClass(PluginEditor, [{\r\n    key: 'componentWillMount',\r\n    value: function componentWillMount() {\r\n      var decorator = (0, _resolveDecorators2.default)(this.props, this.getEditorState, this.onChange);\r\n\r\n      var editorState = _draftJs.EditorState.set(this.props.editorState, { decorator: decorator });\r\n      this.onChange((0, _moveSelectionToEnd2.default)(editorState));\r\n    }\r\n  }, {\r\n    key: 'componentWillReceiveProps',\r\n    value: function componentWillReceiveProps(next) {\r\n      var curr = this.props;\r\n      var currDec = curr.editorState.getDecorator();\r\n      var nextDec = next.editorState.getDecorator();\r\n\r\n      // If there is not current decorator, there's nothing to carry over to the next editor state\r\n      if (!currDec) return;\r\n      // If the current decorator is the same as the new one, don't call onChange to avoid infinite loops\r\n      if (currDec === nextDec) return;\r\n      // If the old and the new decorator are the same, but no the same object, also don't call onChange to avoid infinite loops\r\n      if (currDec && nextDec && getDecoratorLength(currDec) === getDecoratorLength(nextDec)) return;\r\n\r\n      var editorState = _draftJs.EditorState.set(next.editorState, { decorator: currDec });\r\n      this.onChange((0, _moveSelectionToEnd2.default)(editorState));\r\n    }\r\n  }, {\r\n    key: 'componentWillUnmount',\r\n    value: function componentWillUnmount() {\r\n      var _this2 = this;\r\n\r\n      this.resolvePlugins().forEach(function (plugin) {\r\n        if (plugin.willUnmount) {\r\n          plugin.willUnmount({\r\n            getEditorState: _this2.getEditorState,\r\n            setEditorState: _this2.onChange\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // Cycle through the plugins, changing the editor state with what the plugins\r\n    // changed (or didn't)\r\n\r\n\r\n    // TODO further down in render we use readOnly={this.props.readOnly || this.state.readOnly}. Ask Ben why readOnly is here just from the props? Why would plugins use this instead of just taking it from getProps?\r\n\r\n  }, {\r\n    key: 'render',\r\n    value: function render() {\r\n      var _this3 = this;\r\n\r\n      var pluginHooks = this.createPluginHooks();\r\n      var customStyleMap = this.resolveCustomStyleMap();\r\n      var accessibilityProps = this.resolveAccessibilityProps();\r\n      var blockRenderMap = this.resolveblockRenderMap();\r\n      return _react2.default.createElement(_draftJs.Editor, _extends({}, this.props, accessibilityProps, pluginHooks, {\r\n        readOnly: this.props.readOnly || this.state.readOnly,\r\n        customStyleMap: customStyleMap,\r\n        blockRenderMap: blockRenderMap,\r\n        onChange: this.onChange,\r\n        editorState: this.props.editorState,\r\n        ref: function ref(element) {\r\n          _this3.editor = element;\r\n        }\r\n      }));\r\n    }\r\n  }]);\r\n\r\n  return PluginEditor;\r\n}(_react.Component);\r\n\r\nPluginEditor.propTypes = {\r\n  editorState: _propTypes2.default.object.isRequired,\r\n  onChange: _propTypes2.default.func.isRequired,\r\n  plugins: _propTypes2.default.array,\r\n  defaultKeyBindings: _propTypes2.default.bool,\r\n  defaultKeyCommands: _propTypes2.default.bool,\r\n  defaultBlockRenderMap: _propTypes2.default.bool,\r\n  customStyleMap: _propTypes2.default.object,\r\n  // eslint-disable-next-line react/no-unused-prop-types\r\n  decorators: _propTypes2.default.array\r\n};\r\nPluginEditor.defaultProps = {\r\n  defaultBlockRenderMap: true,\r\n  defaultKeyBindings: true,\r\n  defaultKeyCommands: true,\r\n  customStyleMap: {},\r\n  plugins: [],\r\n  decorators: []\r\n};\r\n\r\nvar _initialiseProps = function _initialiseProps() {\r\n  var _this4 = this;\r\n\r\n  this.onChange = function (editorState) {\r\n    var newEditorState = editorState;\r\n    _this4.resolvePlugins().forEach(function (plugin) {\r\n      if (plugin.onChange) {\r\n        newEditorState = plugin.onChange(newEditorState, _this4.getPluginMethods());\r\n      }\r\n    });\r\n\r\n    if (_this4.props.onChange) {\r\n      _this4.props.onChange(newEditorState, _this4.getPluginMethods());\r\n    }\r\n  };\r\n\r\n  this.getPlugins = function () {\r\n    return _this4.props.plugins.slice(0);\r\n  };\r\n\r\n  this.getProps = function () {\r\n    return _extends({}, _this4.props);\r\n  };\r\n\r\n  this.getReadOnly = function () {\r\n    return _this4.props.readOnly;\r\n  };\r\n\r\n  this.setReadOnly = function (readOnly) {\r\n    if (readOnly !== _this4.state.readOnly) _this4.setState({ readOnly: readOnly });\r\n  };\r\n\r\n  this.getEditorRef = function () {\r\n    return _this4.editor;\r\n  };\r\n\r\n  this.getEditorState = function () {\r\n    return _this4.props.editorState;\r\n  };\r\n\r\n  this.getPluginMethods = function () {\r\n    return {\r\n      getPlugins: _this4.getPlugins,\r\n      getProps: _this4.getProps,\r\n      setEditorState: _this4.onChange,\r\n      getEditorState: _this4.getEditorState,\r\n      getReadOnly: _this4.getReadOnly,\r\n      setReadOnly: _this4.setReadOnly,\r\n      getEditorRef: _this4.getEditorRef\r\n    };\r\n  };\r\n\r\n  this.createEventHooks = function (methodName, plugins) {\r\n    return function () {\r\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n        args[_key] = arguments[_key];\r\n      }\r\n\r\n      var newArgs = [].slice.apply(args);\r\n      newArgs.push(_this4.getPluginMethods());\r\n\r\n      return plugins.some(function (plugin) {\r\n        return typeof plugin[methodName] === 'function' && plugin[methodName].apply(plugin, _toConsumableArray(newArgs)) === true;\r\n      });\r\n    };\r\n  };\r\n\r\n  this.createHandleHooks = function (methodName, plugins) {\r\n    return function () {\r\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n        args[_key2] = arguments[_key2];\r\n      }\r\n\r\n      var newArgs = [].slice.apply(args);\r\n      newArgs.push(_this4.getPluginMethods());\r\n\r\n      return plugins.some(function (plugin) {\r\n        return typeof plugin[methodName] === 'function' && plugin[methodName].apply(plugin, _toConsumableArray(newArgs)) === 'handled';\r\n      }) ? 'handled' : 'not-handled';\r\n    };\r\n  };\r\n\r\n  this.createFnHooks = function (methodName, plugins) {\r\n    return function () {\r\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n        args[_key3] = arguments[_key3];\r\n      }\r\n\r\n      var newArgs = [].slice.apply(args);\r\n\r\n      newArgs.push(_this4.getPluginMethods());\r\n\r\n      if (methodName === 'blockRendererFn') {\r\n        var block = { props: {} };\r\n        plugins.forEach(function (plugin) {\r\n          if (typeof plugin[methodName] !== 'function') return;\r\n          var result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\r\n          if (result !== undefined && result !== null) {\r\n            var pluginProps = result.props,\r\n                pluginRest = _objectWithoutProperties(result, ['props']); // eslint-disable-line no-use-before-define\r\n\r\n\r\n            var _block = block,\r\n                props = _block.props,\r\n                rest = _objectWithoutProperties(_block, ['props']); // eslint-disable-line no-use-before-define\r\n\r\n\r\n            block = _extends({}, rest, pluginRest, { props: _extends({}, props, pluginProps) });\r\n          }\r\n        });\r\n\r\n        return block.component ? block : false;\r\n      } else if (methodName === 'blockStyleFn') {\r\n        var styles = void 0;\r\n        plugins.forEach(function (plugin) {\r\n          if (typeof plugin[methodName] !== 'function') return;\r\n          var result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\r\n          if (result !== undefined && result !== null) {\r\n            styles = (styles ? styles + ' ' : '') + result;\r\n          }\r\n        });\r\n\r\n        return styles || '';\r\n      }\r\n\r\n      var result = void 0;\r\n      var wasHandled = plugins.some(function (plugin) {\r\n        if (typeof plugin[methodName] !== 'function') return false;\r\n        result = plugin[methodName].apply(plugin, _toConsumableArray(newArgs));\r\n        return result !== undefined;\r\n      });\r\n      return wasHandled ? result : false;\r\n    };\r\n  };\r\n\r\n  this.createPluginHooks = function () {\r\n    var pluginHooks = {};\r\n    var eventHookKeys = [];\r\n    var handleHookKeys = [];\r\n    var fnHookKeys = [];\r\n    var plugins = [_this4.props].concat(_toConsumableArray(_this4.resolvePlugins()));\r\n\r\n    plugins.forEach(function (plugin) {\r\n      Object.keys(plugin).forEach(function (attrName) {\r\n        if (attrName === 'onChange') return;\r\n\r\n        // if `attrName` has been added as a hook key already, ignore this one\r\n        if (eventHookKeys.indexOf(attrName) !== -1 || fnHookKeys.indexOf(attrName) !== -1) return;\r\n\r\n        var isEventHookKey = attrName.indexOf('on') === 0;\r\n        if (isEventHookKey) {\r\n          eventHookKeys.push(attrName);\r\n          return;\r\n        }\r\n\r\n        var isHandleHookKey = attrName.indexOf('handle') === 0;\r\n        if (isHandleHookKey) {\r\n          handleHookKeys.push(attrName);\r\n          return;\r\n        }\r\n\r\n        // checks if `attrName` ends with 'Fn'\r\n        var isFnHookKey = attrName.length - 2 === attrName.indexOf('Fn');\r\n        if (isFnHookKey) {\r\n          fnHookKeys.push(attrName);\r\n        }\r\n      });\r\n    });\r\n\r\n    eventHookKeys.forEach(function (attrName) {\r\n      pluginHooks[attrName] = _this4.createEventHooks(attrName, plugins);\r\n    });\r\n\r\n    handleHookKeys.forEach(function (attrName) {\r\n      pluginHooks[attrName] = _this4.createHandleHooks(attrName, plugins);\r\n    });\r\n\r\n    fnHookKeys.forEach(function (attrName) {\r\n      pluginHooks[attrName] = _this4.createFnHooks(attrName, plugins);\r\n    });\r\n\r\n    return pluginHooks;\r\n  };\r\n\r\n  this.resolvePlugins = function () {\r\n    var plugins = _this4.props.plugins.slice(0);\r\n    if (_this4.props.defaultKeyBindings === true) {\r\n      plugins.push(_defaultKeyBindings2.default);\r\n    }\r\n    if (_this4.props.defaultKeyCommands === true) {\r\n      plugins.push(_defaultKeyCommands2.default);\r\n    }\r\n\r\n    return plugins;\r\n  };\r\n\r\n  this.resolveCustomStyleMap = function () {\r\n    return _this4.props.plugins.filter(function (plug) {\r\n      return plug.customStyleMap !== undefined;\r\n    }).map(function (plug) {\r\n      return plug.customStyleMap;\r\n    }).concat([_this4.props.customStyleMap]).reduce(function (styles, style) {\r\n      return _extends({}, styles, style);\r\n    }, {});\r\n  };\r\n\r\n  this.resolveblockRenderMap = function () {\r\n    var blockRenderMap = _this4.props.plugins.filter(function (plug) {\r\n      return plug.blockRenderMap !== undefined;\r\n    }).reduce(function (maps, plug) {\r\n      return maps.merge(plug.blockRenderMap);\r\n    }, (0, _immutable.Map)({}));\r\n    if (_this4.props.defaultBlockRenderMap) {\r\n      blockRenderMap = _draftJs.DefaultDraftBlockRenderMap.merge(blockRenderMap);\r\n    }\r\n    if (_this4.props.blockRenderMap) {\r\n      blockRenderMap = blockRenderMap.merge(_this4.props.blockRenderMap);\r\n    }\r\n    return blockRenderMap;\r\n  };\r\n\r\n  this.resolveAccessibilityProps = function () {\r\n    var accessibilityProps = {};\r\n    var plugins = [_this4.props].concat(_toConsumableArray(_this4.resolvePlugins()));\r\n    plugins.forEach(function (plugin) {\r\n      if (typeof plugin.getAccessibilityProps !== 'function') return;\r\n      var props = plugin.getAccessibilityProps();\r\n      var popupProps = {};\r\n\r\n      if (accessibilityProps.ariaHasPopup === undefined) {\r\n        popupProps.ariaHasPopup = props.ariaHasPopup;\r\n      } else if (props.ariaHasPopup === 'true') {\r\n        popupProps.ariaHasPopup = 'true';\r\n      }\r\n\r\n      if (accessibilityProps.ariaExpanded === undefined) {\r\n        popupProps.ariaExpanded = props.ariaExpanded;\r\n      } else if (props.ariaExpanded === true) {\r\n        popupProps.ariaExpanded = true;\r\n      }\r\n\r\n      accessibilityProps = _extends({}, accessibilityProps, props, popupProps);\r\n    });\r\n\r\n    return accessibilityProps;\r\n  };\r\n};\r\n\r\nexports.default = PluginEditor;"]},"metadata":{},"sourceType":"script"}