{"ast":null,"code":"import React from'react';import'./Story.css';import{AiOutlinePlus}from'react-icons/ai';import Slider from\"react-slick\";import\"slick-carousel/slick/slick.css\";import\"slick-carousel/slick/slick-theme.css\";import{useSelector,useDispatch}from'react-redux';import{skeleTonStory}from'./../Skeleton/index.jsx';import{Spin}from'antd';import{Image,Transformation}from'cloudinary-react';import{toggleStatusPresentialModal}from'./../../Actions/index.jsx';function Story(_ref){var stories=_ref.stories;var dispatch=useDispatch();var stateStore=useSelector(function(state){return state.stories;});var listStory=stateStore.listStory;var loading=stateStore.loading;var loadingNewStory=stateStore.loadingNewStory;var settings={dots:false,infinite:true,speed:500,slidesToShow:listStory.length<4?listStory.length:4,slidesToScroll:1};if(loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"story-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story-title\"},\"Tin\"),skeleTonStory));}if(!loading&&!listStory.length){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"story-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story-title\"},\"Tin\"),/*#__PURE__*/React.createElement(\"div\",null,\"Mohi h\\xF4m nay hi\\u1EC7n ch\\u01B0a c\\xF3 tin\")));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"story-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"story-title\"},\"Tin\"),/*#__PURE__*/React.createElement(Slider,settings,listStory.map(function(story,index){var story_image=story.list_story;return/*#__PURE__*/React.createElement(\"div\",{className:\"story-item\",key:index,onClick:function onClick(){return dispatch(toggleStatusPresentialModal('view_story',{list:listStory,activeIndex:index}));}},/*#__PURE__*/React.createElement(\"div\",{className:\"story-item-image\"},story_image[0].story_ImageUrl&&story_image[0].story_Type==='image'&&/*#__PURE__*/React.createElement(\"img\",{src:story_image[0].story_ImageUrl,alt:story.user_first_name+' '+story.user_last_name}),story_image[0].story_ImageUrl&&story_image[0].story_Type==='video'&&/*#__PURE__*/React.createElement(\"video\",{src:story_image[0].story_ImageUrl}),!story_image[0].story_ImageUrl&&/*#__PURE__*/React.createElement(\"div\",{className:\"story-content-no-image\"},\" \",/*#__PURE__*/React.createElement(\"p\",null,story_image[0].story_Content)),loadingNewStory&&story.id===JSON.parse(localStorage.getItem('ustk')).info.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"story-content-loading-image\"},\" \",/*#__PURE__*/React.createElement(Spin,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"story-item-name\"},/*#__PURE__*/React.createElement(\"p\",null,story.id===JSON.parse(localStorage.getItem('ustk')).info.id?'Tin của bạn':story.user_first_name+' '+story.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"story-item-avatar\"},story.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:story.user_avatar,alt:story.user_first_name+' '+story.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:story.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:story.user_avatar_cropH,width:story.user_avatar_cropW,x:story.user_avatar_cropX,y:story.user_avatar_cropY,crop:\"crop\"}))));}))));}export default Story;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/Story.jsx"],"names":["React","AiOutlinePlus","Slider","useSelector","useDispatch","skeleTonStory","Spin","Image","Transformation","toggleStatusPresentialModal","Story","stories","dispatch","stateStore","state","listStory","loading","loadingNewStory","settings","dots","infinite","speed","slidesToShow","length","slidesToScroll","map","story","index","story_image","list_story","list","activeIndex","story_ImageUrl","story_Type","user_first_name","user_last_name","story_Content","id","JSON","parse","localStorage","getItem","info","user_avatar_cropX","user_avatar","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './Story.css';\r\nimport {AiOutlinePlus} from 'react-icons/ai';\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport {  useSelector, useDispatch } from 'react-redux';\r\nimport {skeleTonStory} from './../Skeleton/index.jsx';\r\nimport {Spin} from 'antd';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\n\r\nfunction Story({stories}){\r\n  const dispatch = useDispatch();\r\n  const stateStore = useSelector(state => state.stories);\r\n  const listStory = stateStore.listStory;\r\n  const loading = stateStore.loading;\r\n  const loadingNewStory = stateStore.loadingNewStory;\r\n  var settings = {\r\n      dots: false,\r\n      infinite: true,\r\n      speed: 500,\r\n      slidesToShow: listStory.length < 4 ? listStory.length : 4,\r\n      slidesToScroll: 1\r\n  };\r\n\r\n  if(loading){\r\n    return(\r\n      <React.Fragment>\r\n        <div className=\"story-wrap\">\r\n          <div className=\"story-title\">Tin</div>\r\n          {skeleTonStory}\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  if(!loading && !listStory.length){\r\n    return(\r\n      <React.Fragment>\r\n        <div className=\"story-wrap\">\r\n          <div className=\"story-title\">Tin</div>\r\n          <div>Mohi hôm nay hiện chưa có tin</div>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return(\r\n    <React.Fragment>\r\n      <div className=\"story-wrap\">\r\n        <div className=\"story-title\">Tin</div>\r\n            <Slider {...settings}>\r\n            {listStory.map((story, index) => {\r\n              let story_image = story.list_story;\r\n              return(\r\n                <div className=\"story-item\" key={index} onClick={ () => dispatch(toggleStatusPresentialModal('view_story', {list: listStory, activeIndex: index}))}>\r\n                  <div className=\"story-item-image\">\r\n                    {story_image[0].story_ImageUrl && story_image[0].story_Type === 'image' &&\r\n                      <img src={story_image[0].story_ImageUrl} alt={story.user_first_name + ' ' + story.user_last_name}/>\r\n                    }\r\n                    {story_image[0].story_ImageUrl && story_image[0].story_Type === 'video' &&\r\n                      <video src={story_image[0].story_ImageUrl}></video>\r\n                    }\r\n                    {!story_image[0].story_ImageUrl && <div className=\"story-content-no-image\"> <p>{story_image[0].story_Content}</p></div>}\r\n                    {loadingNewStory && story.id ===  JSON.parse(localStorage.getItem('ustk')).info.id && <div className=\"story-content-loading-image\"> <Spin /></div>}\r\n                  </div>\r\n                  <div className=\"story-item-name\">\r\n                    <p>{story.id === JSON.parse(localStorage.getItem('ustk')).info.id ? 'Tin của bạn': story.user_first_name + ' ' + story.user_last_name}</p>\r\n                  </div>\r\n                  <div className=\"story-item-avatar\">\r\n                    {story.user_avatar_cropX === null ?\r\n                      <img src={story.user_avatar} alt={story.user_first_name + ' ' + story.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={story.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={story.user_avatar_cropH}  width={story.user_avatar_cropW} x={story.user_avatar_cropX} y={story.user_avatar_cropY} crop=\"crop\" />\r\n                      </Image>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </Slider>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Story;\r\n"]},"metadata":{},"sourceType":"module"}