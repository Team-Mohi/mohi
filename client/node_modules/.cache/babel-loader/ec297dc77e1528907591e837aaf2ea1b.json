{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Containers\\\\LoginContainer.jsx\";\nimport React, { useState } from 'react';\nimport Login from './../app/Authen/Login.jsx';\nimport axios from 'axios';\nimport { API_LOGIN } from './../Constants/Api.jsx';\nimport { useHistory } from 'react-router-dom';\nimport { Route } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { toggleStatusSpin } from './../Actions/index.jsx';\n\nvar CryptoJS = require(\"crypto-js\");\n\nexport default function LoginContainer(props) {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [errorLogin, setErrorLogin] = useState();\n\n  const sendVeriCode = async data => {\n    await axios.post('api/resend-otp', data).then(response => {\n      return response;\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const setLoginFunc = async data => {\n    dispatch(toggleStatusSpin());\n    await axios.post('api/auth/login', data).then(res => {\n      props.setLoginFunc(res);\n    }).catch(err => {\n      if (err) {\n        console.log();\n\n        if (err.response.status === 301) {\n          sendVeriCode({\n            action: 'register'\n          }).then(response => {\n            console.log(response);\n          });\n          let code = CryptoJS.AES.encrypt(JSON.stringify(897263), 'code_veri').toString();\n          let message = \"Chúng tôi đã gửi mã \";\n          history.push('/register/step-2', {\n            message: message,\n            code: code\n          });\n        }\n\n        if (err.response.status === 401) {\n          setErrorLogin(err.response ? err.response.data : '');\n          history.push('/login');\n        }\n      }\n    });\n    dispatch(toggleStatusSpin());\n  };\n\n  return /*#__PURE__*/React.createElement(Login, {\n    setLoginFunc: setLoginFunc,\n    errorLogin: errorLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  });\n}","map":{"version":3,"sources":["D:/Web/mohi/client/src/Containers/LoginContainer.jsx"],"names":["React","useState","Login","axios","API_LOGIN","useHistory","Route","useDispatch","toggleStatusSpin","CryptoJS","require","LoginContainer","props","dispatch","history","errorLogin","setErrorLogin","sendVeriCode","data","post","then","response","catch","error","console","log","setLoginFunc","res","err","status","action","code","AES","encrypt","JSON","stringify","toString","message","push"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,wBAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,KAAR,QAAoB,kBAApB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,gBAAT,QAAiC,wBAAjC;;AACA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA8B;AAC3C,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AAEA,QAAMO,OAAO,GAAGT,UAAU,EAA1B;AACA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,EAA5C;;AAEA,QAAMgB,YAAY,GAAG,MAAOC,IAAP,IAAgB;AACnC,UAAMf,KAAK,CAACgB,IAAN,CAAW,gBAAX,EAA6BD,IAA7B,EAAmCE,IAAnC,CAAyCC,QAAD,IAAc;AAC1D,aAAOA,QAAP;AACD,KAFK,EAEHC,KAFG,CAEIC,KAAD,IAAW;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAJK,CAAN;AAKD,GAND;;AAQA,QAAMG,YAAY,GAAG,MAAOR,IAAP,IAAgB;AACnCL,IAAAA,QAAQ,CAACL,gBAAgB,EAAjB,CAAR;AAEA,UAAML,KAAK,CAACgB,IAAN,CAAW,gBAAX,EAA6BD,IAA7B,EAAmCE,IAAnC,CAAyCO,GAAD,IAAS;AACrDf,MAAAA,KAAK,CAACc,YAAN,CAAmBC,GAAnB;AACD,KAFK,EAEHL,KAFG,CAEIM,GAAD,IAAS;AAChB,UAAGA,GAAH,EAAO;AACLJ,QAAAA,OAAO,CAACC,GAAR;;AACA,YAAGG,GAAG,CAACP,QAAJ,CAAaQ,MAAb,KAAwB,GAA3B,EAA+B;AAC7BZ,UAAAA,YAAY,CAAC;AAACa,YAAAA,MAAM,EAAE;AAAT,WAAD,CAAZ,CAAmCV,IAAnC,CAAyCC,QAAD,IAAc;AACtDG,YAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACC,WAFD;AAIA,cAAIU,IAAI,GAAGtB,QAAQ,CAACuB,GAAT,CAAaC,OAAb,CAAqBC,IAAI,CAACC,SAAL,CAAe,MAAf,CAArB,EAA6C,WAA7C,EAA0DC,QAA1D,EAAX;AACA,cAAIC,OAAO,GAAG,sBAAd;AACAvB,UAAAA,OAAO,CAACwB,IAAR,CAAa,kBAAb,EAAiC;AAC/BD,YAAAA,OAAO,EAAEA,OADsB;AAE/BN,YAAAA,IAAI,EAAEA;AAFyB,WAAjC;AAID;;AAED,YAAGH,GAAG,CAACP,QAAJ,CAAaQ,MAAb,KAAwB,GAA3B,EAA+B;AAC7Bb,UAAAA,aAAa,CAACY,GAAG,CAACP,QAAJ,GAAeO,GAAG,CAACP,QAAJ,CAAaH,IAA5B,GAAmC,EAApC,CAAb;AACAJ,UAAAA,OAAO,CAACwB,IAAR,CAAa,QAAb;AACD;AAEF;AACF,KAxBK,CAAN;AAyBAzB,IAAAA,QAAQ,CAACL,gBAAgB,EAAjB,CAAR;AACD,GA7BD;;AAgCA,sBACI,oBAAC,KAAD;AAAO,IAAA,YAAY,EAAEkB,YAArB;AAAmC,IAAA,UAAU,EAAEX,UAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGD","sourcesContent":["import React, {useState} from 'react';\r\nimport Login from './../app/Authen/Login.jsx';\r\nimport axios from 'axios';\r\nimport {API_LOGIN} from './../Constants/Api.jsx';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {Route} from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleStatusSpin } from './../Actions/index.jsx';\r\nvar CryptoJS = require(\"crypto-js\");\r\n\r\nexport default function LoginContainer(props){\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n  const [errorLogin, setErrorLogin] = useState();\r\n\r\n  const sendVeriCode = async (data) => {\r\n    await axios.post('api/resend-otp', data).then((response) => {\r\n      return response\r\n    }).catch((error) => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  const setLoginFunc = async (data) => {\r\n    dispatch(toggleStatusSpin())\r\n\r\n    await axios.post('api/auth/login', data).then((res) => {\r\n      props.setLoginFunc(res)\r\n    }).catch((err) => {\r\n      if(err){\r\n        console.log();\r\n        if(err.response.status === 301){\r\n          sendVeriCode({action: 'register'}).then((response) => {\r\n          console.log(response);\r\n          })\r\n\r\n          let code = CryptoJS.AES.encrypt(JSON.stringify(897263), 'code_veri').toString();\r\n          let message = \"Chúng tôi đã gửi mã \";\r\n          history.push('/register/step-2', {\r\n            message: message,\r\n            code: code\r\n          });\r\n        }\r\n\r\n        if(err.response.status === 401){\r\n          setErrorLogin(err.response ? err.response.data : '')\r\n          history.push('/login')\r\n        }\r\n\r\n      }\r\n    });\r\n    dispatch(toggleStatusSpin())\r\n  }\r\n\r\n\r\n  return(\r\n      <Login setLoginFunc={setLoginFunc} errorLogin={errorLogin} />\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}