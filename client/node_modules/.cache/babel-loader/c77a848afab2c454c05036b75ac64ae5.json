{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{Link,useParams}from'react-router-dom';import{AiFillCamera}from\"react-icons/ai\";import{FaUserPlus,FaUserCheck,FaCheck,FaUserClock,FaFacebookMessenger}from\"react-icons/fa\";import{BsThreeDots,BsPencil}from\"react-icons/bs\";import{PUBLIC_URL}from\"./../../../Constants/public.jsx\";import{useSelector,useDispatch}from'react-redux';import{Tooltip,Spin}from'antd';import axios from'axios';import{toggleStatusPresentialModal}from'./../../../Actions/index.jsx';import{Image,Transformation}from'cloudinary-react';import{WaveLoading}from'react-loadingg';import{responseUpdateCover}from'./../../../Actions/index.jsx';import{requestUpdateCover}from'./../../../Actions/index.jsx';import{responseAddPostsProfile}from'./../../../Actions/index.jsx';function HeaderProfile(_ref){var profile=_ref.profile,friends=_ref.friends,friendsRequest=_ref.friendsRequest;var refHeader=useRef();var refCoverImg=useRef();var refCover=useRef();var _useSelector=useSelector(function(state){return state.friends;}),friendOfProfile=_useSelector.friendOfProfile,list=_useSelector.list,loadingfriendOfProfile=_useSelector.loadingfriendOfProfile;var listUserRequest=useSelector(function(state){return state.friendsRequest.list;});var listMyRequest=useSelector(function(state){return state.friendsRequest.listMyRequest;});var _useState=useState(),_useState2=_slicedToArray(_useState,2),toggleSpan=_useState2[0],setToggleSpan=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),toggleTopLeft=_useState4[0],setToggleTopLeft=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),styleHeader=_useState6[0],setStyleHeader=_useState6[1];var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var _useSelector2=useSelector(function(state){return state.profile;}),loading=_useSelector2.loading,info=_useSelector2.info,loadingUpdateCover=_useSelector2.loadingUpdateCover;var _useParams=useParams(),idProfile=_useParams.idProfile;var mutialFriend=[];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),statusFollow=_useState8[0],setStatusFollow=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loadingRequest=_useState10[0],setLoadingRequest=_useState10[1];var dispatch=useDispatch();var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isChangeCover=_useState12[0],setIsChangeCover=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),newCover=_useState14[0],setNewCover=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isDown=_useState16[0],setIsDown=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),scrollLeft=_useState18[0],setScrollLeft=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),scrollTop=_useState20[0],setScrollTop=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),clientX=_useState22[0],setClientX=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),clientY=_useState24[0],setClientY=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),widthNewCover=_useState26[0],setWidthNewCover=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),userCoverY=_useState28[0],setUserCoverY=_useState28[1];var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),userCoverX=_useState30[0],setUserCoverX=_useState30[1];var handleImageLoad=function handleImageLoad(e){if(e.target.naturalHeight<400){alert('Vui lòng chọn ảnh có chiều cao lớn hơn 400px để ảnh bìa được đẹp nhất');setIsChangeCover(false);return;}setWidthNewCover(e.target.naturalWidth);};friendOfProfile.map(function(fr){list.map(function(f){if(fr.id===f.id)mutialFriend.push(fr);});});var uploadCover=function uploadCover(e){setNewCover(e.target.files[0]);setIsChangeCover(true);};var saveCoverProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(requestUpdateCover());formData=new FormData();formData.append('upload_preset','mohi_video');formData.append('file',newCover);_context.next=6;return axios.post('https://api.cloudinary.com/v1_1/mohi-vn/upload',formData).then(function(res){saveCoverProfileBe(res.data.public_id);});case 6:case\"end\":return _context.stop();}}},_callee);}));return function saveCoverProfile(){return _ref2.apply(this,arguments);};}();var saveCoverProfileBe=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(cover){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data={user_cover:cover,user_cover_cropX:userCoverX,user_cover_cropY:userCoverY};_context2.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/update-info-profile\",data).then(function(res){dispatch(responseUpdateCover({user_cover:cover,user_cover_cropX:Math.round(userCoverX),user_cover_cropY:Math.round(userCoverY)}));dispatch(responseAddPostsProfile(res.data.new_cover));var ustk=JSON.parse(localStorage.getItem('ustk'));ustk.info.user_cover=cover;ustk.info.user_cover_cropX=Math.round(userCoverX);ustk.info.user_cover_cropY=Math.round(userCoverY);localStorage.setItem('ustk',JSON.stringify(ustk));setIsChangeCover(false);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function saveCoverProfileBe(_x){return _ref3.apply(this,arguments);};}();var onMouseDownCover=function onMouseDownCover(e){var _refCover$current=refCover.current,scrollLeft=_refCover$current.scrollLeft,scrollTop=_refCover$current.scrollTop;setIsDown(true);setScrollLeft(scrollLeft);setScrollTop(scrollTop);setClientX(e.clientX);setClientY(e.clientY);};var onMouseUpCover=function onMouseUpCover(e){setIsDown(false);setScrollLeft(0);setScrollTop(0);setClientX(0);setClientY(0);};var onMouseMoveCover=function onMouseMoveCover(e){if(!isDown)return;var scrollCover=refCover.current;scrollCover.scrollLeft=scrollLeft+clientX-e.clientX;scrollCover.scrollTop=scrollTop+clientY-e.clientY;setUserCoverX(scrollCover.scrollLeft);setUserCoverY(scrollCover.scrollTop);};var uploadAvatar=function uploadAvatar(e){var file=e.target.files[0];dispatch(toggleStatusPresentialModal('modal_upload_avatar_profile',file));};useEffect(function(){document.addEventListener('scroll',fixedOptionHead,false);return function(){document.removeEventListener('scroll',removeFixedOptionHead,false);};});var fixedOptionHead=function fixedOptionHead(){var curentRef=refHeader.current;if(curentRef){if(window.scrollY-464>0){setStyleHeader(true);}else{setStyleHeader(false);}}};var removeFixedOptionHead=function removeFixedOptionHead(){setStyleHeader(false);};function handleShow(){setToggleSpan({visibility:'visible'});setToggleTopLeft({background:'rgba(0,0,0,0.3)',border:'2px solid white ',borderRadius:'3px'});}function handleHide(){setToggleSpan({visibility:'hidden'});setToggleTopLeft({background:'none',border:'2px solid transparent '});}var addFriendFunc=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idUser){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoadingRequest(true);_context3.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\",{follow_users_ReceivedUser:idUser}).then(function(res){setLoadingRequest(false);setStatusFollow('send_request');});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function addFriendFunc(_x2){return _ref4.apply(this,arguments);};}();var unFriendFunc=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idUser){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoadingRequest(true);_context4.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'unfriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('remove_friend');});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function unFriendFunc(_x3){return _ref5.apply(this,arguments);};}();var unMyRequestFriendFunc=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(idUser){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setLoadingRequest(true);_context5.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'unRequestFriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('remove_request');});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function unMyRequestFriendFunc(_x4){return _ref6.apply(this,arguments);};}();var acceptFriendFunc=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(idUser){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setLoadingRequest(true);_context6.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\",{follow_users_UserId:idUser}).then(function(res){setLoadingRequest(false);setStatusFollow('accept_request');});case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function acceptFriendFunc(_x5){return _ref7.apply(this,arguments);};}();var refuseFriendFunc=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(idUser){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:setLoadingRequest(true);_context7.next=3;return axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\",{id:idUser,action:'refuseFriend'}).then(function(res){setLoadingRequest(false);setStatusFollow('refuse_request');});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function refuseFriendFunc(_x6){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover\",onMouseOver:function onMouseOver(){return handleShow();},onMouseOut:function onMouseOut(){return handleHide();}},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover-img \".concat(isChangeCover?\"cursor-move-cover\":null)},isChangeCover?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{ref:refCover,className:\"profile-header-cover-img-move\",style:{overflow:\"auto\",position:\"absolute\",top:0,left:0,bottom:0,right:0},onMouseMove:onMouseMoveCover,onMouseDown:onMouseDownCover,onMouseUp:onMouseUpCover,onMouseLeave:onMouseUpCover},/*#__PURE__*/React.createElement(\"img\",{style:{width:'100%',height:'auto'},src:URL.createObjectURL(newCover),alt:info.user_first_name+' '+info.user_last_name,ref:refCoverImg,onLoad:handleImageLoad}),loadingUpdateCover&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:userCoverY,background:'rgba(255,255,255,0.7)',position:'absolute',width:'100%',height:'100%',top:0,left:0}},/*#__PURE__*/React.createElement(WaveLoading,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,info.user_cover_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:info.user_cover,alt:info.user_first_name+' '+info.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:info.user_cover+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:400,width:1136,x:info.user_cover_cropX,y:info.user_cover_cropY,crop:\"crop\"}))))),idProfile===currentUser.user_username&&!isChangeCover&&/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover-top-left\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"update-cover\",style:toggleTopLeft},/*#__PURE__*/React.createElement(AiFillCamera,null),/*#__PURE__*/React.createElement(\"span\",{style:toggleSpan},\"C\\u1EADp nh\\u1EADp \\u1EA3nh b\\xECa\")),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"update-cover\",accept:\"image/*\",onChange:uploadCover})),!isChangeCover?/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover-bottom-right\"},idProfile===currentUser.user_username?/*#__PURE__*/React.createElement(\"div\",{className:\"button-view-history-action-profile\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+info.user_username+'/activity-log'},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},/*#__PURE__*/React.createElement(BsThreeDots,null),\" Nh\\u1EADt k\\xED ho\\u1EA1t \\u0111\\u1ED9ng\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"button-view-history-action-profile user-profile-button\"},list.filter(function(f){return f.id===info.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unFriendFunc(info.id);}},\"H\\u1EE7y k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserCheck,null),\" B\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,listUserRequest.filter(function(f){return f.id===info.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'}},/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return acceptFriendFunc(info.id);}},\"X\\xE1c nh\\u1EADn\"),/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return refuseFriendFunc(info.id);}},\"T\\u1EEB ch\\u1ED1i\"))},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserClock,null),\" Tr\\u1EA3 l\\u1EDDi k\\u1EBFt b\\u1EA1n \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,listMyRequest.filter(function(f){return f.id===info.id;}).length?/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unMyRequestFriendFunc(info.id);}},\"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaCheck,null),\" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)))):/*#__PURE__*/React.createElement(React.Fragment,null,!statusFollow&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(info.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))))),statusFollow&&statusFollow==='remove_friend'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(info.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)),statusFollow&&statusFollow==='accept_request'&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unFriendFunc(info.id);}},\"H\\u1EE7y k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaUserCheck,null),\" B\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))),statusFollow&&statusFollow==='refuse_request'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(info.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)),statusFollow&&statusFollow==='send_request'&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(0,0,0,0.8)',color:'white',padding:'5px 10px',cursor:'pointer'},onClick:function onClick(){return unMyRequestFriendFunc(info.id);}},\"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\")},/*#__PURE__*/React.createElement(\"button\",null,/*#__PURE__*/React.createElement(FaCheck,null),\" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null))),statusFollow&&statusFollow==='remove_request'&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return addFriendFunc(info.id);}},/*#__PURE__*/React.createElement(FaUserPlus,null),\" Th\\xEAm b\\u1EA1n b\\xE8 \",loadingRequest&&/*#__PURE__*/React.createElement(Spin,null)),/*#__PURE__*/React.createElement(\"button\",{style:{background:'white',color:'rgba(0,128,128)'}},/*#__PURE__*/React.createElement(Link,{to:\"/messenger/\"+info.id,style:{background:'white',color:'rgba(0,128,128)'}},/*#__PURE__*/React.createElement(FaFacebookMessenger,null),\" Nh\\u1EAFn tin \")))):/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-cover-bottom-right\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return saveCoverProfile();}},\"L\\u01B0u\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setIsChangeCover(false);}},\"H\\u1EE7y\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-timeline\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar_\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar-img\"},info.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:info.user_avatar,alt:info.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:info.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:info.user_avatar_cropH,width:info.user_avatar_cropW,x:info.user_avatar_cropX,y:info.user_avatar_cropY,crop:\"crop\"})))),idProfile===currentUser.user_username&&/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar-select\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar-select-active\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-avatar-update\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"update-avatar\"},/*#__PURE__*/React.createElement(AiFillCamera,null),/*#__PURE__*/React.createElement(\"div\",null,\"C\\u1EADp nh\\u1EADt\")),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"update-avatar\",accept:\"image/*\",onChange:uploadAvatar}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-name\"},!loading&&info&&/*#__PURE__*/React.createElement(Link,{to:'/profile/'+info.user_username},info.user_first_name+' '+info.user_last_name),!loading&&info.user_nick_name&&/*#__PURE__*/React.createElement(\"p\",null,\"(\",info.user_nick_name,\")\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-header-timeline-container\",ref:refHeader,style:styleHeader?{position:'fixed',top:'64px',zIndex:1000,background:'white',width:'1140px'}:null},/*#__PURE__*/React.createElement(\"ul\",{className:\"profile-header-navigation\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+idProfile+'/timeline'},\"D\\xF2ng th\\u1EDDi gian\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+idProfile+'/about'},\"Gi\\u1EDBi thi\\u1EC7u\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+idProfile+'/gallery'},\"\\u1EA2nh\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+idProfile+'/friends'},\"B\\u1EA1n b\\xE8 \",info.id===currentUser.id?/*#__PURE__*/React.createElement(\"small\",{style:{color:'rgba(0,0,0,0.5)'}},list.length&&!loadingfriendOfProfile?list.length:null):/*#__PURE__*/React.createElement(\"small\",{style:{color:'rgba(0,0,0,0.5)'}},mutialFriend.length&&!loadingfriendOfProfile?mutialFriend.length+\" b\\u1EA1n chung\":null)))))))));}export default HeaderProfile;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/HeaderProfile.jsx"],"names":["React","useState","useEffect","useRef","Link","useParams","AiFillCamera","FaUserPlus","FaUserCheck","FaCheck","FaUserClock","FaFacebookMessenger","BsThreeDots","BsPencil","PUBLIC_URL","useSelector","useDispatch","Tooltip","Spin","axios","toggleStatusPresentialModal","Image","Transformation","WaveLoading","responseUpdateCover","requestUpdateCover","responseAddPostsProfile","HeaderProfile","profile","friends","friendsRequest","refHeader","refCoverImg","refCover","state","friendOfProfile","list","loadingfriendOfProfile","listUserRequest","listMyRequest","toggleSpan","setToggleSpan","toggleTopLeft","setToggleTopLeft","styleHeader","setStyleHeader","currentUser","JSON","parse","localStorage","getItem","info","loading","loadingUpdateCover","idProfile","mutialFriend","statusFollow","setStatusFollow","loadingRequest","setLoadingRequest","dispatch","isChangeCover","setIsChangeCover","newCover","setNewCover","isDown","setIsDown","scrollLeft","setScrollLeft","scrollTop","setScrollTop","clientX","setClientX","clientY","setClientY","widthNewCover","setWidthNewCover","userCoverY","setUserCoverY","userCoverX","setUserCoverX","handleImageLoad","e","target","naturalHeight","alert","naturalWidth","map","fr","f","id","push","uploadCover","files","saveCoverProfile","formData","FormData","append","post","then","res","saveCoverProfileBe","data","public_id","cover","user_cover","user_cover_cropX","user_cover_cropY","Math","round","new_cover","ustk","setItem","stringify","onMouseDownCover","current","onMouseUpCover","onMouseMoveCover","scrollCover","uploadAvatar","file","document","addEventListener","fixedOptionHead","removeEventListener","removeFixedOptionHead","curentRef","window","scrollY","handleShow","visibility","background","border","borderRadius","handleHide","addFriendFunc","idUser","follow_users_ReceivedUser","unFriendFunc","action","unMyRequestFriendFunc","acceptFriendFunc","follow_users_UserId","refuseFriendFunc","overflow","position","top","left","bottom","right","width","height","URL","createObjectURL","user_first_name","user_last_name","marginTop","user_username","filter","length","color","padding","cursor","user_avatar_cropX","user_avatar","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_nick_name","zIndex"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from  'react';\r\nimport {Link, useParams} from 'react-router-dom';\r\nimport { AiFillCamera } from \"react-icons/ai\";\r\nimport { FaUserPlus, FaUserCheck, FaCheck, FaUserClock, FaFacebookMessenger } from \"react-icons/fa\";\r\nimport { BsThreeDots, BsPencil } from \"react-icons/bs\";\r\nimport {PUBLIC_URL} from \"./../../../Constants/public.jsx\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {Tooltip, Spin} from 'antd';\r\nimport axios from 'axios';\r\nimport {toggleStatusPresentialModal} from './../../../Actions/index.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { WaveLoading } from 'react-loadingg';\r\nimport {responseUpdateCover} from './../../../Actions/index.jsx';\r\nimport {requestUpdateCover} from './../../../Actions/index.jsx';\r\nimport {responseAddPostsProfile} from './../../../Actions/index.jsx';\r\n\r\nfunction HeaderProfile({ profile, friends, friendsRequest }){\r\n  const refHeader = useRef();\r\n  const refCoverImg = useRef();\r\n  const refCover = useRef();\r\n  const {friendOfProfile, list, loadingfriendOfProfile} = useSelector(state => state.friends)\r\n  const listUserRequest = useSelector(state => state.friendsRequest.list);\r\n  const listMyRequest = useSelector(state => state.friendsRequest.listMyRequest);\r\n  const [toggleSpan, setToggleSpan] = useState();\r\n  const [toggleTopLeft, setToggleTopLeft] = useState();\r\n  const [styleHeader, setStyleHeader] = useState(false);\r\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n  const { loading, info, loadingUpdateCover } = useSelector(state => state.profile);\r\n  const {idProfile} = useParams();\r\n  const mutialFriend = [];\r\n  const [statusFollow, setStatusFollow] = useState();\r\n  const [loadingRequest, setLoadingRequest] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const [isChangeCover, setIsChangeCover] = useState(false);\r\n  const [newCover, setNewCover] = useState();\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n  const [clientX, setClientX] = useState(0);\r\n  const [clientY, setClientY] = useState(0);\r\n  const [widthNewCover, setWidthNewCover] = useState(0);\r\n  const [userCoverY, setUserCoverY] = useState(0);\r\n  const [userCoverX, setUserCoverX] = useState(0);\r\n\r\n  const handleImageLoad = (e) => {\r\n    if(e.target.naturalHeight < 400){\r\n      alert('Vui lòng chọn ảnh có chiều cao lớn hơn 400px để ảnh bìa được đẹp nhất')\r\n      setIsChangeCover(false)\r\n      return\r\n    }\r\n    setWidthNewCover(e.target.naturalWidth)\r\n  }\r\n\r\n  friendOfProfile.map(fr => {\r\n    list.map(f => {\r\n      if(fr.id === f.id) mutialFriend.push(fr)\r\n    })\r\n  });\r\n\r\n  const uploadCover = (e) => {\r\n    setNewCover(e.target.files[0])\r\n    setIsChangeCover(true)\r\n  }\r\n\r\n  const saveCoverProfile = async () => {\r\n    dispatch(requestUpdateCover())\r\n\r\n    const formData = new FormData();\r\n    formData.append('upload_preset', 'mohi_video');\r\n    formData.append('file', newCover);\r\n\r\n    await axios.post('https://api.cloudinary.com/v1_1/mohi-vn/upload', formData)\r\n    .then((res) => {\r\n      saveCoverProfileBe(res.data.public_id)\r\n    })\r\n\r\n  }\r\n\r\n  const saveCoverProfileBe = async (cover) => {\r\n\r\n      let data = {\r\n        user_cover: cover,\r\n        user_cover_cropX: userCoverX,\r\n        user_cover_cropY: userCoverY\r\n      }\r\n\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/update-info-profile\", data)\r\n      .then((res) => {\r\n        dispatch(responseUpdateCover({\r\n          user_cover: cover,\r\n          user_cover_cropX: Math.round(userCoverX),\r\n          user_cover_cropY: Math.round(userCoverY),\r\n        }))\r\n        dispatch(responseAddPostsProfile(res.data.new_cover))\r\n        let ustk = JSON.parse(localStorage.getItem('ustk'));\r\n        ustk.info.user_cover = cover;\r\n        ustk.info.user_cover_cropX = Math.round(userCoverX);\r\n        ustk.info.user_cover_cropY = Math.round(userCoverY);\r\n        localStorage.setItem('ustk', JSON.stringify(ustk))\r\n        setIsChangeCover(false)\r\n      })\r\n  }\r\n\r\n  const onMouseDownCover = (e) => {\r\n    const {scrollLeft, scrollTop} = refCover.current;\r\n\r\n    setIsDown(true)\r\n    setScrollLeft(scrollLeft)\r\n    setScrollTop(scrollTop)\r\n    setClientX(e.clientX)\r\n    setClientY(e.clientY)\r\n  }\r\n\r\n  const onMouseUpCover = (e) => {\r\n    setIsDown(false)\r\n    setScrollLeft(0)\r\n    setScrollTop(0)\r\n    setClientX(0)\r\n    setClientY(0)\r\n  }\r\n\r\n  const onMouseMoveCover = (e) => {\r\n    if(!isDown) return\r\n    const scrollCover = refCover.current;\r\n\r\n    scrollCover.scrollLeft = scrollLeft + clientX - e.clientX;\r\n    scrollCover.scrollTop = scrollTop + clientY - e.clientY;\r\n    setUserCoverX(scrollCover.scrollLeft)\r\n    setUserCoverY(scrollCover.scrollTop)\r\n  }\r\n\r\n  const uploadAvatar= (e) => {\r\n    const file = e.target.files[0];\r\n    dispatch(toggleStatusPresentialModal('modal_upload_avatar_profile', file))\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('scroll', fixedOptionHead, false);\r\n\r\n    return () => {\r\n      document.removeEventListener('scroll', removeFixedOptionHead, false)\r\n    }\r\n  })\r\n\r\n  const fixedOptionHead = () => {\r\n    let curentRef = refHeader.current\r\n    if(curentRef){\r\n      if(window.scrollY - 464 > 0){\r\n        setStyleHeader(true)\r\n      }else {\r\n        setStyleHeader(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const removeFixedOptionHead = () => {\r\n     setStyleHeader(false)\r\n  }\r\n\r\n  function handleShow(){\r\n    setToggleSpan({\r\n      visibility: 'visible'\r\n    })\r\n    setToggleTopLeft({\r\n      background: 'rgba(0,0,0,0.3)',\r\n      border: '2px solid white ',\r\n      borderRadius:'3px'\r\n    })\r\n  }\r\n\r\n  function handleHide(){\r\n    setToggleSpan({\r\n      visibility: 'hidden'\r\n    })\r\n    setToggleTopLeft({\r\n        background: 'none',\r\n        border: '2px solid transparent ',\r\n    })\r\n  }\r\n\r\n  const addFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\", {follow_users_ReceivedUser: idUser})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('send_request')\r\n    })\r\n  }\r\n\r\n  const unFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unfriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('remove_friend')\r\n    })\r\n  }\r\n\r\n  const unMyRequestFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unRequestFriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('remove_request')\r\n    })\r\n  }\r\n\r\n  const acceptFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\", {follow_users_UserId: idUser})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('accept_request')\r\n    })\r\n  }\r\n\r\n  const refuseFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'refuseFriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('refuse_request')\r\n    })\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <div className=\"profile-header\">\r\n        <div className=\"profile-header-container\">\r\n          <div\r\n            className=\"profile-header-cover\"\r\n            onMouseOver={() => handleShow()}\r\n            onMouseOut={() => handleHide()}\r\n          >\r\n            <div className=\"profile-header-cover-container\" >\r\n              <div className={`profile-header-cover-img ${isChangeCover ? `cursor-move-cover` : null}`} >\r\n                {isChangeCover ?\r\n                  <React.Fragment>\r\n                    <div\r\n                      ref={refCover}\r\n                      className=\"profile-header-cover-img-move\"\r\n                      style={{\r\n                        overflow:\"auto\",\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        bottom: 0,\r\n                        right: 0,\r\n                      }}\r\n                      onMouseMove={onMouseMoveCover}\r\n                      onMouseDown={onMouseDownCover}\r\n                      onMouseUp={onMouseUpCover}\r\n                      onMouseLeave={onMouseUpCover}\r\n                      >\r\n                      <img\r\n                        style={{width: '100%', height: 'auto'}}\r\n                        src={URL.createObjectURL(newCover)}\r\n                        alt={info.user_first_name + ' ' + info.user_last_name}\r\n                        ref={refCoverImg}\r\n                        onLoad={handleImageLoad}\r\n                      />\r\n                    {loadingUpdateCover && <div style={{marginTop: userCoverY, background: 'rgba(255,255,255,0.7)', position: 'absolute', width: '100%', height: '100%', top: 0, left: 0}}><WaveLoading /></div>}\r\n                    </div>\r\n                  </React.Fragment>\r\n                  :\r\n                  <React.Fragment>\r\n                    {info.user_cover_cropX === null ?\r\n                      <img src={info.user_cover} alt={info.user_first_name + ' ' + info.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={info.user_cover+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={400} width={1136} x={info.user_cover_cropX} y={info.user_cover_cropY} crop=\"crop\" />\r\n                      </Image>\r\n                    }\r\n                  </React.Fragment>\r\n                }\r\n              </div>\r\n            </div>\r\n            {idProfile === currentUser.user_username && !isChangeCover &&\r\n              <div className=\"profile-header-cover-top-left\">\r\n              <label htmlFor=\"update-cover\" style={toggleTopLeft}>\r\n              <AiFillCamera\r\n              />\r\n              <span style={toggleSpan}>Cập nhập ảnh bìa</span>\r\n              </label>\r\n              <input type=\"file\" id=\"update-cover\" accept=\"image/*\" onChange={uploadCover}/>\r\n            </div>}\r\n            {!isChangeCover ?\r\n              <div className=\"profile-header-cover-bottom-right\">\r\n                {idProfile === currentUser.user_username ?\r\n                  <div className=\"button-view-history-action-profile\">\r\n                    <Link to={'/profile/' + info.user_username + '/activity-log'}><button type=\"submit\"><BsThreeDots /> Nhật kí hoạt động</button></Link>\r\n                  </div>\r\n                :\r\n                  <div className=\"button-view-history-action-profile user-profile-button\">\r\n                    {list.filter(f=> f.id === info.id).length ?\r\n                      <React.Fragment>\r\n                        {!statusFollow &&\r\n                          <Tooltip\r\n                            placement={`bottom`}\r\n                            trigger={`click`}\r\n                            title={\r\n                              <div\r\n                                style={{\r\n                                  background: 'rgba(0,0,0,0.8)',\r\n                                  color: 'white',\r\n                                  padding: '5px 10px',\r\n                                  cursor: 'pointer'\r\n                                }}\r\n                                onClick={() => unFriendFunc(info.id) }\r\n                              >\r\n                                Hủy kết bạn\r\n                              </div>\r\n                            }\r\n                          >\r\n                            <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n                          </Tooltip>\r\n                        }\r\n                      </React.Fragment>\r\n                    :\r\n                    <React.Fragment>\r\n                      {listUserRequest.filter(f=> f.id === info.id).length ?\r\n                        <React.Fragment>\r\n                          {!statusFollow &&\r\n                            <Tooltip\r\n                              placement={`bottom`}\r\n                              trigger={`click`}\r\n                              title={\r\n                                <div\r\n                                  style={{\r\n                                    background: 'rgba(0,0,0,0.8)',\r\n                                    color: 'white',\r\n                                    padding: '5px 10px',\r\n                                    cursor: 'pointer'\r\n                                  }}\r\n                                >\r\n                                <p onClick={() => acceptFriendFunc(info.id) }>Xác nhận</p>\r\n                                <p onClick={() => refuseFriendFunc(info.id) }>Từ chối</p>\r\n                                </div>\r\n                              }\r\n                            >\r\n                              <button><FaUserClock /> Trả lời kết bạn {loadingRequest && <Spin />}</button>\r\n                            </Tooltip>\r\n                          }\r\n                        </React.Fragment>\r\n                        :\r\n                        <React.Fragment>\r\n                          {listMyRequest.filter(f=> f.id === info.id).length ?\r\n                            <React.Fragment>\r\n                              {!statusFollow &&\r\n                              <Tooltip\r\n                                placement={`bottom`}\r\n                                trigger={`click`}\r\n                                title={\r\n                                  <div\r\n                                    style={{\r\n                                      background: 'rgba(0,0,0,0.8)',\r\n                                      color: 'white',\r\n                                      padding: '5px 10px',\r\n                                      cursor: 'pointer'\r\n                                    }}\r\n                                    onClick={() => unMyRequestFriendFunc(info.id) }\r\n                                  >\r\n                                    Hủy lời mời kết bạn\r\n                                  </div>\r\n                                }\r\n                              >\r\n                              <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n                              </Tooltip>\r\n                              }\r\n                            </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                              {!statusFollow &&\r\n                                <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                              }\r\n                            </React.Fragment>\r\n                          }\r\n                        </React.Fragment>\r\n                      }\r\n                    </React.Fragment>\r\n                    }\r\n                    {statusFollow && statusFollow === 'remove_friend' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                    {statusFollow && statusFollow === 'accept_request' &&\r\n                      <Tooltip\r\n                        placement={`bottom`}\r\n                        trigger={`click`}\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              background: 'rgba(0,0,0,0.8)',\r\n                              color: 'white',\r\n                              padding: '5px 10px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => unFriendFunc(info.id) }\r\n                          >\r\n                            Hủy kết bạn\r\n                          </div>\r\n                        }\r\n                      >\r\n                        <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n                      </Tooltip>\r\n                    }\r\n                    {statusFollow && statusFollow === 'refuse_request' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                    {statusFollow && statusFollow === 'send_request' &&\r\n                      <Tooltip\r\n                        placement={`bottom`}\r\n                        trigger={`click`}\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              background: 'rgba(0,0,0,0.8)',\r\n                              color: 'white',\r\n                              padding: '5px 10px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => unMyRequestFriendFunc(info.id) }\r\n                          >\r\n                            Hủy lời mời kết bạn\r\n                          </div>\r\n                        }\r\n                      >\r\n                      <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n                      </Tooltip>\r\n                    }\r\n                    {statusFollow && statusFollow === 'remove_request' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                    <button style={{background: 'white', color: 'rgba(0,128,128)'}}><Link to={\"/messenger/\" + info.id} style={{background: 'white', color: 'rgba(0,128,128)'}}><FaFacebookMessenger /> Nhắn tin </Link></button>\r\n                  </div>\r\n                }\r\n              </div>\r\n              :\r\n              <div className=\"profile-header-cover-bottom-right\">\r\n                <button onClick={() => saveCoverProfile()}>Lưu</button>\r\n                <button onClick={() => setIsChangeCover(false)}>Hủy</button>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"profile-header-timeline\">\r\n            <div className=\"profile-header-avatar\">\r\n              <div className=\"profile-header-avatar_\">\r\n                <div className=\"profile-header-avatar-container\">\r\n                  <div className=\"profile-header-avatar-img\">\r\n                    {info.user_avatar_cropX === null ?\r\n                      <img src={info.user_avatar} alt={info.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={info.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={info.user_avatar_cropH}  width={info.user_avatar_cropW} x={info.user_avatar_cropX} y={info.user_avatar_cropY} crop=\"crop\" />\r\n                      </Image>\r\n                    }\r\n                  </div>\r\n                </div>\r\n                {idProfile === currentUser.user_username && <div className=\"profile-header-avatar-select\">\r\n                  <div className=\"profile-header-avatar-select-active\">\r\n                    <div className=\"profile-header-avatar-update\">\r\n                    <label htmlFor=\"update-avatar\">\r\n                    <AiFillCamera\r\n                    />\r\n                    <div>Cập nhật</div>\r\n                    </label>\r\n                    <input type=\"file\" id=\"update-avatar\" accept=\"image/*\" onChange={uploadAvatar}/>\r\n                    </div>\r\n                  </div>\r\n                </div>}\r\n              </div >\r\n              <div className=\"profile-header-name\">\r\n                {!loading && info && <Link to={'/profile/' + info.user_username}>{info.user_first_name + ' ' + info.user_last_name}</Link>}\r\n                {!loading && info.user_nick_name && <p>({info.user_nick_name})</p>}\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-header-timeline-container\" ref={refHeader} style={styleHeader ? {position: 'fixed', top: '64px', zIndex: 1000, background: 'white', width: '1140px'} : null}>\r\n              <ul className=\"profile-header-navigation\">\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/timeline'}>Dòng thời gian</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/about'}>Giới thiệu</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/gallery'}>Ảnh</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/friends'}>\r\n                    Bạn bè {info.id === currentUser.id ?\r\n                      <small style={{color: 'rgba(0,0,0,0.5)'}}>{list.length && !loadingfriendOfProfile ? list.length : null}</small>\r\n                      :\r\n                      <small style={{color: 'rgba(0,0,0,0.5)'}}>\r\n                        {mutialFriend.length && !loadingfriendOfProfile ? mutialFriend.length + ` bạn chung` : null}\r\n                      </small>\r\n                      }\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HeaderProfile;\r\n"]},"metadata":{},"sourceType":"module"}