{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\DoAn\\\\client\\\\src\\\\Components\\\\Page\\\\HomePage.jsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Editor, EditorState, convertToRaw, Modifier, getInsertRange } from 'draft-js';\nimport style from 'styled-components';\nimport './HomePage.css';\nimport { FaUserTag, FaImage, FaUserFriends, FaLock } from \"react-icons/fa\";\nimport { MdTagFaces, MdPublic } from \"react-icons/md\";\nimport { Select, Switch, Button, Tooltip } from 'antd';\nimport Picker from 'emoji-picker-react';\nimport draftToHtml from 'draftjs-to-html';\nconst StyleEditor = style.div`\n  width: 510px;\n  max-height: 200px;\n  overflow-y: auto;\n  margin-left: 10px;\n  font-size: 14px;\n`;\n\nfunction HomePage(props) {\n  const [editorState, setEditorState, autocompleteState, selectionState] = useState(() => EditorState.createEmpty());\n  const [valueEditor, setValueEditor] = useState();\n  const createPostInputRef = useRef();\n  const {\n    Option\n  } = Select;\n  const [isLoadingSubmit, setIsLoadingSubmit] = useState(false);\n  const [chosenEmoji, setChosenEmoji] = useState(null);\n  useEffect(() => {\n    if (props.showModalCreatePost) {\n      let createPostInput = createPostInputRef.current;\n      createPostInput.focus();\n    }\n\n    if (!props.showModalCreatePost) {\n      setEditorState(editorState);\n    }\n  }, [props.showModalCreatePost]); // func show modal create post\n\n  function showModalCreatePostFunc() {\n    props.showModalCreatePostFunc();\n  } // func create post when submit\n\n\n  function submitCreatePost() {\n    setIsLoadingSubmit(true);\n  } // Func click choose emoji\n\n\n  const onEmojiClick = (event, emojiObject) => {\n    setChosenEmoji(emojiObject); //lấy vị trí con trỏ chuột\n\n    const currentSelectionState = editorState.getSelection(); // lấy dữ liệu hiện tại của editor, tạo block mới, lấy key\n\n    const contentState = editorState.getCurrentContent();\n    const contentStateWithEntity = contentState.createEntity('EMOJI', 'MUTABLE', emojiObject.emoji);\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey(); // KHỞI TẠO NỘI DUNG MỚI\n\n    let newContentState = Modifier.replaceText(editorState, currentSelectionState, contentStateWithEntity, null, entityKey); // GÁN LẠI GIÁ TRỊ CHO Editor\n\n    const newEditorState = EditorState.push(editorState, newContentState, `insert-emoji`); //in ra nội dung mới của editor\n\n    console.log(newEditorState.getCurrentContent().getPlainText()); // trả con chuột về sau cùng của editor\n\n    EditorState.forceSelection(newEditorState, newContentState.getSelectionAfter());\n  }; //func onchange editor\n\n\n  const onChangeEditor = editorState => {\n    const currentContent = editorState.getCurrentContent();\n    const contentRaw = convertToRaw(currentContent);\n    const value = currentContent.hasText() ? draftToHtml(contentRaw) : \"\"; // currentContent.getPlainText() lấy nội dung editor\n\n    setEditorState(editorState);\n    setValueEditor(value);\n  }; // List emoji reaction\n\n\n  const EmojiPicker = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-emoji\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Picker, {\n      onEmojiClick: onEmojiClick,\n      disableSearchBar: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-home-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post\",\n    onClick: () => showModalCreatePostFunc(),\n    style: props.showModalCreatePost ? {\n      zIndex: '10'\n    } : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"http://xemanhdep.com/wp-content/uploads/2016/04/hinh-anh-girl-xinh-dep-nhat-2016-10.jpg\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-editor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StyleEditor, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Editor, {\n    ref: createPostInputRef,\n    editorState: editorState,\n    onChange: onChangeEditor,\n    placeholder: \"Vi\\u1EBFt b\\xE0i d\\xEC \\u0111\\xF3...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  })), props.showModalCreatePost ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-reaction\",\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    trigger: ['click'],\n    title: EmojiPicker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"icon-choose-emoji-picker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(MdTagFaces, {\n    style: {\n      fontSize: '20px',\n      fill: 'rgba(0,0,0,0.5)',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 68\n    }\n  })))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-choose-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"choose-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FaImage, {\n    style: {\n      fontSize: \"20px\",\n      marginRight: '7px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }), \"\\u1EA2nh/video\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"choose-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaUserTag, {\n    style: {\n      fontSize: \"20px\",\n      marginRight: '7px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }), \"G\\u1EAFn th\\u1EBB\")), props.showModalCreatePost ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-choose-place-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-newfeed-place\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"place-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 23\n    }\n  }, \"Tin c\\u1EE7a b\\u1EA1n\")), /*#__PURE__*/React.createElement(Select, {\n    className: \"select-privacy\",\n    defaultValue: \"public\",\n    style: {\n      width: 140\n    },\n    loading: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"public\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(MdPublic, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 46\n    }\n  }), \" C\\xF4ng khai\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"friend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaUserFriends, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 46\n    }\n  }), \" B\\u1EA1n b\\xE8\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"onlyme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaLock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 46\n    }\n  }), \" Ch\\u1EC9 m\\xECnh t\\xF4i\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-story-place\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"place-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 23\n    }\n  }, \"B\\u1EA3ng tin\")), /*#__PURE__*/React.createElement(Select, {\n    className: \"select-privacy\",\n    defaultValue: \"public\",\n    style: {\n      width: 140\n    },\n    loading: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"public\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(MdPublic, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 46\n    }\n  }), \" C\\xF4ng khai\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"friend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaUserFriends, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 46\n    }\n  }), \" B\\u1EA1n b\\xE8\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"onlyme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaLock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 46\n    }\n  }), \" Ch\\u1EC9 m\\xECnh t\\xF4i\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-post-submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, isLoadingSubmit ? /*#__PURE__*/React.createElement(Button, {\n    loading: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\u0103ng\") : /*#__PURE__*/React.createElement(React.Fragment, null, valueEditor ? /*#__PURE__*/React.createElement(Button, {\n    onClick: () => submitCreatePost(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\u0103ng\") : /*#__PURE__*/React.createElement(Button, {\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\u0103ng\")))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, \"right\", valueEditor)));\n}\n\nexport default HomePage;","map":{"version":3,"sources":["D:/Web/DoAn/client/src/Components/Page/HomePage.jsx"],"names":["React","useState","useRef","useEffect","Editor","EditorState","convertToRaw","Modifier","getInsertRange","style","FaUserTag","FaImage","FaUserFriends","FaLock","MdTagFaces","MdPublic","Select","Switch","Button","Tooltip","Picker","draftToHtml","StyleEditor","div","HomePage","props","editorState","setEditorState","autocompleteState","selectionState","createEmpty","valueEditor","setValueEditor","createPostInputRef","Option","isLoadingSubmit","setIsLoadingSubmit","chosenEmoji","setChosenEmoji","showModalCreatePost","createPostInput","current","focus","showModalCreatePostFunc","submitCreatePost","onEmojiClick","event","emojiObject","currentSelectionState","getSelection","contentState","getCurrentContent","contentStateWithEntity","createEntity","emoji","entityKey","getLastCreatedEntityKey","newContentState","replaceText","newEditorState","push","console","log","getPlainText","forceSelection","getSelectionAfter","onChangeEditor","currentContent","contentRaw","value","hasText","EmojiPicker","zIndex","textAlign","fontSize","fill","cursor","marginRight","width"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\nimport {Editor, EditorState, convertToRaw, Modifier, getInsertRange} from 'draft-js';\r\nimport style from 'styled-components';\r\nimport './HomePage.css';\r\nimport { FaUserTag, FaImage, FaUserFriends, FaLock} from \"react-icons/fa\";\r\nimport {MdTagFaces, MdPublic} from \"react-icons/md\";\r\nimport {Select, Switch, Button, Tooltip} from 'antd';\r\nimport Picker from 'emoji-picker-react';\r\nimport draftToHtml from 'draftjs-to-html';\r\n\r\nconst StyleEditor = style.div`\r\n  width: 510px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n`;\r\n\r\nfunction HomePage(props){\r\n\r\n  const [editorState, setEditorState, autocompleteState, selectionState] = useState(() =>\r\n    EditorState.createEmpty(),\r\n  );\r\n  const [valueEditor, setValueEditor] = useState();\r\n  const createPostInputRef = useRef();\r\n  const {Option} = Select;\r\n  const [isLoadingSubmit, setIsLoadingSubmit] = useState(false);\r\n  const [chosenEmoji, setChosenEmoji] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if(props.showModalCreatePost){\r\n      let createPostInput = createPostInputRef.current;\r\n      createPostInput.focus()\r\n    }\r\n    if(!props.showModalCreatePost){\r\n      setEditorState(editorState)\r\n    }\r\n\r\n  },[props.showModalCreatePost])\r\n\r\n// func show modal create post\r\n  function showModalCreatePostFunc(){\r\n    props.showModalCreatePostFunc()\r\n  }\r\n\r\n// func create post when submit\r\n  function submitCreatePost(){\r\n    setIsLoadingSubmit(true)\r\n  }\r\n\r\n// Func click choose emoji\r\n  const onEmojiClick = (event, emojiObject) => {\r\n    setChosenEmoji(emojiObject)\r\n\r\n    //lấy vị trí con trỏ chuột\r\n    const currentSelectionState = editorState.getSelection();\r\n    // lấy dữ liệu hiện tại của editor, tạo block mới, lấy key\r\n    const contentState = editorState.getCurrentContent();\r\n    const contentStateWithEntity = contentState.createEntity(\r\n      'EMOJI',\r\n      'MUTABLE',\r\n      emojiObject.emoji,\r\n    );\r\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\r\n    // KHỞI TẠO NỘI DUNG MỚI\r\n    let newContentState = Modifier.replaceText(\r\n      editorState,\r\n      currentSelectionState,\r\n      contentStateWithEntity,\r\n      null,\r\n      entityKey,\r\n    );\r\n    // GÁN LẠI GIÁ TRỊ CHO Editor\r\n    const newEditorState = EditorState.push(\r\n      editorState,\r\n      newContentState,\r\n      `insert-emoji`,\r\n    );\r\n    //in ra nội dung mới của editor\r\n    console.log(newEditorState.getCurrentContent().getPlainText());\r\n    // trả con chuột về sau cùng của editor\r\n    EditorState.forceSelection(\r\n      newEditorState,\r\n      newContentState.getSelectionAfter(),\r\n    );\r\n\r\n  };\r\n\r\n//func onchange editor\r\n  const onChangeEditor = (editorState) => {\r\n    const currentContent = editorState.getCurrentContent();\r\n    const contentRaw = convertToRaw(currentContent);\r\n    const value = currentContent.hasText() ? draftToHtml(contentRaw) : \"\";\r\n    // currentContent.getPlainText() lấy nội dung editor\r\n    setEditorState(editorState)\r\n    setValueEditor(value)\r\n  }\r\n\r\n// List emoji reaction\r\n  const EmojiPicker = () => {\r\n    return(\r\n      <div className=\"list-emoji\">\r\n        <Picker  onEmojiClick={onEmojiClick} disableSearchBar/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return(\r\n    <div>\r\n    <div className=\"page-home-container\">\r\n      <div className=\"page-left\">\r\n        <div className=\"create-post\" onClick={() => showModalCreatePostFunc()} style={props.showModalCreatePost ? {zIndex: '10'} : null}>\r\n          <div className=\"create-post-input\">\r\n            <div className=\"create-post-avatar\">\r\n              <img src=\"http://xemanhdep.com/wp-content/uploads/2016/04/hinh-anh-girl-xinh-dep-nhat-2016-10.jpg\" alt=\"\" />\r\n            </div>\r\n            <div className=\"create-post-editor\">\r\n              <StyleEditor>\r\n                <Editor ref={createPostInputRef} editorState={editorState} onChange={onChangeEditor} placeholder=\"Viết bài dì đó...\"/>\r\n              </StyleEditor>\r\n              {props.showModalCreatePost ?\r\n                <div className=\"create-post-reaction\" style={{textAlign: 'right'}}>\r\n                  <Tooltip trigger={['click']} title={EmojiPicker} >\r\n                      <button className=\"icon-choose-emoji-picker\"><MdTagFaces style={{fontSize: '20px', fill: 'rgba(0,0,0,0.5)', cursor: 'pointer'}}/></button>\r\n                  </Tooltip>\r\n              </div>\r\n              :null}\r\n            </div>\r\n          </div>\r\n          <div className=\"create-post-option\">\r\n            <div className=\"create-post-choose-image\">\r\n              <label htmlFor=\"choose-image\">\r\n                <FaImage style={{ fontSize: \"20px\", marginRight: '7px' }} />\r\n                Ảnh/video\r\n              </label>\r\n              <input type=\"file\" id=\"choose-image\" />\r\n            </div>\r\n            <div className=\"create-post-tag\">\r\n              <FaUserTag style={{ fontSize: \"20px\", marginRight: '7px' }} />\r\n              Gắn thẻ\r\n            </div>\r\n          </div>\r\n          {props.showModalCreatePost ?\r\n            <div>\r\n              <div className=\"create-post-choose-place-post\">\r\n                <div className=\"create-post-newfeed-place\">\r\n                  <div>\r\n                      <Switch></Switch>\r\n                      <span className=\"place-post\">Tin của bạn</span>\r\n                  </div>\r\n                  <Select className=\"select-privacy\" defaultValue=\"public\" style={{ width: 140 }} loading>\r\n                      <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n                      <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n                      <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n                  </Select>\r\n                </div>\r\n                <div className=\"create-post-story-place\">\r\n                  <div>\r\n                      <Switch defaultChecked></Switch>\r\n                      <span className=\"place-post\">Bảng tin</span>\r\n                  </div>\r\n                  <Select className=\"select-privacy\" defaultValue=\"public\" style={{ width: 140 }} loading>\r\n                      <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n                      <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n                      <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n              <div className=\"create-post-submit\">\r\n                {isLoadingSubmit ?\r\n                  <Button loading>Đăng</Button>\r\n                :\r\n                <>\r\n                {valueEditor ?\r\n\r\n                  <Button onClick={() => submitCreatePost()} >Đăng</Button>\r\n                  :\r\n                  <Button disabled>Đăng</Button>\r\n                }\r\n                </>\r\n              }\r\n              </div>\r\n            </div>\r\n          : null}\r\n        </div>\r\n      </div>\r\n      <div className=\"page-right\">\r\n        right{valueEditor}\r\n      </div>\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}