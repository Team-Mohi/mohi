{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\NewFeed\\\\EditorMention.jsx\";\nimport 'draft-js-mention-plugin/lib/plugin.css';\nimport style from 'styled-components';\nimport React, { Component } from 'react';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport Editor from 'draft-js-plugins-editor';\nimport createMentionPlugin, { defaultSuggestionsFilter } from 'draft-js-mention-plugin';\nimport editorStyles from './editorStyles.css';\nimport { connect } from \"react-redux\";\nconst mentions = [{\n  aname: 'Matthew Russell',\n  alink: 'https://twitter.com/mrussell247',\n  iavatar: 'https://pbs.twimg.com/profile_images/517863945/mattsailing_400x400.jpg'\n}, {\n  name: 'Julian Krispel-Samsel',\n  alink: 'https://twitter.com/juliandoesstuff',\n  iavatar: 'https://avatars2.githubusercontent.com/u/1188186?v=3&s=400'\n}, {\n  name: 'Jyoti Puri',\n  alink: 'https://twitter.com/jyopur',\n  iavatar: 'https://avatars0.githubusercontent.com/u/2182307?v=3&s=400'\n}, {\n  name: 'Max Stoiber',\n  alink: 'https://twitter.com/mxstbr'\n}, {\n  name: 'Nik Graf',\n  alink: 'https://twitter.com/nikgraf',\n  iavatar: 'https://avatars0.githubusercontent.com/u/223045?v=3&s=400'\n}, {\n  name: 'Pascal Brandt',\n  alink: 'https://twitter.com/psbrandt',\n  iavatar: 'https://pbs.twimg.com/profile_images/688487813025640448/E6O6I011_400x400.png'\n}];\nconst StyleEditorMention = style.div`\n  width: 100%;\n  max-height: 200px;\n  overflow-y: auto;\n  font-size: 14px;\n  padding: 5px 10px;\n  margin-top: 10px;\n  border: 0.5px solid rgba(0,0,0,0.1);\n  border-radius:30px;\n`;\n\nclass SimpleMentionEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editorState: EditorState.createEmpty(),\n      suggestions: this.props.friends\n    };\n\n    this.onChange = editorState => {\n      this.setState({\n        editorState\n      });\n      let currentContent = editorState.getCurrentContent();\n      let raw = convertToRaw(currentContent);\n\n      for (let key in raw.entityMap) {\n        const ent = raw.entityMap[key];\n\n        if (ent.type === 'mention') {\n          this.props.showMentionList(ent.data.mention, ent.data.mention);\n        }\n      }\n    };\n\n    this.onSearchChange = ({\n      value\n    }) => {\n      this.setState({\n        suggestions: defaultSuggestionsFilter(value, mentions)\n      });\n    };\n\n    this.mentionPlugin = createMentionPlugin({\n      mentionComponent: props.friends\n    });\n  }\n\n  //\n  // onAddMention = (mention) => {\n  //   console.log(mention);\n  //   this.props.showMentionList(mention);\n  // }\n  render() {\n    const {\n      MentionSuggestions\n    } = this.mentionPlugin;\n    const plugins = [this.mentionPlugin];\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: editorStyles.editor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(StyleEditorMention, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Editor, {\n      editorState: this.state.editorState,\n      onChange: this.onChange,\n      plugins: plugins,\n      placeholder: \"G\\u1EAFn th\\u1EBB ai \\u0111\\xF3...\",\n      ref: element => {\n        this.editor = element;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(MentionSuggestions, {\n      onSearchChange: this.onSearchChange,\n      suggestions: this.state.suggestions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    friends: state.friends.list\n  };\n};\n\nexport default connect(mapStateToProps, null)(SimpleMentionEditor);","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/EditorMention.jsx"],"names":["style","React","Component","EditorState","convertToRaw","Editor","createMentionPlugin","defaultSuggestionsFilter","editorStyles","connect","mentions","aname","alink","iavatar","name","StyleEditorMention","div","SimpleMentionEditor","constructor","props","state","editorState","createEmpty","suggestions","friends","onChange","setState","currentContent","getCurrentContent","raw","key","entityMap","ent","type","showMentionList","data","mention","onSearchChange","value","mentionPlugin","mentionComponent","render","MentionSuggestions","plugins","console","log","editor","element","mapStateToProps","list"],"mappings":"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","sourcesContent":["import 'draft-js-mention-plugin/lib/plugin.css';\r\nimport style from 'styled-components';\r\nimport React, { Component } from 'react';\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport Editor from 'draft-js-plugins-editor';\r\nimport createMentionPlugin, { defaultSuggestionsFilter } from 'draft-js-mention-plugin';\r\nimport editorStyles from './editorStyles.css';\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mentions = [\r\n  {\r\n    aname: 'Matthew Russell',\r\n    alink: 'https://twitter.com/mrussell247',\r\n    iavatar: 'https://pbs.twimg.com/profile_images/517863945/mattsailing_400x400.jpg',\r\n  },\r\n  {\r\n    name: 'Julian Krispel-Samsel',\r\n    alink: 'https://twitter.com/juliandoesstuff',\r\n    iavatar: 'https://avatars2.githubusercontent.com/u/1188186?v=3&s=400',\r\n  },\r\n  {\r\n    name: 'Jyoti Puri',\r\n    alink: 'https://twitter.com/jyopur',\r\n    iavatar: 'https://avatars0.githubusercontent.com/u/2182307?v=3&s=400',\r\n  },\r\n  {\r\n    name: 'Max Stoiber',\r\n    alink: 'https://twitter.com/mxstbr',\r\n  },\r\n  {\r\n    name: 'Nik Graf',\r\n    alink: 'https://twitter.com/nikgraf',\r\n    iavatar: 'https://avatars0.githubusercontent.com/u/223045?v=3&s=400',\r\n  },\r\n  {\r\n    name: 'Pascal Brandt',\r\n    alink: 'https://twitter.com/psbrandt',\r\n    iavatar: 'https://pbs.twimg.com/profile_images/688487813025640448/E6O6I011_400x400.png',\r\n  },\r\n];\r\n\r\nconst StyleEditorMention = style.div`\r\n  width: 100%;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  font-size: 14px;\r\n  padding: 5px 10px;\r\n  margin-top: 10px;\r\n  border: 0.5px solid rgba(0,0,0,0.1);\r\n  border-radius:30px;\r\n`;\r\n\r\n class SimpleMentionEditor extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.mentionPlugin = createMentionPlugin(\r\n      {\r\n        mentionComponent: props.friends\r\n      }\r\n    );\r\n  }\r\n\r\n  state = {\r\n    editorState: EditorState.createEmpty(),\r\n    suggestions: this.props.friends,\r\n  };\r\n\r\n  onChange = (editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n\r\n    let currentContent = editorState .getCurrentContent();\r\n    let raw = convertToRaw(currentContent);\r\n    for(let key in raw.entityMap){\r\n      const ent = raw.entityMap[key];\r\n      if(ent.type === 'mention'){\r\n          this.props.showMentionList(ent.data.mention, ent.data.mention);\r\n      }\r\n    }\r\n  };\r\n\r\n  onSearchChange = ({ value }) => {\r\n    this.setState({\r\n      suggestions: defaultSuggestionsFilter(value, mentions),\r\n    });\r\n  };\r\n  //\r\n  // onAddMention = (mention) => {\r\n  //   console.log(mention);\r\n  //   this.props.showMentionList(mention);\r\n  // }\r\n\r\n  render() {\r\n    const { MentionSuggestions } = this.mentionPlugin;\r\n    const plugins = [this.mentionPlugin];\r\n    console.log(this.state);\r\n\r\n    return (\r\n      <div className={editorStyles.editor}>\r\n        <StyleEditorMention>\r\n          <Editor\r\n            editorState={this.state.editorState}\r\n            onChange={this.onChange}\r\n            plugins={plugins}\r\n            placeholder=\"Gắn thẻ ai đó...\"\r\n            ref={(element) => { this.editor = element; }}\r\n          />\r\n        </StyleEditorMention>\r\n        <MentionSuggestions\r\n          onSearchChange={this.onSearchChange}\r\n          suggestions={this.state.suggestions}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    friends: state.friends.list,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(SimpleMentionEditor)\r\n"]},"metadata":{},"sourceType":"module"}