{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import*as Types from'./../Constants/ActionTypes.jsx';var initialState={currentPage:1,loading:true,hasMore:false,error:false,listPosts:[],loadingAddComment:false,loadingAddPost:false,newComment:''};var findItem=function findItem(type,arr,id){var result={index:-1,item:''};arr.forEach(function(item,i){if(type==='post'){if(item.id===id){result.index=i;result.item=item;}}if(type==='comment'){if(item.pivot.id===id){result.index=i;result.item=item;}}});return result;};export var myPosts=function myPosts(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case Types.FECTH_POSTS_PROFILE:return _objectSpread(_objectSpread({},state),{},{listPosts:[],currentPage:1,loading:true});break;case Types.RESPONSE_POSTS_PROFILE:state.listPosts=action.posts.data;state.loading=false;state.hasMore=action.posts.last_page>action.posts.current_page;return _objectSpread({},state);break;case Types.SET_CURRENT_PAGE_PROFILE:state.currentPage=state.currentPage+1;return _objectSpread({},state);break;case Types.FECTH_MORE_POSTS_PROFILE:return _objectSpread(_objectSpread({},state),{},{loading:true});break;case Types.RESPONSE_MORE_POSTS_PROFILE:state.listPosts=[].concat(_toConsumableArray(state.listPosts),_toConsumableArray(action.posts.data));state.loading=false;state.hasMore=action.posts.last_page>action.posts.current_page;return _objectSpread({},state);break;case Types.REQUEST_ADD_COMMENT_PROFILE:return _objectSpread(_objectSpread({},state),{},{loadingAddComment:true});break;case Types.RESPONSE_ADD_COMMENT_PROFILE:var post=findItem('post',state.listPosts,action.payload.idPost);state.listPosts[post.index].comment_post=[].concat(_toConsumableArray(state.listPosts[post.index].comment_post),_toConsumableArray(action.payload.comment));return _objectSpread(_objectSpread({},state),{},{loadingAddComment:false,newComment:action.payload});break;case Types.REQUEST_ADD_POSTS_PROFILE:return _objectSpread(_objectSpread({},state),{},{loadingAddPost:true});break;case Types.RESPONSE_ADD_POSTS_PROFILE:return _objectSpread(_objectSpread({},state),{},{loadingAddPost:false,listPosts:[].concat(_toConsumableArray(action.payload),_toConsumableArray(state.listPosts))});break;case Types.UPDATE_COMMENT_POST_PROFILE:var post=findItem('post',state.listPosts,action.payload.idPost);var commentPost=findItem('comment',post.item.comment_post,action.payload.id);state.listPosts[post.index].comment_post[commentPost.index].pivot.comment_Content=action.payload.value;return _objectSpread({},state);break;case Types.UPDATE_POST_PROFILE:var post=findItem('post',state.listPosts,action.payload.idPost);state.listPosts[post.index]=action.payload.data;return _objectSpread({},state);break;default:return state;}};","map":{"version":3,"sources":["D:/Web/mohi/client/src/Reducers/MyPost.jsx"],"names":["Types","initialState","currentPage","loading","hasMore","error","listPosts","loadingAddComment","loadingAddPost","newComment","findItem","type","arr","id","result","index","item","forEach","i","pivot","myPosts","state","action","FECTH_POSTS_PROFILE","RESPONSE_POSTS_PROFILE","posts","data","last_page","current_page","SET_CURRENT_PAGE_PROFILE","FECTH_MORE_POSTS_PROFILE","RESPONSE_MORE_POSTS_PROFILE","REQUEST_ADD_COMMENT_PROFILE","RESPONSE_ADD_COMMENT_PROFILE","post","payload","idPost","comment_post","comment","REQUEST_ADD_POSTS_PROFILE","RESPONSE_ADD_POSTS_PROFILE","UPDATE_COMMENT_POST_PROFILE","commentPost","comment_Content","value","UPDATE_POST_PROFILE"],"mappings":"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","sourcesContent":["import * as Types from './../Constants/ActionTypes.jsx';\r\n\r\nconst initialState = {\r\n  currentPage: 1,\r\n  loading: true,\r\n  hasMore: false,\r\n  error: false,\r\n  listPosts: [],\r\n  loadingAddComment: false,\r\n  loadingAddPost: false,\r\n  newComment: ''\r\n};\r\n\r\nvar findItem = (type, arr, id) => {\r\n  var result = {\r\n    index: -1,\r\n    item: ''\r\n  };\r\n\r\n  arr.forEach((item, i) => {\r\n    if(type === 'post'){\r\n      if(item.id === id){\r\n        result.index = i;\r\n        result.item = item;\r\n      }\r\n    }\r\n\r\n    if(type === 'comment'){\r\n      if(item.pivot.id === id){\r\n        result.index = i;\r\n        result.item = item;\r\n      }\r\n    }\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nexport const myPosts = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case Types.FECTH_POSTS_PROFILE:\r\n      return {\r\n              ...state,\r\n              listPosts: [],\r\n              currentPage: 1,\r\n              loading: true\r\n            }\r\n      break;\r\n    case Types.RESPONSE_POSTS_PROFILE:\r\n      state.listPosts = action.posts.data\r\n      state.loading = false\r\n      state.hasMore = action.posts.last_page > action.posts.current_page\r\n      return {...state}\r\n      break;\r\n    case Types.SET_CURRENT_PAGE_PROFILE:\r\n      state.currentPage = state.currentPage + 1\r\n      return {...state}\r\n      break;\r\n    case Types.FECTH_MORE_POSTS_PROFILE:\r\n      return {\r\n              ...state,\r\n              loading: true\r\n            }\r\n      break;\r\n    case Types.RESPONSE_MORE_POSTS_PROFILE:\r\n      state.listPosts = [...state.listPosts, ...action.posts.data]\r\n      state.loading = false\r\n      state.hasMore = action.posts.last_page > action.posts.current_page\r\n      return {...state}\r\n      break;\r\n    case Types.REQUEST_ADD_COMMENT_PROFILE:\r\n      return {...state, loadingAddComment: true}\r\n      break;\r\n    case Types.RESPONSE_ADD_COMMENT_PROFILE:\r\n      var post = findItem('post', state.listPosts, action.payload.idPost);\r\n      state.listPosts[post.index].comment_post = [...state.listPosts[post.index].comment_post, ...action.payload.comment];\r\n\r\n      return {...state, loadingAddComment:false, newComment: action.payload}\r\n      break;\r\n    case Types.REQUEST_ADD_POSTS_PROFILE:\r\n      return {...state, loadingAddPost:true}\r\n      break;\r\n    case Types.RESPONSE_ADD_POSTS_PROFILE:\r\n      return {\r\n        ...state,\r\n        loadingAddPost:false,\r\n        listPosts: [...action.payload, ...state.listPosts]\r\n      }\r\n      break;\r\n    case Types.UPDATE_COMMENT_POST_PROFILE:\r\n      var post = findItem('post', state.listPosts, action.payload.idPost);\r\n      var commentPost = findItem('comment', post.item.comment_post, action.payload.id);\r\n\r\n      state.listPosts[post.index].comment_post[commentPost.index].pivot.comment_Content = action.payload.value;\r\n\r\n      return {...state}\r\n      break;\r\n    case Types.UPDATE_POST_PROFILE:\r\n      var post = findItem('post', state.listPosts, action.payload.idPost);\r\n      state.listPosts[post.index] = action.payload.data;\r\n\r\n      return {...state}\r\n      break;\r\n    default: return state\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}