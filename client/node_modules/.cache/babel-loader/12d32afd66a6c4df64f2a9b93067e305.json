{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import NewFeed from'./../Components/NewFeed/Newfeed.jsx';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{fetchPosts}from'./../Actions/index.jsx';import{responsePosts}from'./../Actions/index.jsx';import{fetchMorePosts}from'./../Actions/index.jsx';import{responseMorePosts}from'./../Actions/index.jsx';import{responseAddComment}from'./../Actions/index.jsx';import{requestAddComment}from'./../Actions/index.jsx';function NewFeedContainer(_ref){var posts=_ref.posts;var _useSelector=useSelector(function(state){return state.posts;}),currentPage=_useSelector.currentPage;var pageDefault=1;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSetting=_useState2[0],setLoadingSetting=_useState2[1];useEffect(function(){dispatch(fetchPosts());getPostNewFeedFirst();},[]);useEffect(function(){if(currentPage>1){dispatch(fetchMorePosts());getPostNewFeedInfinite();}},[currentPage]);var getPostNewFeedFirst=function getPostNewFeedFirst(){axios({method:'GET',url:\"https://www.api.mohi.vn/api/auth/get-post-home\",params:{page:pageDefault}}).then(function(res){dispatch(responsePosts(res.data));}).catch(function(e){if(axios.isCancel(e))return;});};var getPostNewFeedInfinite=function getPostNewFeedInfinite(){axios({method:'GET',url:\"https://www.api.mohi.vn/api/auth/get-post-home\",params:{page:currentPage}}).then(function(res){dispatch(responseMorePosts(res.data));}).catch(function(e){if(axios.isCancel(e))return;});};var sendReactionPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(reaction,postId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(reaction==='unlike')){_context.next=4;break;}console.log(reaction,postId);_context.next=6;break;case 4:_context.next=6;return axios.post('https://www.api.mohi.vn/api/auth/create-action',{actions_PostId:postId,actions_action:reaction}).then(function(res){}).catch(function(e){});case 6:case\"end\":return _context.stop();}}},_callee);}));return function sendReactionPost(_x,_x2){return _ref2.apply(this,arguments);};}();var onSubmitComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value,idPost){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(requestAddComment());_context2.next=3;return axios.post('https://www.api.mohi.vn/api/auth/create-comment',{comment_PostId:idPost,comment_Content:value,comment_Type:'parent'}).then(function(res){dispatch(responseAddComment(res.data));}).catch(function(e){});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmitComment(_x3,_x4){return _ref3.apply(this,arguments);};}();var hideOnePostOfUser=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idPost){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post('https://www.api.mohi.vn/api/auth/hide-one-post',{id:idPost}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function hideOnePostOfUser(_x5){return _ref4.apply(this,arguments);};}();var unFollowUser=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idUser){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post('https://www.api.mohi.vn/api/auth/hide-all-post',{id:idUser}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function unFollowUser(_x6){return _ref5.apply(this,arguments);};}();var unNotificationOfPost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(idPost){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post('https://www.api.mohi.vn/api/auth/hide-notifycation-post',{id:idPost}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function unNotificationOfPost(_x7){return _ref6.apply(this,arguments);};}();var loadingSendRequestSetting=function loadingSendRequestSetting(type,idPost,idUser){setLoadingSetting(true);switch(type){case'hidePost':hideOnePostOfUser(idPost);break;case'unNotification':unNotificationOfPost(idPost);break;default:unFollowUser(idUser);break;}};return/*#__PURE__*/React.createElement(NewFeed,{sendReactionPost:sendReactionPost,onSubmitComment:onSubmitComment,loadingSendRequestSetting:loadingSendRequestSetting,loadingSetting:loadingSetting});}export default NewFeedContainer;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Containers/NewFeedContainer.jsx"],"names":["React","useEffect","useState","NewFeed","axios","useSelector","useDispatch","fetchPosts","responsePosts","fetchMorePosts","responseMorePosts","responseAddComment","requestAddComment","NewFeedContainer","posts","state","currentPage","pageDefault","dispatch","loadingSetting","setLoadingSetting","getPostNewFeedFirst","getPostNewFeedInfinite","method","url","params","page","then","res","data","catch","e","isCancel","sendReactionPost","reaction","postId","console","log","post","actions_PostId","actions_action","onSubmitComment","value","idPost","comment_PostId","comment_Content","comment_Type","hideOnePostOfUser","id","unFollowUser","idUser","unNotificationOfPost","loadingSendRequestSetting","type"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport NewFeed from './../Components/NewFeed/Newfeed.jsx';\r\nimport axios from 'axios';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport { fetchPosts } from './../Actions/index.jsx';\r\nimport { responsePosts } from './../Actions/index.jsx';\r\nimport { fetchMorePosts } from './../Actions/index.jsx';\r\nimport { responseMorePosts } from './../Actions/index.jsx';\r\nimport { responseAddComment } from './../Actions/index.jsx';\r\nimport { requestAddComment } from './../Actions/index.jsx';\r\n\r\nfunction NewFeedContainer({posts}){\r\n  const { currentPage } = useSelector(state => state.posts);\r\n  const pageDefault = 1;\r\n  const dispatch = useDispatch();\r\n  const [loadingSetting, setLoadingSetting] = useState(false)\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPosts())\r\n    getPostNewFeedFirst();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(currentPage > 1){\r\n      dispatch(fetchMorePosts())\r\n      getPostNewFeedInfinite();\r\n    }\r\n  }, [currentPage])\r\n\r\n  const getPostNewFeedFirst = () => {\r\n        axios({\r\n          method: 'GET',\r\n          url: \"https://www.api.mohi.vn/api/auth/get-post-home\",\r\n          params: {page : pageDefault}\r\n        })\r\n        .then(res =>{\r\n          dispatch(responsePosts(res.data))\r\n        })\r\n        .catch(e => {\r\n          if(axios.isCancel(e)) return\r\n        })\r\n  }\r\n\r\n  const getPostNewFeedInfinite = () => {\r\n        axios({\r\n          method: 'GET',\r\n          url: \"https://www.api.mohi.vn/api/auth/get-post-home\",\r\n          params: {page : currentPage}\r\n        })\r\n        .then(res =>{\r\n          dispatch(responseMorePosts(res.data))\r\n        })\r\n        .catch(e => {\r\n          if(axios.isCancel(e)) return\r\n        })\r\n  }\r\n\r\n  const sendReactionPost = async (reaction, postId) => {\r\n    if(reaction === 'unlike'){\r\n      console.log(reaction, postId);\r\n    }else {\r\n      await axios.post('https://www.api.mohi.vn/api/auth/create-action', {actions_PostId: postId, actions_action: reaction}).then((res) => {\r\n      }).catch((e) => {\r\n      })\r\n    }\r\n  }\r\n\r\n  const onSubmitComment = async (value, idPost) => {\r\n    dispatch(requestAddComment())\r\n\r\n    await axios.post('https://www.api.mohi.vn/api/auth/create-comment', {comment_PostId: idPost, comment_Content: value, comment_Type: 'parent'})\r\n    .then((res) => {\r\n      dispatch(responseAddComment(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const hideOnePostOfUser = async (idPost) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/hide-one-post', {id: idPost})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n\r\n  const unFollowUser = async (idUser) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/hide-all-post', {id: idUser})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n\r\n  const unNotificationOfPost = async (idPost) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/hide-notifycation-post', {id: idPost})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n  const loadingSendRequestSetting = (type, idPost, idUser) => {\r\n    setLoadingSetting(true)\r\n    switch (type) {\r\n      case 'hidePost':\r\n        hideOnePostOfUser(idPost)\r\n        break;\r\n      case 'unNotification':\r\n        unNotificationOfPost(idPost)\r\n        break;\r\n      default:\r\n        unFollowUser(idUser)\r\n        break;\r\n\r\n    }\r\n  }\r\n\r\n  return(\r\n    <NewFeed sendReactionPost={sendReactionPost} onSubmitComment={onSubmitComment} loadingSendRequestSetting={loadingSendRequestSetting} loadingSetting={loadingSetting}/>\r\n  )\r\n}\r\nexport default NewFeedContainer;\r\n"]},"metadata":{},"sourceType":"module"}