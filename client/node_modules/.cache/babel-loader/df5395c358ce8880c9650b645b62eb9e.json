{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\Messenger\\\\ContentMessenger.jsx\";\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { FaSmile } from 'react-icons/fa';\nimport { GiPhone } from 'react-icons/gi';\nimport { Image, Transformation } from 'cloudinary-react';\nimport { BsSearch, BsFillCameraVideoFill, BsThreeDotsVertical, BsImage, BsPencilSquare } from 'react-icons/bs';\nimport { AiTwotoneSetting, AiTwotoneLike, AiFillFile, AiFillCamera, AiFillCloseCircle } from 'react-icons/ai';\nimport { Row, Spin } from 'antd';\nimport useWindowSize from \"./useWindowSize.jsx\";\nimport EditorEmoji from \"./EditorEmoji.jsx\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { setCurrentOneMessage } from './../../Actions/index.jsx';\nexport const ContentMessenger = (props, {\n  oneMessage\n}) => {\n  const {\n    idUser\n  } = useParams();\n  const observer = useRef();\n  const keepScrollToBottom = useRef();\n  const dispatch = useDispatch();\n  const {\n    list,\n    infoUser,\n    loading,\n    hasMore,\n    loadingMore\n  } = useSelector(state => state.oneMessage);\n  const heightContent = window.innerHeight - 134;\n  const [setupFakeName, setSetupFakeName] = useState(false);\n  const [heightContentBody, setHeightContentBody] = useState({\n    height: heightContent\n  });\n  const windowSize = useWindowSize();\n  const [heightRoom, setHeightRoom] = useState({\n    height: heightContent - 56\n  });\n  const [showSearchRoomChat, setShowSearchRoomChat] = useState(false);\n  const [newImageMess, setNewImageMess] = useState();\n  const [newVideoMess, setNewVideoMess] = useState();\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\n  useEffect(() => {\n    props.getMessageOneUser(idUser);\n  }, [idUser]);\n  useEffect(() => {\n    if (keepScrollToBottom.current) {\n      keepScrollToBottom.current.scrollTop = keepScrollToBottom.current.scrollHeight;\n    }\n  }, [loading]);\n  useEffect(() => {\n    setHeightContentBody({\n      height: heightContent\n    });\n    setHeightRoom({\n      height: heightContent - 56\n    });\n  }, [windowSize]);\n\n  const changeStatusButtonSubmit = value => {};\n\n  const lastMessage = useCallback(node => {\n    if (loadingMore) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMore) {\n        dispatch(setCurrentOneMessage());\n        keepScrollToBottom.current.scrollTop = 500;\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loadingMore, hasMore]);\n\n  function setupFakeNameFunc() {\n    setSetupFakeName(true);\n  }\n\n  function saveFakeNameFunc() {\n    setSetupFakeName(false);\n  }\n\n  function showSearchRoomChatFunc() {\n    setShowSearchRoomChat(true);\n  }\n\n  function hideSearchRoomChatFunc() {\n    setShowSearchRoomChat(false);\n  }\n\n  const onChangeSendImage = e => {\n    let file = e.target.files[0];\n    let blobUrl = URL.createObjectURL(file);\n\n    if (file.type === 'video/ogg' || file.type === 'video/mp4') {\n      setNewVideoMess(blobUrl);\n      setNewImageMess();\n    }\n\n    if (file.type === 'image/png' || file.type === 'image/jpg' || file.type === 'image/jpeg') {\n      setNewImageMess(blobUrl);\n      setNewVideoMess();\n    }\n\n    console.log(file);\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-messenger-container\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Spin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-info-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, infoUser.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: infoUser.user_avatar,\n    alt: infoUser.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: infoUser.user_avatar + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: infoUser.user_avatar_cropH,\n    width: infoUser.user_avatar_cropW,\n    x: infoUser.user_avatar_cropX,\n    y: infoUser.user_avatar_cropY,\n    crop: \"crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-info-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, infoUser.user_first_name + ' ' + infoUser.user_last_name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-info-status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 64\n    }\n  }, \"\\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 92\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-option\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GiPhone, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(BsFillCameraVideoFill, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(BsThreeDotsVertical, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body\",\n    style: heightContentBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-room\",\n    style: heightRoom,\n    ref: keepScrollToBottom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, loadingMore && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      background: 'rgba(0,128,128,0.3)',\n      marginBottom: '10px',\n      borderRadius: '3px',\n      padding: '3px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, \"\\u0110ang t\\u1EA3i th\\xEAm tin nh\\u1EAFn vui l\\xF2ng \\u0111\\u1EE3i...\"), list.map((mess, index) => {\n    if (mess.messages_From === currentUser.id) {\n      console.log(mess);\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-my-chat\",\n        ref: index === 0 ? lastMessage : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-my-chat-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }\n      }, mess.messages_Message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-my-chat-content-status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 29\n        }\n      }, mess.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n        src: mess.user_receive.user_avatar,\n        alt: mess.user_receive.user_last_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(Image, {\n        cloudName: \"mohi-vn\",\n        publicId: mess.user_receive.user_avatar + \".jpg\",\n        version: \"1607061343\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Transformation, {\n        height: mess.user_receive.user_avatar_cropH,\n        width: mess.user_receive.user_avatar_cropW,\n        x: mess.user_receive.user_avatar_cropX,\n        y: mess.user_receive.user_avatar_cropY,\n        crop: \"crop\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 35\n        }\n      }))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"clear\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-user-chat\",\n        ref: index === 0 ? lastMessage : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-user-chat-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-messenger-user-chat-content-avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }\n      }, mess.user_send.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n        src: mess.user_send.user_avatar,\n        alt: mess.user_send.user_last_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(Image, {\n        cloudName: \"mohi-vn\",\n        publicId: mess.user_send.user_avatar + \".jpg\",\n        version: \"1607061343\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Transformation, {\n        height: mess.user_send.user_avatar_cropH,\n        width: mess.user_send.user_avatar_cropW,\n        x: mess.user_send.user_avatar_cropX,\n        y: mess.user_send.user_avatar_cropY,\n        crop: \"crop\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 35\n        }\n      }))), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      }, mess.messages_Message))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"clear\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }\n      }));\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"preview-image-send\",\n    style: newImageMess || newVideoMess ? {\n      display: 'block'\n    } : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"preview-image-send-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AiFillCloseCircle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 23\n    }\n  }), newImageMess && /*#__PURE__*/React.createElement(\"img\", {\n    src: newImageMess,\n    alt: \"Tin nh\\u1EAFn h\\xECnh \\u1EA3nh\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }), newVideoMess && /*#__PURE__*/React.createElement(\"video\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: newVideoMess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 27\n    }\n  }), \"Your browser does not support HTML5 video.\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-input-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"send_image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(BsImage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 47\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: onChangeSendImage,\n    style: {\n      opacity: 0,\n      visibility: 'hidden',\n      width: 0\n    },\n    id: \"send_image\",\n    type: \"file\",\n    accept: \"image/png, image/jpg, image/jpeg, video/ogg, video/mp4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-input-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EditorEmoji, {\n    changeStatusButtonSubmit: changeStatusButtonSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-head-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, infoUser.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: infoUser.user_avatar,\n    alt: infoUser.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: infoUser.user_avatar + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: infoUser.user_avatar_cropH,\n    width: infoUser.user_avatar_cropW,\n    x: infoUser.user_avatar_cropX,\n    y: infoUser.user_avatar_cropY,\n    crop: \"crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-head-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, infoUser.user_first_name + ' ' + infoUser.user_last_name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-support\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-support-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-support-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, \"\\u1EA2nh \\u0111\\xE3 chia s\\u1EBB\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-messenger-body-right-list-iamge-share-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      backgroundImage: 'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 25\n    }\n  })))))))));\n};","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Messenger/ContentMessenger.jsx"],"names":["React","useState","useEffect","useRef","useCallback","FaSmile","GiPhone","Image","Transformation","BsSearch","BsFillCameraVideoFill","BsThreeDotsVertical","BsImage","BsPencilSquare","AiTwotoneSetting","AiTwotoneLike","AiFillFile","AiFillCamera","AiFillCloseCircle","Row","Spin","useWindowSize","EditorEmoji","useSelector","useDispatch","useParams","setCurrentOneMessage","ContentMessenger","props","oneMessage","idUser","observer","keepScrollToBottom","dispatch","list","infoUser","loading","hasMore","loadingMore","state","heightContent","window","innerHeight","setupFakeName","setSetupFakeName","heightContentBody","setHeightContentBody","height","windowSize","heightRoom","setHeightRoom","showSearchRoomChat","setShowSearchRoomChat","newImageMess","setNewImageMess","newVideoMess","setNewVideoMess","currentUser","JSON","parse","localStorage","getItem","info","getMessageOneUser","current","scrollTop","scrollHeight","changeStatusButtonSubmit","value","lastMessage","node","disconnect","IntersectionObserver","entries","isIntersecting","observe","setupFakeNameFunc","saveFakeNameFunc","showSearchRoomChatFunc","hideSearchRoomChatFunc","onChangeSendImage","e","file","target","files","blobUrl","URL","createObjectURL","type","console","log","display","alignItems","justifyContent","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_first_name","textAlign","background","marginBottom","borderRadius","padding","map","mess","index","messages_From","id","messages_Message","user_receive","user_send","opacity","visibility","width","backgroundImage"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef, useCallback} from 'react';\r\nimport {FaSmile} from 'react-icons/fa';\r\nimport {GiPhone} from 'react-icons/gi';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {BsSearch, BsFillCameraVideoFill, BsThreeDotsVertical, BsImage, BsPencilSquare} from 'react-icons/bs';\r\nimport {AiTwotoneSetting, AiTwotoneLike, AiFillFile, AiFillCamera, AiFillCloseCircle} from 'react-icons/ai';\r\nimport {Row, Spin} from 'antd';\r\nimport useWindowSize from \"./useWindowSize.jsx\";\r\nimport EditorEmoji from \"./EditorEmoji.jsx\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport {setCurrentOneMessage} from './../../Actions/index.jsx';\r\n\r\nexport const ContentMessenger = (props, {oneMessage}) => {\r\n  const {idUser} = useParams();\r\n  const observer = useRef();\r\n  const keepScrollToBottom = useRef();\r\n  const dispatch = useDispatch();\r\n  const {list, infoUser, loading, hasMore, loadingMore} = useSelector(state => state.oneMessage);\r\n  const heightContent = window.innerHeight - 134;\r\n  const [setupFakeName, setSetupFakeName] = useState(false)\r\n  const [heightContentBody, setHeightContentBody] = useState({height: heightContent})\r\n  const windowSize = useWindowSize();\r\n  const [heightRoom, setHeightRoom] = useState({height: heightContent - 56})\r\n  const [showSearchRoomChat, setShowSearchRoomChat] = useState(false)\r\n  const [newImageMess, setNewImageMess] = useState();\r\n  const [newVideoMess, setNewVideoMess] = useState();\r\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n\r\n  useEffect(() => {\r\n    props.getMessageOneUser(idUser)\r\n  }, [idUser])\r\n\r\n  useEffect(() => {\r\n    if(keepScrollToBottom.current) {\r\n        keepScrollToBottom.current.scrollTop = keepScrollToBottom.current.scrollHeight;\r\n    }\r\n  }, [loading])\r\n\r\n  useEffect(() => {\r\n    setHeightContentBody({height: heightContent})\r\n    setHeightRoom({height: heightContent - 56})\r\n  },[windowSize])\r\n\r\n  const changeStatusButtonSubmit = (value) => {\r\n\r\n  }\r\n\r\n  const lastMessage = useCallback(node => {\r\n    if(loadingMore) return\r\n      if(observer.current) observer.current.disconnect()\r\n      observer.current = new IntersectionObserver(entries => {\r\n        if(entries[0].isIntersecting && hasMore){\r\n          dispatch(setCurrentOneMessage())\r\n          keepScrollToBottom.current.scrollTop = 500;\r\n        }\r\n      })\r\n    if(node) observer.current.observe(node)\r\n  }, [loadingMore, hasMore])\r\n\r\n  function setupFakeNameFunc(){\r\n    setSetupFakeName(true)\r\n  }\r\n\r\n  function saveFakeNameFunc(){\r\n    setSetupFakeName(false)\r\n  }\r\n\r\n  function showSearchRoomChatFunc(){\r\n    setShowSearchRoomChat(true)\r\n  }\r\n\r\n  function hideSearchRoomChatFunc(){\r\n    setShowSearchRoomChat(false)\r\n  }\r\n\r\n  const onChangeSendImage = (e) => {\r\n      let file = e.target.files[0];\r\n      let blobUrl = URL.createObjectURL(file)\r\n\r\n      if(file.type === 'video/ogg' || file.type === 'video/mp4'){\r\n        setNewVideoMess(blobUrl)\r\n        setNewImageMess()\r\n      }\r\n      if(file.type === 'image/png' || file.type === 'image/jpg' || file.type === 'image/jpeg'){\r\n        setNewImageMess(blobUrl)\r\n        setNewVideoMess()\r\n      }\r\n      console.log(file);\r\n  }\r\n\r\n    if(loading){\r\n      return(\r\n        <div className=\"content-messenger-container\" style={{display: 'flex', alignItems:'center', justifyContent: 'center'}}>\r\n          <Spin />\r\n        </div>\r\n      )\r\n    }\r\n      return(\r\n        <div className=\"content-messenger-container\">\r\n          <div className=\"content-messenger-head\">\r\n            <div className=\"content-messenger-info\">\r\n              <div className=\"content-messenger-info-avatar\">\r\n                {infoUser.user_avatar_cropX === null ?\r\n                  <img src={infoUser.user_avatar} alt={infoUser.user_last_name} />\r\n                  :\r\n                  <Image cloudName=\"mohi-vn\" publicId={infoUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                    <Transformation height={infoUser.user_avatar_cropH}  width={infoUser.user_avatar_cropW} x={infoUser.user_avatar_cropX} y={infoUser.user_avatar_cropY} crop=\"crop\" />\r\n                  </Image>\r\n                }\r\n              </div>\r\n              <div>\r\n                <div className=\"content-messenger-info-name\">{infoUser.user_first_name + ' ' + infoUser.user_last_name}</div>\r\n                <div className=\"content-messenger-info-status\"><span>Đang hoạt động</span> <p></p></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"content-messenger-option\">\r\n              <GiPhone />\r\n              <BsFillCameraVideoFill />\r\n              <BsThreeDotsVertical />\r\n            </div>\r\n          </div>\r\n          <div className=\"content-messenger-body\" style={heightContentBody}>\r\n            <div className=\"content-messenger-body-left\" >\r\n              <div className=\"content-messenger-room\" style={heightRoom} ref={keepScrollToBottom}>\r\n                {loadingMore && <div style={{textAlign: 'center', background: 'rgba(0,128,128,0.3)', marginBottom: '10px', borderRadius: '3px', padding: '3px' }}>Đang tải thêm tin nhắn vui lòng đợi...</div>}\r\n                {list.map((mess, index) => {\r\n                  if(mess.messages_From === currentUser.id){\r\n                    console.log(mess);\r\n                    return(\r\n                      <React.Fragment key={index}>\r\n                        <div className=\"content-messenger-my-chat\" ref={index === 0 ? lastMessage : null}>\r\n                          <div className=\"content-messenger-my-chat-content\">\r\n                            <p>{mess.messages_Message}</p>\r\n                            <div className=\"content-messenger-my-chat-content-status\">\r\n                              {mess.user_avatar_cropX === null ?\r\n                                <img src={mess.user_receive.user_avatar} alt={mess.user_receive.user_last_name} />\r\n                                :\r\n                                <Image cloudName=\"mohi-vn\" publicId={mess.user_receive.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                  <Transformation height={mess.user_receive.user_avatar_cropH}  width={mess.user_receive.user_avatar_cropW} x={mess.user_receive.user_avatar_cropX} y={mess.user_receive.user_avatar_cropY} crop=\"crop\" />\r\n                                </Image>\r\n                              }\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"clear\"></div>\r\n                      </React.Fragment>\r\n                    )\r\n                  }else {\r\n                    return(\r\n                      <React.Fragment key={index}>\r\n                        <div className=\"content-messenger-user-chat\" ref={index === 0 ? lastMessage : null}>\r\n                          <div className=\"content-messenger-user-chat-content\">\r\n                            <div className=\"content-messenger-user-chat-content-avatar\">\r\n                              {mess.user_send.user_avatar_cropX === null ?\r\n                                <img src={mess.user_send.user_avatar} alt={mess.user_send.user_last_name} />\r\n                                :\r\n                                <Image cloudName=\"mohi-vn\" publicId={mess.user_send.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                  <Transformation height={mess.user_send.user_avatar_cropH}  width={mess.user_send.user_avatar_cropW} x={mess.user_send.user_avatar_cropX} y={mess.user_send.user_avatar_cropY} crop=\"crop\" />\r\n                                </Image>\r\n                              }\r\n                            </div>\r\n                            <p>{mess.messages_Message}</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"clear\"></div>\r\n                      </React.Fragment>\r\n                    )\r\n                  }\r\n                })}\r\n              </div>\r\n              <div className=\"content-messenger-input\">\r\n                  <div className=\"preview-image-send\" style={newImageMess || newVideoMess ? {display: 'block'} : null}>\r\n                    <div className=\"preview-image-send-img\">\r\n                      <AiFillCloseCircle />\r\n                      {newImageMess &&\r\n                        <img src={newImageMess} alt=\"Tin nhắn hình ảnh\" />\r\n                      }\r\n                      {newVideoMess &&\r\n                        <video>\r\n                          <source src={newVideoMess} />\r\n                          Your browser does not support HTML5 video.\r\n                        </video>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                <div className=\"content-messenger-input-file\">\r\n                  <label htmlFor=\"send_image\"><BsImage /></label>\r\n                  <input\r\n                    onChange={onChangeSendImage}\r\n                    style={{opacity: 0, visibility: 'hidden', width: 0}}\r\n                    id=\"send_image\"\r\n                    type=\"file\"\r\n                    accept=\"image/png, image/jpg, image/jpeg, video/ogg, video/mp4\"\r\n                  />\r\n                </div>\r\n                <div className=\"content-messenger-input-text\">\r\n                  <EditorEmoji changeStatusButtonSubmit={changeStatusButtonSubmit} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"content-messenger-body-right\">\r\n              <div className=\"content-messenger-body-right-title\">\r\n                <div className=\"content-messenger-body-right-head\">\r\n                  <div className=\"content-messenger-body-right-head-avatar\">\r\n                    {infoUser.user_avatar_cropX === null ?\r\n                      <img src={infoUser.user_avatar} alt={infoUser.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={infoUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={infoUser.user_avatar_cropH}  width={infoUser.user_avatar_cropW} x={infoUser.user_avatar_cropX} y={infoUser.user_avatar_cropY} crop=\"crop\" />\r\n                      </Image>\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <div className=\"content-messenger-body-right-head-name\">\r\n                  {infoUser.user_first_name + ' ' + infoUser.user_last_name}\r\n                </div>\r\n              </div>\r\n              <div className=\"content-messenger-body-right-support\">\r\n                <div className=\"content-messenger-body-right-support-item\">\r\n                  <div className=\"content-messenger-body-right-support-title\">\r\n                    Ảnh đã chia sẻ\r\n                  </div>\r\n                  <div className=\"content-messenger-body-right-list-iamge-share\">\r\n                    <Row>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                      <div className=\"content-messenger-body-right-list-iamge-share-item\">\r\n                        <i style={{backgroundImage:'url(\"https://scontent.fvca1-1.fna.fbcdn.net/v/t1.0-0/s600x600/120467372_1235184720184447_7169794468845396216_o.jpg?_nc_cat=103&_nc_sid=8024bb&_nc_ohc=orfey83uSHgAX_dn_Hh&_nc_ht=scontent.fvca1-1.fna&tp=7&oh=b1548bb34d2694c57b096aee2e8cde2c&oe=5F9F0901\")'}}></i>\r\n                      </div>\r\n                    </Row>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}