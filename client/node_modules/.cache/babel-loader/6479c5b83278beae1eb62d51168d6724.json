{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from'react';import{AiFillPicture}from'react-icons/ai';import{Link,Route,Switch}from'react-router-dom';import{Image,Transformation}from'cloudinary-react';import{FaCommentAlt,FaRegSmile}from'react-icons/fa';import{BsThreeDotsVertical}from'react-icons/bs';import'./Notifications.css';import moment from'moment';import{useSelector,useDispatch}from'react-redux';import{Spin,Tooltip}from'antd';import axios from'axios';import{removeOneNoti}from'./../../Actions/index.jsx';function Notifications(_ref){var notifycations=_ref.notifycations;var _useSelector=useSelector(function(state){return state.notifycations;}),list=_useSelector.list,loading=_useSelector.loading;var dispatch=useDispatch();var removeNoti=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(removeOneNoti(id));_context.next=3;return axios.post('https://www.api.mohi.vn/api/auth/delete-notification',{id:id});case 3:case\"end\":return _context.stop();}}},_callee);}));return function removeNoti(_x){return _ref2.apply(this,arguments);};}();moment.updateLocale('en',{relativeTime:{future:\"%s\",past:\"%s\",s:'vài giây',ss:'%d phút',m:\"1 phút\",mm:\"%d phút\",h:\"%d giờ\",hh:\"%d giờ\",d:\"một ngày\",dd:\"%d ngày\",w:\"một tuần\",ww:\"%d tuần\",M:\"một tháng\",MM:\"%d tháng\",y:\"một năm\",yy:\"%d năm\"}});if(loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"noti-all\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-container\",style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh'}},/*#__PURE__*/React.createElement(Spin,null)));}if(!loading&&!list.length){return/*#__PURE__*/React.createElement(\"div\",{className:\"noti-all\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-title\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Th\\xF4ng b\\xE1o c\\u1EE7a b\\u1EA1n\")),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh'}},\"B\\u1EA1n ch\\u01B0a c\\xF3 th\\xF4ng b\\xE1o\")));}var Notifications=function Notifications(){return/*#__PURE__*/React.createElement(React.Fragment,null,\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"noti-all\"},\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"noti-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-title\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Th\\xF4ng b\\xE1o c\\u1EE7a b\\u1EA1n\")),list.map(function(noti,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"noti-main-content\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-content-avatar\"},noti.notifications_send.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:noti.notifications_send.user_avatar,alt:noti.notifications_send.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:noti.notifications_send.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:noti.notifications_send.user_avatar_cropH,width:noti.notifications_send.user_avatar_cropW,x:noti.notifications_send.user_avatar_cropX,y:noti.notifications_send.user_avatar_cropY,crop:\"crop\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"noti-content\"},/*#__PURE__*/React.createElement(Link,{to:\"/post/\"+noti.notification_PostIdFake,style:{color:'black'}},/*#__PURE__*/React.createElement(\"div\",{className:\"noti-notification\"},/*#__PURE__*/React.createElement(\"b\",{style:{color:'rgba(0,128,128'}},noti.notifications_send.user_first_name+' '+noti.notifications_send.user_last_name,\" \"),noti.notification_Content,JSON.parse(localStorage.getItem('ustk')).info.id===noti.notification_AdminPostId?' bạn':/*#__PURE__*/React.createElement(\"b\",{style:{color:'rgba(0,128,128'}},\"  \",noti.notifications_admin_post.user_first_name+' '+noti.notifications_admin_post.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"noti-status\"},noti.notification_Action==='comment'?/*#__PURE__*/React.createElement(FaCommentAlt,null):/*#__PURE__*/React.createElement(FaRegSmile,null),\" \",moment(moment.utc(noti.created_at).toDate()).fromNow()))),/*#__PURE__*/React.createElement(\"div\",{style:{padding:'10px 5px',cursor:'pointer'}},/*#__PURE__*/React.createElement(Tooltip,{trigger:\"click\",placement:\"bottom\",title:/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return removeNoti(noti.id);},style:{background:'white',padding:'5px',boderRadius:'2px',cursor:'pointer',color:'black'}},\"X\\xF3a th\\xF4ng b\\xE1o\")},/*#__PURE__*/React.createElement(BsThreeDotsVertical,null))));}))));};return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{component:Notifications}));}export default Notifications;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Notifications/Notifications.jsx"],"names":["React","AiFillPicture","Link","Route","Switch","Image","Transformation","FaCommentAlt","FaRegSmile","BsThreeDotsVertical","moment","useSelector","useDispatch","Spin","Tooltip","axios","removeOneNoti","Notifications","notifycations","state","list","loading","dispatch","removeNoti","id","post","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","length","display","alignItems","justifyContent","height","map","noti","index","notifications_send","user_avatar_cropX","user_avatar","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","notification_PostIdFake","color","user_first_name","notification_Content","JSON","parse","localStorage","getItem","info","notification_AdminPostId","notifications_admin_post","notification_Action","utc","created_at","toDate","fromNow","padding","cursor","background","boderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {AiFillPicture} from 'react-icons/ai';\r\nimport {Link, Route, Switch} from 'react-router-dom';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport {FaCommentAlt, FaRegSmile} from 'react-icons/fa';\r\nimport {BsThreeDotsVertical} from 'react-icons/bs';\r\nimport './Notifications.css';\r\nimport moment from 'moment';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {Spin, Tooltip} from 'antd';\r\nimport axios from 'axios';\r\nimport {removeOneNoti} from './../../Actions/index.jsx';\r\n\r\nfunction Notifications({notifycations}) {\r\n  const {list, loading} = useSelector(state => state.notifycations);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const removeNoti = async (id) => {\r\n      dispatch(removeOneNoti(id))\r\n\r\n      await axios.post('https://www.api.mohi.vn/api/auth/delete-notification', {id: id})\r\n  }\r\n\r\n  moment.updateLocale('en', {\r\n    relativeTime : {\r\n        future: \"%s\",\r\n        past:   \"%s\",\r\n        s  : 'vài giây',\r\n        ss : '%d phút',\r\n        m:  \"1 phút\",\r\n        mm: \"%d phút\",\r\n        h:  \"%d giờ\",\r\n        hh: \"%d giờ\",\r\n        d:  \"một ngày\",\r\n        dd: \"%d ngày\",\r\n        w:  \"một tuần\",\r\n        ww: \"%d tuần\",\r\n        M:  \"một tháng\",\r\n        MM: \"%d tháng\",\r\n        y:  \"một năm\",\r\n        yy: \"%d năm\"\r\n    }\r\n  });\r\n\r\n  if (loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          height: '100vh'\r\n        }}>\r\n        <Spin/>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  if (!loading && !list.length) {\r\n    return (<div className=\"noti-all\">\r\n      <div className=\"noti-container\" >\r\n        <div className=\"noti-title\">\r\n          <h4>\r\n            Thông báo của bạn</h4>\r\n        </div>\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '100vh'\r\n          }}>Bạn chưa có thông báo</div>\r\n      </div>\r\n    </div>)\r\n  }\r\n\r\n  const Notifications = () => {\r\n    return (<> < div className = \"noti-all\" > <div className=\"noti-container\">\r\n      <div className=\"noti-title\">\r\n        <h4>\r\n          Thông báo của bạn</h4>\r\n      </div>\r\n      {list.map((noti, index) => {\r\n        return(\r\n          <div className=\"noti-main-content\" key={index}>\r\n            <div className=\"noti-content-avatar\">\r\n              {noti.notifications_send.user_avatar_cropX === null ?\r\n                <img src={noti.notifications_send.user_avatar} alt={noti.notifications_send.user_last_name} />\r\n                :\r\n                <Image cloudName=\"mohi-vn\" publicId={noti.notifications_send.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                  <Transformation height={noti.notifications_send.user_avatar_cropH}  width={noti.notifications_send.user_avatar_cropW} x={noti.notifications_send.user_avatar_cropX} y={noti.notifications_send.user_avatar_cropY} crop=\"crop\" />\r\n                </Image>\r\n              }\r\n          </div>\r\n            <div className=\"noti-content\">\r\n              <Link to={\"/post/\" + noti.notification_PostIdFake} style={{color: 'black'}}>\r\n              <div className=\"noti-notification\">\r\n                <b style={{color: 'rgba(0,128,128'}} >{noti.notifications_send.user_first_name + ' ' + noti.notifications_send.user_last_name} </b>\r\n                {noti.notification_Content}\r\n                {JSON.parse(localStorage.getItem('ustk')).info.id === noti.notification_AdminPostId ? ' bạn'  : <b style={{color: 'rgba(0,128,128'}} >  {noti.notifications_admin_post.user_first_name + ' ' + noti.notifications_admin_post.user_last_name}</b>}\r\n              </div>\r\n              <div className=\"noti-status\">\r\n                  {noti.notification_Action === 'comment' ? <FaCommentAlt/> : <FaRegSmile />} {moment(moment.utc(noti.created_at).toDate()).fromNow()}\r\n              </div>\r\n            </Link>\r\n            </div>\r\n            <div style={{padding: '10px 5px', cursor: 'pointer'}}>\r\n              <Tooltip\r\n                trigger={`click`}\r\n                placement={`bottom`}\r\n                title={\r\n                  <div\r\n                    onClick={() => removeNoti(noti.id)}\r\n                    style={{\r\n                      background: 'white',\r\n                     padding: '5px',\r\n                     boderRadius: '2px',\r\n                     cursor: 'pointer',\r\n                     color:'black'\r\n                   }}\r\n                  >\r\n                    Xóa thông báo\r\n                  </div>\r\n                }\r\n              >\r\n                <BsThreeDotsVertical/>\r\n              </Tooltip>\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  </div>\r\n</>)\r\n  }\r\n  return (<Switch>\r\n    <Route component={Notifications}/>\r\n  </Switch>)\r\n}\r\nexport default Notifications;\r\n"]},"metadata":{},"sourceType":"module"}