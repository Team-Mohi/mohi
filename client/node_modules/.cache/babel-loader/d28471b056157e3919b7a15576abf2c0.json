{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport Axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { fetchPosts } from './../../Actions/index.jsx';\nexport default function InfiniteScrolling(pageNumber) {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    Axios({\n      method: 'GET',\n      url: \"/api/auth/get-post-home\",\n      params: {\n        page: pageNumber\n      },\n      cancelToken: new Axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      dispatch(fetchPosts(res.data.data));\n      setHasMore(res.data.last_page > res.data.current_page);\n      setLoading(false);\n    }).catch(e => {\n      if (Axios.isCancel(e)) return;\n      setError(true);\n    });\n    return () => cancel();\n  }, [pageNumber]);\n  return {\n    loading,\n    error,\n    hasMore\n  };\n}","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/InfiniteScrolling.jsx"],"names":["React","useEffect","useState","Axios","useDispatch","fetchPosts","InfiniteScrolling","pageNumber","loading","setLoading","error","setError","hasMore","setHasMore","dispatch","cancel","method","url","params","page","cancelToken","CancelToken","c","then","res","data","last_page","current_page","catch","e","isCancel"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAASC,UAAT,QAA2B,2BAA3B;AAEA,eAAe,SAASC,iBAAT,CAA2BC,UAA3B,EAAsC;AACnD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMY,QAAQ,GAAGV,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,QAAII,MAAJ;AACAZ,IAAAA,KAAK,CAAC;AACJa,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,yBAFD;AAGJC,MAAAA,MAAM,EAAE;AAACC,QAAAA,IAAI,EAAGZ;AAAR,OAHJ;AAIJa,MAAAA,WAAW,EAAG,IAAIjB,KAAK,CAACkB,WAAV,CAAsBC,CAAC,IAAIP,MAAM,GAAGO,CAApC;AAJV,KAAD,CAAL,CAMCC,IAND,CAMMC,GAAG,IAAG;AACVV,MAAAA,QAAQ,CAACT,UAAU,CAACmB,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAX,CAAR;AACAZ,MAAAA,UAAU,CAACW,GAAG,CAACC,IAAJ,CAASC,SAAT,GAAqBF,GAAG,CAACC,IAAJ,CAASE,YAA/B,CAAV;AACAlB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAVD,EAWCmB,KAXD,CAWOC,CAAC,IAAI;AACV,UAAG1B,KAAK,CAAC2B,QAAN,CAAeD,CAAf,CAAH,EAAsB;AACtBlB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,KAdD;AAeA,WAAO,MAAMI,MAAM,EAAnB;AACD,GApBQ,EAoBN,CAACR,UAAD,CApBM,CAAT;AAqBE,SAAO;AAAEC,IAAAA,OAAF;AAAWE,IAAAA,KAAX;AAAkBE,IAAAA;AAAlB,GAAP;AACH","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Axios from 'axios';\r\nimport {useDispatch} from 'react-redux';\r\nimport { fetchPosts } from './../../Actions/index.jsx';\r\n\r\nexport default function InfiniteScrolling(pageNumber){\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(false)\r\n  const [hasMore, setHasMore] = useState(false)\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    setError(false)\r\n    let cancel\r\n    Axios({\r\n      method: 'GET',\r\n      url: \"/api/auth/get-post-home\",\r\n      params: {page : pageNumber},\r\n      cancelToken : new Axios.CancelToken(c => cancel = c)\r\n    })\r\n    .then(res =>{\r\n      dispatch(fetchPosts(res.data.data))\r\n      setHasMore(res.data.last_page > res.data.current_page)\r\n      setLoading(false)\r\n    })\r\n    .catch(e => {\r\n      if(Axios.isCancel(e)) return\r\n      setError(true)\r\n    })\r\n    return () => cancel()\r\n  }, [pageNumber])\r\n    return { loading, error, hasMore }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}