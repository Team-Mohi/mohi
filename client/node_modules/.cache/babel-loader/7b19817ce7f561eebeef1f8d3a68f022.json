{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\Profiles\\\\MyProfile\\\\HeaderProfile.jsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { AiFillCamera } from \"react-icons/ai\";\nimport { FaUserPlus, FaUserCheck, FaCheck, FaUserClock } from \"react-icons/fa\";\nimport { BsThreeDots, BsPencil } from \"react-icons/bs\";\nimport { PUBLIC_URL } from \"./../../../Constants/public.jsx\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Tooltip, Spin } from 'antd';\nimport axios from 'axios';\nimport { toggleStatusPresentialModal } from './../../../Actions/index.jsx';\nimport { Image, Transformation } from 'cloudinary-react';\nimport { WaveLoading } from 'react-loadingg';\nimport { responseUpdateCover } from './../../../Actions/index.jsx';\nimport { requestUpdateCover } from './../../../Actions/index.jsx';\n\nfunction HeaderProfile({\n  profile,\n  friends,\n  friendsRequest\n}) {\n  const refHeader = useRef();\n  const refCoverImg = useRef();\n  const refCover = useRef();\n  const {\n    friendOfProfile,\n    list,\n    loadingfriendOfProfile\n  } = useSelector(state => state.friends);\n  const listUserRequest = useSelector(state => state.friendsRequest.list);\n  const listMyRequest = useSelector(state => state.friendsRequest.listMyRequest);\n  const [toggleSpan, setToggleSpan] = useState();\n  const [toggleTopLeft, setToggleTopLeft] = useState();\n  const [styleHeader, setStyleHeader] = useState(false);\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\n  const {\n    loading,\n    info,\n    loadingUpdateCover\n  } = useSelector(state => state.profile);\n  const {\n    idProfile\n  } = useParams();\n  const mutialFriend = [];\n  const [statusFollow, setStatusFollow] = useState();\n  const [loadingRequest, setLoadingRequest] = useState(false);\n  const dispatch = useDispatch();\n  const [isChangeCover, setIsChangeCover] = useState(false);\n  const [newCover, setNewCover] = useState();\n  const [isDown, setIsDown] = useState(false);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [scrollTop, setScrollTop] = useState(0);\n  const [clientX, setClientX] = useState(0);\n  const [clientY, setClientY] = useState(0);\n  const [widthNewCover, setWidthNewCover] = useState(0);\n  const [userCoverY, setUserCoverY] = useState(0);\n  const [userCoverX, setUserCoverX] = useState(0);\n\n  const handleImageLoad = e => {\n    setWidthNewCover(e.target.naturalWidth);\n  };\n\n  friendOfProfile.map(fr => {\n    list.map(f => {\n      if (fr.id === f.id) mutialFriend.push(fr);\n    });\n  });\n\n  const uploadCover = e => {\n    setNewCover(e.target.files[0]);\n    setIsChangeCover(true);\n  };\n\n  const saveCoverProfile = async () => {\n    dispatch(requestUpdateCover());\n    const formData = new FormData();\n    formData.append('upload_preset', 'mohi_video');\n    formData.append('file', newCover);\n    await axios.post('/v1_1/mohi-vn/upload', formData).then(res => {\n      saveCoverProfileBe(res.data.public_id);\n    });\n  };\n\n  const saveCoverProfileBe = async cover => {\n    let data = {\n      user_cover: cover,\n      user_cover_cropX: userCoverX,\n      user_cover_cropY: userCoverY\n    };\n    await axios.post(\"https://www.api.mohi.vn/api/auth/update-info-profile\", data).then(res => {\n      dispatch(responseUpdateCover({\n        user_cover: cover,\n        user_cover_cropX: Math.round(userCoverX),\n        user_cover_cropY: Math.round(userCoverY)\n      }));\n      let ustk = JSON.parse(localStorage.getItem('ustk'));\n      ustk.info.user_cover = cover;\n      ustk.info.user_cover_cropX = Math.round(userCoverX);\n      ustk.info.user_cover_cropY = Math.round(userCoverY);\n      localStorage.setItem('ustk', JSON.stringify(ustk));\n      setIsChangeCover(false);\n    });\n  };\n\n  const onMouseDownCover = e => {\n    const {\n      scrollLeft,\n      scrollTop\n    } = refCover.current;\n    setIsDown(true);\n    setScrollLeft(scrollLeft);\n    setScrollTop(scrollTop);\n    setClientX(e.clientX);\n    setClientY(e.clientY);\n  };\n\n  const onMouseUpCover = e => {\n    setIsDown(false);\n    setScrollLeft(0);\n    setScrollTop(0);\n    setClientX(0);\n    setClientY(0);\n  };\n\n  const onMouseMoveCover = e => {\n    if (!isDown) return;\n    const scrollCover = refCover.current;\n    scrollCover.scrollLeft = scrollLeft + clientX - e.clientX;\n    scrollCover.scrollTop = scrollTop + clientY - e.clientY;\n    setUserCoverX(scrollCover.scrollLeft);\n    setUserCoverY(scrollCover.scrollTop);\n  };\n\n  const uploadAvatar = e => {\n    const file = e.target.files[0];\n    dispatch(toggleStatusPresentialModal('modal_upload_avatar_profile', file));\n  };\n\n  useEffect(() => {\n    document.addEventListener('scroll', fixedOptionHead, false);\n    return () => {\n      document.removeEventListener('scroll', removeFixedOptionHead, false);\n    };\n  });\n\n  const fixedOptionHead = () => {\n    let curentRef = refHeader.current;\n\n    if (curentRef) {\n      if (window.scrollY - 464 > 0) {\n        setStyleHeader(true);\n      } else {\n        setStyleHeader(false);\n      }\n    }\n  };\n\n  const removeFixedOptionHead = () => {\n    setStyleHeader(false);\n  };\n\n  function handleShow() {\n    setToggleSpan({\n      visibility: 'visible'\n    });\n    setToggleTopLeft({\n      background: 'rgba(0,0,0,0.3)',\n      border: '2px solid white ',\n      borderRadius: '3px'\n    });\n  }\n\n  function handleHide() {\n    setToggleSpan({\n      visibility: 'hidden'\n    });\n    setToggleTopLeft({\n      background: 'none',\n      border: '2px solid transparent '\n    });\n  }\n\n  const addFriendFunc = async idUser => {\n    setLoadingRequest(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\", {\n      follow_users_ReceivedUser: idUser\n    }).then(res => {\n      setLoadingRequest(false);\n      setStatusFollow('send_request');\n    });\n  };\n\n  const unFriendFunc = async idUser => {\n    setLoadingRequest(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {\n      id: idUser,\n      action: 'unfriend'\n    }).then(res => {\n      setLoadingRequest(false);\n      setStatusFollow('remove_friend');\n    });\n  };\n\n  const unMyRequestFriendFunc = async idUser => {\n    setLoadingRequest(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {\n      id: idUser,\n      action: 'unRequestFriend'\n    }).then(res => {\n      setLoadingRequest(false);\n      setStatusFollow('remove_request');\n    });\n  };\n\n  const acceptFriendFunc = async idUser => {\n    setLoadingRequest(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\", {\n      follow_users_UserId: idUser\n    }).then(res => {\n      setLoadingRequest(false);\n      setStatusFollow('accept_request');\n    });\n  };\n\n  const refuseFriendFunc = async idUser => {\n    setLoadingRequest(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {\n      id: idUser,\n      action: 'refuseFriend'\n    }).then(res => {\n      setLoadingRequest(false);\n      setStatusFollow('refuse_request');\n    });\n  };\n\n  console.log(loadingUpdateCover);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-cover\",\n    onMouseOver: () => handleShow(),\n    onMouseOut: () => handleHide(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-cover-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `profile-header-cover-img ${isChangeCover ? `cursor-move-cover` : null}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, isChangeCover ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: refCover,\n    className: \"profile-header-cover-img-move\",\n    style: {\n      overflow: \"auto\",\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0\n    },\n    onMouseMove: onMouseMoveCover,\n    onMouseDown: onMouseDownCover,\n    onMouseUp: onMouseUpCover,\n    onMouseLeave: onMouseUpCover,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    style: {\n      width: '100%',\n      height: 'auto'\n    },\n    src: URL.createObjectURL(newCover),\n    alt: info.user_first_name + ' ' + info.user_last_name,\n    ref: refCoverImg,\n    onLoad: handleImageLoad,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 23\n    }\n  }), loadingUpdateCover && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: 'rgba(255,255,255,0.7)',\n      position: 'absolute',\n      width: '100%',\n      height: '100%',\n      top: 0,\n      left: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 47\n    }\n  }, /*#__PURE__*/React.createElement(WaveLoading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 168\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }, info.user_cover_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: info.user_cover,\n    alt: info.user_first_name + ' ' + info.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: info.user_cover + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: 400,\n    width: 1136,\n    x: info.user_cover_cropX,\n    y: info.user_cover_cropY,\n    crop: \"imagga_crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  }))))), idProfile === currentUser.user_username && !isChangeCover && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-cover-top-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"update-cover\",\n    style: toggleTopLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiFillCamera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    style: toggleSpan,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }, \"C\\u1EADp nh\\u1EADp \\u1EA3nh b\\xECa\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"update-cover\",\n    accept: \"image/*\",\n    onChange: uploadCover,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  })), !isChangeCover ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-cover-bottom-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  }, idProfile === currentUser.user_username ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-view-history-action-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + info.user_username + '/activity-log',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 83\n    }\n  }, /*#__PURE__*/React.createElement(BsThreeDots, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 105\n    }\n  }), \" Nh\\u1EADt k\\xED ho\\u1EA1t \\u0111\\u1ED9ng\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-view-history-action-profile user-profile-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 19\n    }\n  }, list.filter(f => f.id === info.id).length ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 23\n    }\n  }, !statusFollow && /*#__PURE__*/React.createElement(Tooltip, {\n    placement: `bottom`,\n    trigger: `click`,\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '5px 10px',\n        cursor: 'pointer'\n      },\n      onClick: () => unFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 31\n      }\n    }, \"H\\u1EE7y k\\u1EBFt b\\u1EA1n\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FaUserCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 38\n    }\n  }), \" B\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 80\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 21\n    }\n  }, listUserRequest.filter(f => f.id === info.id).length ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 25\n    }\n  }, !statusFollow && /*#__PURE__*/React.createElement(Tooltip, {\n    placement: `bottom`,\n    trigger: `click`,\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '5px 10px',\n        cursor: 'pointer'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => acceptFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 33\n      }\n    }, \"X\\xE1c nh\\u1EADn\"), /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => refuseFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 33\n      }\n    }, \"T\\u1EEB ch\\u1ED1i\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(FaUserClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 39\n    }\n  }), \" Tr\\u1EA3 l\\u1EDDi k\\u1EBFt b\\u1EA1n \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 90\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 25\n    }\n  }, listMyRequest.filter(f => f.id === info.id).length ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 29\n    }\n  }, !statusFollow && /*#__PURE__*/React.createElement(Tooltip, {\n    placement: `bottom`,\n    trigger: `click`,\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '5px 10px',\n        cursor: 'pointer'\n      },\n      onClick: () => unMyRequestFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 35\n      }\n    }, \"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(FaCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 39\n    }\n  }), \" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 85\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 29\n    }\n  }, !statusFollow && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addFriendFunc(info.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FaUserPlus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 80\n    }\n  }), \" Th\\xEAm b\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 126\n    }\n  }))))), statusFollow && statusFollow === 'remove_friend' && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addFriendFunc(info.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaUserPlus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 70\n    }\n  }), \" Th\\xEAm b\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 116\n    }\n  })), statusFollow && statusFollow === 'accept_request' && /*#__PURE__*/React.createElement(Tooltip, {\n    placement: `bottom`,\n    trigger: `click`,\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '5px 10px',\n        cursor: 'pointer'\n      },\n      onClick: () => unFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 27\n      }\n    }, \"H\\u1EE7y k\\u1EBFt b\\u1EA1n\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FaUserCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 34\n    }\n  }), \" B\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 76\n    }\n  }))), statusFollow && statusFollow === 'refuse_request' && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addFriendFunc(info.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaUserPlus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 70\n    }\n  }), \" Th\\xEAm b\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 116\n    }\n  })), statusFollow && statusFollow === 'send_request' && /*#__PURE__*/React.createElement(Tooltip, {\n    placement: `bottom`,\n    trigger: `click`,\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: 'rgba(0,0,0,0.8)',\n        color: 'white',\n        padding: '5px 10px',\n        cursor: 'pointer'\n      },\n      onClick: () => unMyRequestFriendFunc(info.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 27\n      }\n    }, \"H\\u1EE7y l\\u1EDDi m\\u1EDDi k\\u1EBFt b\\u1EA1n\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 31\n    }\n  }), \" \\u0110\\xE3 g\\u1EEDi l\\u1EDDi m\\u1EDDi \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 77\n    }\n  }))), statusFollow && statusFollow === 'remove_request' && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addFriendFunc(info.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FaUserPlus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 70\n    }\n  }), \" Th\\xEAm b\\u1EA1n b\\xE8 \", loadingRequest && /*#__PURE__*/React.createElement(Spin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 116\n    }\n  })))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-cover-bottom-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => saveCoverProfile(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }, \"L\\u01B0u\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsChangeCover(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 17\n    }\n  }, \"H\\u1EE7y\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-timeline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar_\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 19\n    }\n  }, info.user_avatar_cropX === null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: info.user_avatar,\n    alt: info.user_last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(Image, {\n    cloudName: \"mohi-vn\",\n    publicId: info.user_avatar + \".jpg\",\n    version: \"1607061343\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Transformation, {\n    height: info.user_avatar_cropH,\n    width: info.user_avatar_cropW,\n    x: info.user_avatar_cropX,\n    y: info.user_avatar_cropY,\n    crop: \"crop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 25\n    }\n  })))), idProfile === currentUser.user_username && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar-select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 61\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar-select-active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-avatar-update\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"update-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AiFillCamera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 21\n    }\n  }, \"C\\u1EADp nh\\u1EADt\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"update-avatar\",\n    accept: \"image/*\",\n    onChange: uploadAvatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 15\n    }\n  }, !loading && info && /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + info.user_username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 38\n    }\n  }, info.user_first_name + ' ' + info.user_last_name), !loading && info.user_nick_name && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 53\n    }\n  }, \"(\", info.user_nick_name, \")\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-header-timeline-container\",\n    ref: refHeader,\n    style: styleHeader ? {\n      position: 'fixed',\n      top: '64px',\n      zIndex: 1000,\n      background: 'white',\n      width: '1140px'\n    } : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"profile-header-navigation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + idProfile + '/timeline',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 19\n    }\n  }, \"D\\xF2ng th\\u1EDDi gian\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + idProfile + '/about',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 19\n    }\n  }, \"Gi\\u1EDBi thi\\u1EC7u\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + idProfile + '/gallery',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 19\n    }\n  }, \"\\u1EA2nh\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: '/profile/' + idProfile + '/friends',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 19\n    }\n  }, \"B\\u1EA1n b\\xE8 \", info.id === currentUser.id ? /*#__PURE__*/React.createElement(\"small\", {\n    style: {\n      color: 'rgba(0,0,0,0.5)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 23\n    }\n  }, list.length && !loadingfriendOfProfile ? list.length : null) : /*#__PURE__*/React.createElement(\"small\", {\n    style: {\n      color: 'rgba(0,0,0,0.5)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 23\n    }\n  }, mutialFriend.length && !loadingfriendOfProfile ? mutialFriend.length + ` bạn chung` : null)))))))));\n}\n\nexport default HeaderProfile;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/HeaderProfile.jsx"],"names":["React","useState","useEffect","useRef","Link","useParams","AiFillCamera","FaUserPlus","FaUserCheck","FaCheck","FaUserClock","BsThreeDots","BsPencil","PUBLIC_URL","useSelector","useDispatch","Tooltip","Spin","axios","toggleStatusPresentialModal","Image","Transformation","WaveLoading","responseUpdateCover","requestUpdateCover","HeaderProfile","profile","friends","friendsRequest","refHeader","refCoverImg","refCover","friendOfProfile","list","loadingfriendOfProfile","state","listUserRequest","listMyRequest","toggleSpan","setToggleSpan","toggleTopLeft","setToggleTopLeft","styleHeader","setStyleHeader","currentUser","JSON","parse","localStorage","getItem","info","loading","loadingUpdateCover","idProfile","mutialFriend","statusFollow","setStatusFollow","loadingRequest","setLoadingRequest","dispatch","isChangeCover","setIsChangeCover","newCover","setNewCover","isDown","setIsDown","scrollLeft","setScrollLeft","scrollTop","setScrollTop","clientX","setClientX","clientY","setClientY","widthNewCover","setWidthNewCover","userCoverY","setUserCoverY","userCoverX","setUserCoverX","handleImageLoad","e","target","naturalWidth","map","fr","f","id","push","uploadCover","files","saveCoverProfile","formData","FormData","append","post","then","res","saveCoverProfileBe","data","public_id","cover","user_cover","user_cover_cropX","user_cover_cropY","Math","round","ustk","setItem","stringify","onMouseDownCover","current","onMouseUpCover","onMouseMoveCover","scrollCover","uploadAvatar","file","document","addEventListener","fixedOptionHead","removeEventListener","removeFixedOptionHead","curentRef","window","scrollY","handleShow","visibility","background","border","borderRadius","handleHide","addFriendFunc","idUser","follow_users_ReceivedUser","unFriendFunc","action","unMyRequestFriendFunc","acceptFriendFunc","follow_users_UserId","refuseFriendFunc","console","log","overflow","position","top","left","bottom","right","width","height","URL","createObjectURL","user_first_name","user_last_name","user_username","filter","length","color","padding","cursor","user_avatar_cropX","user_avatar","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","user_nick_name","zIndex"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from  'react';\r\nimport {Link, useParams} from 'react-router-dom';\r\nimport { AiFillCamera } from \"react-icons/ai\";\r\nimport { FaUserPlus, FaUserCheck, FaCheck, FaUserClock } from \"react-icons/fa\";\r\nimport { BsThreeDots, BsPencil } from \"react-icons/bs\";\r\nimport {PUBLIC_URL} from \"./../../../Constants/public.jsx\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {Tooltip, Spin} from 'antd';\r\nimport axios from 'axios';\r\nimport {toggleStatusPresentialModal} from './../../../Actions/index.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { WaveLoading } from 'react-loadingg';\r\nimport {responseUpdateCover} from './../../../Actions/index.jsx';\r\nimport {requestUpdateCover} from './../../../Actions/index.jsx';\r\n\r\nfunction HeaderProfile({ profile, friends, friendsRequest }){\r\n  const refHeader = useRef();\r\n  const refCoverImg = useRef();\r\n  const refCover = useRef();\r\n  const {friendOfProfile, list, loadingfriendOfProfile} = useSelector(state => state.friends)\r\n  const listUserRequest = useSelector(state => state.friendsRequest.list);\r\n  const listMyRequest = useSelector(state => state.friendsRequest.listMyRequest);\r\n  const [toggleSpan, setToggleSpan] = useState();\r\n  const [toggleTopLeft, setToggleTopLeft] = useState();\r\n  const [styleHeader, setStyleHeader] = useState(false);\r\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n  const { loading, info, loadingUpdateCover } = useSelector(state => state.profile);\r\n  const {idProfile} = useParams();\r\n  const mutialFriend = [];\r\n  const [statusFollow, setStatusFollow] = useState();\r\n  const [loadingRequest, setLoadingRequest] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const [isChangeCover, setIsChangeCover] = useState(false);\r\n  const [newCover, setNewCover] = useState();\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n  const [clientX, setClientX] = useState(0);\r\n  const [clientY, setClientY] = useState(0);\r\n  const [widthNewCover, setWidthNewCover] = useState(0);\r\n  const [userCoverY, setUserCoverY] = useState(0);\r\n  const [userCoverX, setUserCoverX] = useState(0);\r\n\r\n  const handleImageLoad = (e) => {\r\n    setWidthNewCover(e.target.naturalWidth)\r\n  }\r\n\r\n  friendOfProfile.map(fr => {\r\n    list.map(f => {\r\n      if(fr.id === f.id) mutialFriend.push(fr)\r\n    })\r\n  });\r\n\r\n  const uploadCover = (e) => {\r\n    setNewCover(e.target.files[0])\r\n    setIsChangeCover(true)\r\n  }\r\n\r\n  const saveCoverProfile = async () => {\r\n    dispatch(requestUpdateCover())\r\n\r\n    const formData = new FormData();\r\n    formData.append('upload_preset', 'mohi_video');\r\n    formData.append('file', newCover);\r\n\r\n    await axios.post('/v1_1/mohi-vn/upload', formData)\r\n    .then((res) => {\r\n      saveCoverProfileBe(res.data.public_id)\r\n    })\r\n\r\n  }\r\n\r\n  const saveCoverProfileBe = async (cover) => {\r\n\r\n      let data = {\r\n        user_cover: cover,\r\n        user_cover_cropX: userCoverX,\r\n        user_cover_cropY: userCoverY\r\n      }\r\n\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/update-info-profile\", data)\r\n      .then((res) => {\r\n        dispatch(responseUpdateCover({\r\n          user_cover: cover,\r\n          user_cover_cropX: Math.round(userCoverX),\r\n          user_cover_cropY: Math.round(userCoverY),\r\n        }))\r\n        let ustk = JSON.parse(localStorage.getItem('ustk'));\r\n        ustk.info.user_cover = cover;\r\n        ustk.info.user_cover_cropX = Math.round(userCoverX);\r\n        ustk.info.user_cover_cropY = Math.round(userCoverY);\r\n        localStorage.setItem('ustk', JSON.stringify(ustk))\r\n        setIsChangeCover(false)\r\n      })\r\n  }\r\n\r\n  const onMouseDownCover = (e) => {\r\n    const {scrollLeft, scrollTop} = refCover.current;\r\n\r\n    setIsDown(true)\r\n    setScrollLeft(scrollLeft)\r\n    setScrollTop(scrollTop)\r\n    setClientX(e.clientX)\r\n    setClientY(e.clientY)\r\n  }\r\n\r\n  const onMouseUpCover = (e) => {\r\n    setIsDown(false)\r\n    setScrollLeft(0)\r\n    setScrollTop(0)\r\n    setClientX(0)\r\n    setClientY(0)\r\n  }\r\n\r\n  const onMouseMoveCover = (e) => {\r\n    if(!isDown) return\r\n    const scrollCover = refCover.current;\r\n\r\n    scrollCover.scrollLeft = scrollLeft + clientX - e.clientX;\r\n    scrollCover.scrollTop = scrollTop + clientY - e.clientY;\r\n    setUserCoverX(scrollCover.scrollLeft)\r\n    setUserCoverY(scrollCover.scrollTop)\r\n  }\r\n\r\n  const uploadAvatar= (e) => {\r\n    const file = e.target.files[0];\r\n    dispatch(toggleStatusPresentialModal('modal_upload_avatar_profile', file))\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('scroll', fixedOptionHead, false);\r\n\r\n    return () => {\r\n      document.removeEventListener('scroll', removeFixedOptionHead, false)\r\n    }\r\n  })\r\n\r\n  const fixedOptionHead = () => {\r\n    let curentRef = refHeader.current\r\n    if(curentRef){\r\n      if(window.scrollY - 464 > 0){\r\n        setStyleHeader(true)\r\n      }else {\r\n        setStyleHeader(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const removeFixedOptionHead = () => {\r\n     setStyleHeader(false)\r\n  }\r\n\r\n  function handleShow(){\r\n    setToggleSpan({\r\n      visibility: 'visible'\r\n    })\r\n    setToggleTopLeft({\r\n      background: 'rgba(0,0,0,0.3)',\r\n      border: '2px solid white ',\r\n      borderRadius:'3px'\r\n    })\r\n  }\r\n\r\n  function handleHide(){\r\n    setToggleSpan({\r\n      visibility: 'hidden'\r\n    })\r\n    setToggleTopLeft({\r\n        background: 'none',\r\n        border: '2px solid transparent ',\r\n    })\r\n  }\r\n\r\n  const addFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/add-friend\", {follow_users_ReceivedUser: idUser})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('send_request')\r\n    })\r\n  }\r\n\r\n  const unFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unfriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('remove_friend')\r\n    })\r\n  }\r\n\r\n  const unMyRequestFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'unRequestFriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('remove_request')\r\n    })\r\n  }\r\n\r\n  const acceptFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/accept-friend\", {follow_users_UserId: idUser})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('accept_request')\r\n    })\r\n  }\r\n\r\n  const refuseFriendFunc = async (idUser) => {\r\n    setLoadingRequest(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/refuse-friend\", {id: idUser, action: 'refuseFriend'})\r\n    .then((res) => {\r\n      setLoadingRequest(false)\r\n      setStatusFollow('refuse_request')\r\n    })\r\n  }\r\n\r\n  console.log(loadingUpdateCover);\r\n  return(\r\n    <>\r\n      <div className=\"profile-header\">\r\n        <div className=\"profile-header-container\">\r\n          <div\r\n            className=\"profile-header-cover\"\r\n            onMouseOver={() => handleShow()}\r\n            onMouseOut={() => handleHide()}\r\n          >\r\n            <div className=\"profile-header-cover-container\" >\r\n              <div className={`profile-header-cover-img ${isChangeCover ? `cursor-move-cover` : null}`} >\r\n                {isChangeCover ?\r\n                  <React.Fragment>\r\n                    <div\r\n                      ref={refCover}\r\n                      className=\"profile-header-cover-img-move\"\r\n                      style={{\r\n                        overflow:\"auto\",\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        bottom: 0,\r\n                        right: 0,\r\n                      }}\r\n                      onMouseMove={onMouseMoveCover}\r\n                      onMouseDown={onMouseDownCover}\r\n                      onMouseUp={onMouseUpCover}\r\n                      onMouseLeave={onMouseUpCover}\r\n                      >\r\n                      <img\r\n                        style={{width: '100%', height: 'auto'}}\r\n                        src={URL.createObjectURL(newCover)}\r\n                        alt={info.user_first_name + ' ' + info.user_last_name}\r\n                        ref={refCoverImg}\r\n                        onLoad={handleImageLoad}\r\n                      />\r\n                      { loadingUpdateCover && <div style={{background: 'rgba(255,255,255,0.7)', position: 'absolute', width: '100%', height: '100%', top: 0, left: 0}}><WaveLoading /></div>}\r\n                    </div>\r\n                  </React.Fragment>\r\n                  :\r\n                  <React.Fragment>\r\n                    {info.user_cover_cropX === null ?\r\n                      <img src={info.user_cover} alt={info.user_first_name + ' ' + info.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={info.user_cover+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={400} width={1136} x={info.user_cover_cropX} y={info.user_cover_cropY} crop=\"imagga_crop\" />\r\n                      </Image>\r\n                    }\r\n                  </React.Fragment>\r\n                }\r\n              </div>\r\n            </div>\r\n            {idProfile === currentUser.user_username && !isChangeCover &&\r\n              <div className=\"profile-header-cover-top-left\">\r\n              <label htmlFor=\"update-cover\" style={toggleTopLeft}>\r\n              <AiFillCamera\r\n              />\r\n              <span style={toggleSpan}>Cập nhập ảnh bìa</span>\r\n              </label>\r\n              <input type=\"file\" id=\"update-cover\" accept=\"image/*\" onChange={uploadCover}/>\r\n            </div>}\r\n            {!isChangeCover ?\r\n              <div className=\"profile-header-cover-bottom-right\">\r\n                {idProfile === currentUser.user_username ?\r\n                  <div className=\"button-view-history-action-profile\">\r\n                    <Link to={'/profile/' + info.user_username + '/activity-log'}><button type=\"submit\"><BsThreeDots /> Nhật kí hoạt động</button></Link>\r\n                  </div>\r\n                :\r\n                  <div className=\"button-view-history-action-profile user-profile-button\">\r\n                    {list.filter(f=> f.id === info.id).length ?\r\n                      <React.Fragment>\r\n                        {!statusFollow &&\r\n                          <Tooltip\r\n                            placement={`bottom`}\r\n                            trigger={`click`}\r\n                            title={\r\n                              <div\r\n                                style={{\r\n                                  background: 'rgba(0,0,0,0.8)',\r\n                                  color: 'white',\r\n                                  padding: '5px 10px',\r\n                                  cursor: 'pointer'\r\n                                }}\r\n                                onClick={() => unFriendFunc(info.id) }\r\n                              >\r\n                                Hủy kết bạn\r\n                              </div>\r\n                            }\r\n                          >\r\n                            <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n                          </Tooltip>\r\n                        }\r\n                      </React.Fragment>\r\n                    :\r\n                    <React.Fragment>\r\n                      {listUserRequest.filter(f=> f.id === info.id).length ?\r\n                        <React.Fragment>\r\n                          {!statusFollow &&\r\n                            <Tooltip\r\n                              placement={`bottom`}\r\n                              trigger={`click`}\r\n                              title={\r\n                                <div\r\n                                  style={{\r\n                                    background: 'rgba(0,0,0,0.8)',\r\n                                    color: 'white',\r\n                                    padding: '5px 10px',\r\n                                    cursor: 'pointer'\r\n                                  }}\r\n                                >\r\n                                <p onClick={() => acceptFriendFunc(info.id) }>Xác nhận</p>\r\n                                <p onClick={() => refuseFriendFunc(info.id) }>Từ chối</p>\r\n                                </div>\r\n                              }\r\n                            >\r\n                              <button><FaUserClock /> Trả lời kết bạn {loadingRequest && <Spin />}</button>\r\n                            </Tooltip>\r\n                          }\r\n                        </React.Fragment>\r\n                        :\r\n                        <React.Fragment>\r\n                          {listMyRequest.filter(f=> f.id === info.id).length ?\r\n                            <React.Fragment>\r\n                              {!statusFollow &&\r\n                              <Tooltip\r\n                                placement={`bottom`}\r\n                                trigger={`click`}\r\n                                title={\r\n                                  <div\r\n                                    style={{\r\n                                      background: 'rgba(0,0,0,0.8)',\r\n                                      color: 'white',\r\n                                      padding: '5px 10px',\r\n                                      cursor: 'pointer'\r\n                                    }}\r\n                                    onClick={() => unMyRequestFriendFunc(info.id) }\r\n                                  >\r\n                                    Hủy lời mời kết bạn\r\n                                  </div>\r\n                                }\r\n                              >\r\n                              <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n                              </Tooltip>\r\n                              }\r\n                            </React.Fragment>\r\n                            :\r\n                            <React.Fragment>\r\n                              {!statusFollow &&\r\n                                <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                              }\r\n                            </React.Fragment>\r\n                          }\r\n                        </React.Fragment>\r\n                      }\r\n                    </React.Fragment>\r\n                    }\r\n                    {statusFollow && statusFollow === 'remove_friend' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                    {statusFollow && statusFollow === 'accept_request' &&\r\n                      <Tooltip\r\n                        placement={`bottom`}\r\n                        trigger={`click`}\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              background: 'rgba(0,0,0,0.8)',\r\n                              color: 'white',\r\n                              padding: '5px 10px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => unFriendFunc(info.id) }\r\n                          >\r\n                            Hủy kết bạn\r\n                          </div>\r\n                        }\r\n                      >\r\n                        <button ><FaUserCheck /> Bạn bè {loadingRequest && <Spin />}</button>\r\n                      </Tooltip>\r\n                    }\r\n                    {statusFollow && statusFollow === 'refuse_request' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                    {statusFollow && statusFollow === 'send_request' &&\r\n                      <Tooltip\r\n                        placement={`bottom`}\r\n                        trigger={`click`}\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              background: 'rgba(0,0,0,0.8)',\r\n                              color: 'white',\r\n                              padding: '5px 10px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => unMyRequestFriendFunc(info.id) }\r\n                          >\r\n                            Hủy lời mời kết bạn\r\n                          </div>\r\n                        }\r\n                      >\r\n                      <button><FaCheck /> Đã gửi lời mời {loadingRequest && <Spin />}</button>\r\n                      </Tooltip>\r\n                    }\r\n                    {statusFollow && statusFollow === 'remove_request' &&\r\n                      <button onClick={() => addFriendFunc(info.id)}><FaUserPlus /> Thêm bạn bè {loadingRequest && <Spin />}</button>\r\n                    }\r\n                  </div>\r\n                }\r\n              </div>\r\n              :\r\n              <div className=\"profile-header-cover-bottom-right\">\r\n                <button onClick={() => saveCoverProfile()}>Lưu</button>\r\n                <button onClick={() => setIsChangeCover(false)}>Hủy</button>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"profile-header-timeline\">\r\n            <div className=\"profile-header-avatar\">\r\n              <div className=\"profile-header-avatar_\">\r\n                <div className=\"profile-header-avatar-container\">\r\n                  <div className=\"profile-header-avatar-img\">\r\n                    {info.user_avatar_cropX === null ?\r\n                      <img src={info.user_avatar} alt={info.user_last_name} />\r\n                      :\r\n                      <Image cloudName=\"mohi-vn\" publicId={info.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                        <Transformation height={info.user_avatar_cropH}  width={info.user_avatar_cropW} x={info.user_avatar_cropX} y={info.user_avatar_cropY} crop=\"crop\" />\r\n                      </Image>\r\n                    }\r\n                  </div>\r\n                </div>\r\n                {idProfile === currentUser.user_username && <div className=\"profile-header-avatar-select\">\r\n                  <div className=\"profile-header-avatar-select-active\">\r\n                    <div className=\"profile-header-avatar-update\">\r\n                    <label htmlFor=\"update-avatar\">\r\n                    <AiFillCamera\r\n                    />\r\n                    <div>Cập nhật</div>\r\n                    </label>\r\n                    <input type=\"file\" id=\"update-avatar\" accept=\"image/*\" onChange={uploadAvatar}/>\r\n                    </div>\r\n                  </div>\r\n                </div>}\r\n              </div >\r\n              <div className=\"profile-header-name\">\r\n                {!loading && info && <Link to={'/profile/' + info.user_username}>{info.user_first_name + ' ' + info.user_last_name}</Link>}\r\n                {!loading && info.user_nick_name && <p>({info.user_nick_name})</p>}\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-header-timeline-container\" ref={refHeader} style={styleHeader ? {position: 'fixed', top: '64px', zIndex: 1000, background: 'white', width: '1140px'} : null}>\r\n              <ul className=\"profile-header-navigation\">\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/timeline'}>Dòng thời gian</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/about'}>Giới thiệu</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/gallery'}>Ảnh</Link>\r\n                </li>\r\n                <li>\r\n                  <Link to={'/profile/' + idProfile + '/friends'}>\r\n                    Bạn bè {info.id === currentUser.id ?\r\n                      <small style={{color: 'rgba(0,0,0,0.5)'}}>{list.length && !loadingfriendOfProfile ? list.length : null}</small>\r\n                      :\r\n                      <small style={{color: 'rgba(0,0,0,0.5)'}}>\r\n                        {mutialFriend.length && !loadingfriendOfProfile ? mutialFriend.length + ` bạn chung` : null}\r\n                      </small>\r\n                      }\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HeaderProfile;\r\n"]},"metadata":{},"sourceType":"module"}