{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\Messenger\\\\index.jsx\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport './messenger.css';\nimport { BsSearch, BsFillCameraVideoFill, BsThreeDotsVertical, BsImage, BsPencilSquare } from 'react-icons/bs';\nimport { AiTwotoneSetting, AiTwotoneLike, AiFillFile, AiFillCamera, AiFillCloseCircle } from 'react-icons/ai';\nimport { Link, Route, Switch, useHistory } from 'react-router-dom';\nimport useWindowSize from \"./useWindowSize.jsx\";\nimport { ContentMessenger } from \"./ContentMessenger.jsx\";\nimport { Row } from 'antd';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\n\nfunction Messenger(props, {\n  message\n}) {\n  const messages = useSelector(state => state.message);\n  const heightScrollSider = window.innerHeight - 190;\n  const history = useHistory();\n  const windowSize = useWindowSize();\n  const [showScroll, setShowScroll] = useState({\n    height: heightScrollSider\n  });\n  const [contentChat, setContentChat] = useState(false);\n  const [infoUserContentMess, setInfoUserContentMess] = useState();\n  moment.updateLocale('en', {\n    relativeTime: {\n      future: \"%s\",\n      past: \"%s\",\n      s: 'vài giây',\n      ss: '%d phút',\n      m: \"1 phút\",\n      mm: \"%d phút\",\n      h: \"%d giờ\",\n      hh: \"%d giờ\",\n      d: \"một ngày\",\n      dd: \"%d ngày\",\n      w: \"một tuần\",\n      ww: \"%d tuần\",\n      M: \"một tháng\",\n      MM: \"%d tháng\",\n      y: \"một năm\",\n      yy: \"%d năm\"\n    }\n  });\n  useEffect(() => {\n    setShowScroll({\n      height: heightScrollSider\n    });\n  }, [windowSize]);\n\n  const openContentChat = info => {\n    props.getMessageOneUser(info.id);\n    setInfoUserContentMess(info);\n    history.push('/messenger/' + info.id);\n  };\n\n  const SiderMessenger = () => {\n    const [scrollSider, setScrollSider] = useState();\n    const sider = useRef();\n\n    function handleSiderScroll() {\n      const {\n        scrollTop\n      } = sider.current;\n      if (scrollTop > 0 && !scrollSider) setScrollSider({\n        boxShadow: '-4px 0.1px 3px rgba(0,0,0,0.2)'\n      });\n      if (scrollTop === 0) setScrollSider({});\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-head\",\n      style: scrollSider,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-title-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://kenh14cdn.com/2017/21586912-1799665170046947-938789926401694671-o-1506075000161.jpg\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"Chat\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-title-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-setting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AiTwotoneSetting, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BsSearch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"T\\xECm ki\\u1EBFm tr\\xEAn Messenger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-list-user-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sider-messenger-list-user\",\n      style: showScroll,\n      onScroll: () => handleSiderScroll(),\n      ref: sider,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }, messages.map((mess, index) => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: index,\n        onClick: () => openContentChat({\n          id: mess.user_username,\n          avatar: mess.user_avatar,\n          name: mess.user_first_name + ' ' + mess.user_last_name\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-user-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-user-item-avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: mess.user_avatar,\n        alt: mess.user_first_name + ' ' + mess.user_last_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-username\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 27\n        }\n      }, mess.user_first_name + ' ' + mess.user_last_name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-content-nearest\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 27\n        }\n      }, mess.pivot.messages_Message)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-time-send\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, moment(mess.pivot.created_at, \"YYYYMMDD\\h:m:s\").fromNow())), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-user-item-status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, !mess.pivot.messages_ReadAt && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sider-messenger-unread\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 57\n        }\n      })));\n    })))));\n  };\n\n  const ChatHello = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-messenger-container content-hello\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, \"MOHI\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, \"Xin ch\\xE0o b\\u1EA1n\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, \"H\\xE3y nh\\u1EAFn tin cho b\\u1EA1n b\\xE8 \\u0111i n\\xE0o\"));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messenger-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SiderMessenger, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/messenger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ChatHello, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/messenger/:idUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ContentMessenger, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default Messenger;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Messenger/index.jsx"],"names":["React","useEffect","useState","useRef","BsSearch","BsFillCameraVideoFill","BsThreeDotsVertical","BsImage","BsPencilSquare","AiTwotoneSetting","AiTwotoneLike","AiFillFile","AiFillCamera","AiFillCloseCircle","Link","Route","Switch","useHistory","useWindowSize","ContentMessenger","Row","useSelector","moment","Messenger","props","message","messages","state","heightScrollSider","window","innerHeight","history","windowSize","showScroll","setShowScroll","height","contentChat","setContentChat","infoUserContentMess","setInfoUserContentMess","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","openContentChat","info","getMessageOneUser","id","push","SiderMessenger","scrollSider","setScrollSider","sider","handleSiderScroll","scrollTop","current","boxShadow","map","mess","index","user_username","avatar","user_avatar","name","user_first_name","user_last_name","pivot","messages_Message","created_at","fromNow","messages_ReadAt","ChatHello"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react';\r\nimport './messenger.css';\r\nimport {BsSearch, BsFillCameraVideoFill, BsThreeDotsVertical, BsImage, BsPencilSquare} from 'react-icons/bs';\r\nimport {AiTwotoneSetting, AiTwotoneLike, AiFillFile, AiFillCamera, AiFillCloseCircle} from 'react-icons/ai';\r\nimport {Link, Route, Switch, useHistory} from 'react-router-dom';\r\nimport useWindowSize from \"./useWindowSize.jsx\";\r\nimport {ContentMessenger} from \"./ContentMessenger.jsx\";\r\nimport {Row} from 'antd';\r\nimport {useSelector} from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nfunction Messenger(props, { message }){\r\n  const messages = useSelector(state => state.message);\r\n\r\n  const heightScrollSider = window.innerHeight - 190;\r\n  const history = useHistory();\r\n  const windowSize = useWindowSize();\r\n  const [showScroll, setShowScroll] = useState({height: heightScrollSider})\r\n  const [contentChat, setContentChat] = useState(false)\r\n  const [infoUserContentMess, setInfoUserContentMess] = useState()\r\n\r\n  moment.updateLocale('en', {\r\n    relativeTime : {\r\n        future: \"%s\",\r\n        past:   \"%s\",\r\n        s  : 'vài giây',\r\n        ss : '%d phút',\r\n        m:  \"1 phút\",\r\n        mm: \"%d phút\",\r\n        h:  \"%d giờ\",\r\n        hh: \"%d giờ\",\r\n        d:  \"một ngày\",\r\n        dd: \"%d ngày\",\r\n        w:  \"một tuần\",\r\n        ww: \"%d tuần\",\r\n        M:  \"một tháng\",\r\n        MM: \"%d tháng\",\r\n        y:  \"một năm\",\r\n        yy: \"%d năm\"\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    setShowScroll({height: heightScrollSider})\r\n  },[windowSize]);\r\n\r\n  const openContentChat = (info) => {\r\n    props.getMessageOneUser(info.id)\r\n    setInfoUserContentMess(info)\r\n    history.push('/messenger/' + info.id)\r\n  }\r\n\r\n  const SiderMessenger = () => {\r\n    const [scrollSider, setScrollSider] = useState();\r\n    const sider = useRef();\r\n\r\n    function handleSiderScroll(){\r\n      const {scrollTop} = sider.current;\r\n      if(scrollTop > 0 && !scrollSider) setScrollSider({boxShadow: '-4px 0.1px 3px rgba(0,0,0,0.2)'})\r\n      if(scrollTop === 0) setScrollSider({})\r\n    }\r\n\r\n      return(\r\n        <div className=\"sider-messenger-container\">\r\n          <div className=\"sider-messenger-head\" style={scrollSider}>\r\n            <div className=\"sider-messenger-title\">\r\n              <div className=\"sider-messenger-title-left\">\r\n                <div className=\"sider-messenger-avatar\">\r\n                  <img src=\"https://kenh14cdn.com/2017/21586912-1799665170046947-938789926401694671-o-1506075000161.jpg\" alt=\"\" />\r\n                </div>\r\n                <span>Chat</span>\r\n              </div>\r\n              <div className=\"sider-messenger-title-right\">\r\n                <div className=\"sider-messenger-setting\">\r\n                  <AiTwotoneSetting />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"sider-messenger-search\">\r\n              <BsSearch />\r\n              <input type=\"text\" placeholder=\"Tìm kiếm trên Messenger\"/>\r\n            </div>\r\n          </div>\r\n          <div className=\"sider-messenger-list-user-container\" >\r\n            <div className=\"sider-messenger-list-user\" style={showScroll} onScroll={() => handleSiderScroll()} ref={sider}>\r\n              <ul>\r\n                {messages.map((mess, index) => {\r\n                  return(\r\n                    <li key={index} onClick={() => openContentChat({id:mess.user_username, avatar:mess.user_avatar, name: mess.user_first_name + ' ' + mess.user_last_name})}>\r\n                      <div className=\"sider-messenger-user-item\">\r\n                        <div className=\"sider-messenger-user-item-avatar\">\r\n                          <img src={mess.user_avatar} alt={mess.user_first_name + ' ' + mess.user_last_name} />\r\n                        </div>\r\n                        <div className=\"sider-messenger-content\">\r\n                          <div className=\"sider-messenger-username\">\r\n                            {mess.user_first_name + ' ' + mess.user_last_name}\r\n                          </div>\r\n                          <div className=\"sider-messenger-content-nearest\">\r\n                            {mess.pivot.messages_Message}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"sider-messenger-time-send\">\r\n                          {moment(mess.pivot.created_at, \"YYYYMMDD\\h:m:s\").fromNow()}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"sider-messenger-user-item-status\">\r\n                        {!mess.pivot.messages_ReadAt && <div className=\"sider-messenger-unread\"></div>}\r\n                      </div>\r\n                    </li>\r\n                  )\r\n                })}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n  }\r\n\r\n  const ChatHello = () => {\r\n    return(\r\n      <div className=\"content-messenger-container content-hello\">\r\n        <p>MOHI</p>\r\n        <p>Xin chào bạn</p>\r\n        <p>Hãy nhắn tin cho bạn bè đi nào</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return(\r\n      <div className=\"messenger-container\">\r\n        <SiderMessenger />\r\n        <Switch>\r\n          <Route exact path=\"/messenger\">\r\n            <ChatHello />\r\n          </Route>\r\n          <Route path=\"/messenger/:idUser\">\r\n            <ContentMessenger />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Messenger;\r\n"]},"metadata":{},"sourceType":"module"}