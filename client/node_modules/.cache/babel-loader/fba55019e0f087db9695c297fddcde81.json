{"ast":null,"code":"import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useForm}from\"react-hook-form\";import{toggleStatusPresentialModal}from'./../../Actions/index.jsx';import{useDispatch,useSelector}from'react-redux';import{responseUpdateProfile}from'./../../Actions/index.jsx';import{requestUpdateProfile}from'./../../Actions/index.jsx';import editInfo from'./../../axios/axiosEditInfoProfile.jsx';import{WaveLoading}from'react-loadingg';import{RiErrorWarningLine}from'react-icons/ri';import{Tooltip}from'antd';function CheckOtp(props,_ref){var profile=_ref.profile;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.errors,setError=_useForm.setError;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.profile;}),loadingUpdateProfile=_useSelector.loadingUpdateProfile;var _useState=useState('Bạn chưa nhập mã xác nhận'),_useState2=_slicedToArray(_useState,2),errorOtp=_useState2[0],setErrorOtp=_useState2[1];var onSubmit=function onSubmit(data){if(props.otp===Number(data.otp)){dispatch(requestUpdateProfile());editInfo({type:'user_email',value:props.formData.user_email}).then(function(res){dispatch(responseUpdateProfile({type:'user_email',value:props.formData.user_email}));dispatch(toggleStatusPresentialModal());});}else{setError(\"otp\",{type:\"manual\",message:\"Email hoặc số điện thoại đã được đăng kí\"});setErrorOtp('Mã xác nhận không hợp lệ');}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"modal-custom modal-add-work-space\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-add-work-space-header\"},\"X\\xE1c nh\\u1EADn m\\xE3\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-add-work-space-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-add-work-space-main-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Nh\\u1EADp m\\xE3 x\\xE1c nh\\u1EADn b\\u1EA1n nh\\u1EADn \\u0111\\u01B0\\u1EE3c\"),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-add-email-main-input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"otp\",ref:register({required:true})}),errors.otp&&/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",trigger:\"click\",title:/*#__PURE__*/React.createElement(\"p\",{className:\"error_sex_tooltip\"},errorOtp)},/*#__PURE__*/React.createElement(RiErrorWarningLine,{className:\"error_sex\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-add-work-space-footer\"},loadingUpdateProfile?/*#__PURE__*/React.createElement(\"button\",{disabled:true,type:\"submit\"},\"X\\xE1c nh\\u1EADn\"):/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"X\\xE1c nh\\u1EADn\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return dispatch(toggleStatusPresentialModal());}},\"H\\u1EE7y\"))),loadingUpdateProfile&&/*#__PURE__*/React.createElement(\"div\",{style:{background:'rgba(255,255,255,0.7)',position:'absolute',width:'100%',height:'100%',top:0,left:0}},/*#__PURE__*/React.createElement(WaveLoading,null))));}export default CheckOtp;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/PresentialModal/checkOtp.jsx"],"names":["React","useState","useForm","toggleStatusPresentialModal","useDispatch","useSelector","responseUpdateProfile","requestUpdateProfile","editInfo","WaveLoading","RiErrorWarningLine","Tooltip","CheckOtp","props","profile","register","handleSubmit","watch","errors","setError","dispatch","state","loadingUpdateProfile","errorOtp","setErrorOtp","onSubmit","data","otp","Number","type","value","formData","user_email","then","res","message","required","background","position","width","height","top","left"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { responseUpdateProfile } from './../../Actions/index.jsx';\r\nimport { requestUpdateProfile } from './../../Actions/index.jsx';\r\nimport editInfo from './../../axios/axiosEditInfoProfile.jsx';\r\nimport { WaveLoading } from 'react-loadingg';\r\nimport {RiErrorWarningLine} from 'react-icons/ri';\r\nimport {Tooltip} from 'antd';\r\n\r\nfunction CheckOtp(props, { profile }){\r\n  const { register, handleSubmit, watch, errors, setError } = useForm();\r\n  const dispatch = useDispatch();\r\n  const {loadingUpdateProfile} = useSelector(state => state.profile);\r\n  const [errorOtp, setErrorOtp] = useState('Bạn chưa nhập mã xác nhận');\r\n\r\n  const onSubmit = (data) => {\r\n    if(props.otp === Number(data.otp)){\r\n      dispatch(requestUpdateProfile())\r\n\r\n      editInfo({type: 'user_email', value: props.formData.user_email})\r\n      .then(res => {\r\n        dispatch(responseUpdateProfile({type: 'user_email', value: props.formData.user_email}))\r\n        dispatch(toggleStatusPresentialModal())\r\n      })\r\n    }else {\r\n      setError(\"otp\", {\r\n            type: \"manual\",\r\n            message: \"Email hoặc số điện thoại đã được đăng kí\"\r\n          });\r\n      setErrorOtp('Mã xác nhận không hợp lệ')\r\n    }\r\n  }\r\n\r\n  return(\r\n    <React.Fragment>\r\n        <div className=\"modal-custom modal-add-work-space\">\r\n            <div className=\"modal-add-work-space-header\">\r\n                Xác nhận mã\r\n            </div>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"modal-add-work-space-main\">\r\n                    <div className=\"modal-add-work-space-main-input\">\r\n                        <label htmlFor=\"\">Nhập mã xác nhận bạn nhận được</label>\r\n                        <div className=\"modal-add-email-main-input\">\r\n                          <input type=\"text\" name=\"otp\" ref={register({required: true})} />\r\n                            {errors.otp && <Tooltip placement=\"bottom\" trigger=\"click\" title={<p className = \"error_sex_tooltip\" >\r\n                                {errorOtp}\r\n                                </p>}><RiErrorWarningLine className=\"error_sex\"/></Tooltip>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"modal-add-work-space-footer\">\r\n                  {loadingUpdateProfile ?\r\n                    <button disabled type=\"submit\">Xác nhận</button>\r\n                    :\r\n                    <button type=\"submit\">Xác nhận</button>\r\n                  }\r\n                  <button onClick={ () => dispatch(toggleStatusPresentialModal())} >Hủy</button>\r\n                </div>\r\n            </form>\r\n            { loadingUpdateProfile && <div style={{background: 'rgba(255,255,255,0.7)', position: 'absolute', width: '100%', height: '100%', top: 0, left: 0}}><WaveLoading /></div>}\r\n        </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default CheckOtp;\r\n"]},"metadata":{},"sourceType":"module"}