{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{BrowserRouter as Router}from'react-router-dom';import AppContainer from'./../Containers/AppContainer.jsx';import LoginContainer from'./../Containers/LoginContainer.jsx';import Spin from'./../Components/Spin/index.jsx';import{PresentialModal}from'./../Components/PresentialModal/index.jsx';import{useSelector}from'react-redux';import{toggleStatusPresentialModal}from'./../Actions/index.jsx';var socketIOClient=require('socket.io-client');function App(_ref){var spin=_ref.spin,presentialModal=_ref.presentialModal,profile=_ref.profile;var statusSpin=useSelector(function(state){return state.spin;});var statusPresentialModal=useSelector(function(state){return state.presentialModal;});var _useSelector=useSelector(function(state){return state.profile;}),loadingUpdateProfile=_useSelector.loadingUpdateProfile;function IsJsonString(str){try{JSON.parse(str);}catch(e){return false;}return true;}var ustk=IsJsonString(localStorage.getItem('ustk'))?JSON.parse(localStorage.getItem('ustk')):'';var token=ustk?ustk.access_token:'';if(!token){localStorage.removeItem('ustk');}var setLoginFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return localStorage.setItem('ustk',JSON.stringify(res.data));case 2:case\"end\":return _context.stop();}}},_callee);}));return function setLoginFunc(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Router,null,token?/*#__PURE__*/React.createElement(AppContainer,null):/*#__PURE__*/React.createElement(LoginContainer,{setLoginFunc:setLoginFunc}),statusSpin.status&&/*#__PURE__*/React.createElement(Spin,null),statusPresentialModal.status&&/*#__PURE__*/React.createElement(PresentialModal,null)));}export default App;","map":{"version":3,"sources":["D:/Web/mohi/client/src/app/App.jsx"],"names":["React","useEffect","BrowserRouter","Router","AppContainer","LoginContainer","Spin","PresentialModal","useSelector","toggleStatusPresentialModal","socketIOClient","require","App","spin","presentialModal","profile","statusSpin","state","statusPresentialModal","loadingUpdateProfile","IsJsonString","str","JSON","parse","e","ustk","localStorage","getItem","token","access_token","removeItem","setLoginFunc","res","setItem","stringify","data","status"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,KAAwC,kBAAxC,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,oCAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,gCAAjB,CACA,OAAQC,eAAR,KAA8B,2CAA9B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAAQC,2BAAR,KAA0C,wBAA1C,CACA,GAAIC,CAAAA,cAAc,CAAGC,OAAO,CAAC,kBAAD,CAA5B,CAEA,QAASC,CAAAA,GAAT,MAAiD,IAAlCC,CAAAA,IAAkC,MAAlCA,IAAkC,CAA5BC,eAA4B,MAA5BA,eAA4B,CAAXC,OAAW,MAAXA,OAAW,CAC/C,GAAMC,CAAAA,UAAU,CAAGR,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACJ,IAAV,EAAN,CAA9B,CACA,GAAMK,CAAAA,qBAAqB,CAAGV,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACH,eAAV,EAAN,CAAzC,CAF+C,iBAGhBN,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACF,OAAV,EAAN,CAHK,CAGxCI,oBAHwC,cAGxCA,oBAHwC,CAK/C,QAASC,CAAAA,YAAT,CAAsBC,GAAtB,CAA2B,CACzB,GAAI,CACAC,IAAI,CAACC,KAAL,CAAWF,GAAX,EACH,CAAC,MAAOG,CAAP,CAAU,CACR,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACD,CACD,GAAIC,CAAAA,IAAI,CAAGL,YAAY,CAACM,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAAZ,CAA6CL,IAAI,CAACC,KAAL,CAAWG,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAA7C,CAAwF,EAAnG,CACA,GAAIC,CAAAA,KAAK,CAAGH,IAAI,CAAGA,IAAI,CAACI,YAAR,CAAuB,EAAvC,CACA,GAAG,CAACD,KAAJ,CAAU,CACRF,YAAY,CAACI,UAAb,CAAwB,MAAxB,EACD,CAED,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,GAAP,wIACbN,CAAAA,YAAY,CAACO,OAAb,CAAqB,MAArB,CAA6BX,IAAI,CAACY,SAAL,CAAeF,GAAG,CAACG,IAAnB,CAA7B,CADa,uDAAH,kBAAZJ,CAAAA,YAAY,6CAAlB,CAIA,mBAAQ,2BAAK,SAAS,CAAC,KAAf,eACN,oBAAC,MAAD,MACMH,KAAK,cAAG,oBAAC,YAAD,MAAH,cAAsB,oBAAC,cAAD,EAAgB,YAAY,CAAEG,YAA9B,EADjC,CAEKf,UAAU,CAACoB,MAAX,eAAqB,oBAAC,IAAD,MAF1B,CAGKlB,qBAAqB,CAACkB,MAAtB,eAAgC,oBAAC,eAAD,MAHrC,CADM,CAAR,CAOD,CAED,cAAexB,CAAAA,GAAf","sourcesContent":["import React, {useEffect} from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport AppContainer from './../Containers/AppContainer.jsx';\r\nimport LoginContainer from './../Containers/LoginContainer.jsx';\r\nimport Spin from './../Components/Spin/index.jsx';\r\nimport {PresentialModal} from './../Components/PresentialModal/index.jsx';\r\nimport { useSelector } from 'react-redux';\r\nimport {toggleStatusPresentialModal} from './../Actions/index.jsx';\r\nvar socketIOClient = require('socket.io-client');\r\n\r\nfunction App({ spin, presentialModal, profile }) {\r\n  const statusSpin = useSelector(state => state.spin);\r\n  const statusPresentialModal = useSelector(state => state.presentialModal);\r\n  const {loadingUpdateProfile} = useSelector(state => state.profile);\r\n\r\n  function IsJsonString(str) {\r\n    try {\r\n        JSON.parse(str);\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n  let ustk = IsJsonString(localStorage.getItem('ustk')) ? JSON.parse(localStorage.getItem('ustk')) : '';\r\n  let token = ustk ? ustk.access_token : '';\r\n  if(!token){\r\n    localStorage.removeItem('ustk');\r\n  }\r\n\r\n  const setLoginFunc = async (res) => {\r\n    await localStorage.setItem('ustk', JSON.stringify(res.data));\r\n  }\r\n\r\n  return (<div className=\"App\">\r\n    <Router>\r\n        { token ? <AppContainer /> : <LoginContainer setLoginFunc={setLoginFunc}/>}\r\n        {statusSpin.status && <Spin />}\r\n        {statusPresentialModal.status && <PresentialModal />}\r\n    </Router>\r\n  </div>);\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}