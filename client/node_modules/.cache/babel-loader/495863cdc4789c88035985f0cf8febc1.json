{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\PresentialModal\\\\ModalUpdatePostProfile.jsx\";\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport EditorUpdatePost from './EditorUpdatePost.jsx';\nimport './ModalUpdatePostProfile.css';\nimport { Button, Select, message, Space } from 'antd';\nimport UploadMuti from './UploadMuti.jsx';\nimport axios from 'axios';\nimport { MdPublic } from \"react-icons/md\";\nimport { FaUserFriends, FaLock } from \"react-icons/fa\";\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\nimport { updatePostProfile } from './../../Actions/index.jsx';\n\nfunction ModalUpdatePostProfile({\n  presentialModal\n}) {\n  const {\n    data\n  } = useSelector(state => state.presentialModal);\n  const [newContentPost, setNewContentPost] = useState(data.post_Content);\n  const [fileList, setFileList] = useState(data.images_post);\n  const [loadingUpdate, setLoadingUpdate] = useState(false);\n  const {\n    Option\n  } = Select;\n  const [privacyNewFeed, setPrivacyNewFeed] = useState(data.post_Privacy);\n  const dispatch = useDispatch();\n\n  const onChangePrivacyNewFeed = value => {\n    setPrivacyNewFeed(value);\n  };\n\n  const changeStatusButtonSubmit = value => {\n    setNewContentPost(value);\n  };\n\n  const uploadMuti = files => {\n    setFileList(files);\n    console.log(files);\n  };\n\n  const update = async () => {\n    setLoadingUpdate(true);\n    await axios.post(\"https://www.api.mohi.vn/api/auth/update-post-profile\", {\n      id: data.id,\n      post_Content: newContentPost,\n      post_Privacy: privacyNewFeed,\n      post_images_Url: fileList\n    }).then(res => {\n      setLoadingUpdate(false);\n      dispatch(updatePostProfile({\n        idPost: data.id,\n        data: res.data\n      }));\n      dispatch(toggleStatusPresentialModal());\n      message.success('Chỉnh sửa bài viết thành công');\n    }).catch(e => {\n      dispatch(toggleStatusPresentialModal());\n      message.success('Đã xảy ra lỗi không mong muốn vui lòng thử lại');\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-custom modal_update_post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"update-post-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(EditorUpdatePost, {\n    value: data.post_Content ? data.post_Content : '',\n    changeStatusButtonSubmit: changeStatusButtonSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"update-upload-muti-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UploadMuti, {\n    uploadMuti: uploadMuti,\n    imagesPost: data.images_post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"update-post-select-privacy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    className: \"select-privacy select-privacy-update\",\n    defaultValue: privacyNewFeed,\n    style: {\n      width: '100%'\n    },\n    onSelect: value => onChangePrivacyNewFeed(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"public\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MdPublic, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 38\n    }\n  }), \" C\\xF4ng khai\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"friend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FaUserFriends, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 38\n    }\n  }), \" B\\u1EA1n b\\xE8\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"onlyme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FaLock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 38\n    }\n  }), \" Ch\\u1EC9 m\\xECnh t\\xF4i\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-update-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, !loadingUpdate ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: update,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, \"\\u0110\\u0103ng\") : /*#__PURE__*/React.createElement(Button, {\n    loading: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, \"\\u0110\\u0103ng\")))));\n}\n\nexport default ModalUpdatePostProfile;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/PresentialModal/ModalUpdatePostProfile.jsx"],"names":["React","useState","useDispatch","useSelector","EditorUpdatePost","Button","Select","message","Space","UploadMuti","axios","MdPublic","FaUserFriends","FaLock","toggleStatusPresentialModal","updatePostProfile","ModalUpdatePostProfile","presentialModal","data","state","newContentPost","setNewContentPost","post_Content","fileList","setFileList","images_post","loadingUpdate","setLoadingUpdate","Option","privacyNewFeed","setPrivacyNewFeed","post_Privacy","dispatch","onChangePrivacyNewFeed","value","changeStatusButtonSubmit","uploadMuti","files","console","log","update","post","id","post_images_Url","then","res","idPost","success","catch","e","width"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport EditorUpdatePost from './EditorUpdatePost.jsx';\r\nimport './ModalUpdatePostProfile.css';\r\nimport {Button, Select, message, Space} from 'antd';\r\nimport UploadMuti from './UploadMuti.jsx';\r\nimport axios from 'axios';\r\nimport {MdPublic} from \"react-icons/md\";\r\nimport {FaUserFriends, FaLock} from \"react-icons/fa\";\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\nimport { updatePostProfile } from './../../Actions/index.jsx';\r\n\r\nfunction ModalUpdatePostProfile({ presentialModal }){\r\n  const {data} = useSelector(state => state.presentialModal);\r\n  const [newContentPost, setNewContentPost] = useState(data.post_Content);\r\n  const [fileList, setFileList] = useState(data.images_post);\r\n  const [loadingUpdate, setLoadingUpdate] = useState(false);\r\n  const {Option} = Select;\r\n  const [privacyNewFeed, setPrivacyNewFeed] = useState(data.post_Privacy);\r\n  const dispatch= useDispatch();\r\n\r\n  const onChangePrivacyNewFeed = (value) => {\r\n    setPrivacyNewFeed(value)\r\n  }\r\n\r\n  const changeStatusButtonSubmit = (value) => {\r\n    setNewContentPost(value)\r\n  }\r\n\r\n  const uploadMuti = (files) => {\r\n    setFileList(files)\r\n    console.log(files);\r\n\r\n  }\r\n\r\n  const update = async () => {\r\n    setLoadingUpdate(true)\r\n    await axios.post(\"https://www.api.mohi.vn/api/auth/update-post-profile\", {\r\n      id: data.id,\r\n      post_Content: newContentPost,\r\n      post_Privacy: privacyNewFeed,\r\n      post_images_Url: fileList\r\n    })\r\n    .then((res) => {\r\n      setLoadingUpdate(false)\r\n      dispatch(updatePostProfile({idPost: data.id, data: res.data}))\r\n      dispatch(toggleStatusPresentialModal())\r\n      message.success('Chỉnh sửa bài viết thành công');\r\n    })\r\n    .catch((e) => {\r\n      dispatch(toggleStatusPresentialModal())\r\n      message.success('Đã xảy ra lỗi không mong muốn vui lòng thử lại');\r\n    })\r\n  }\r\n\r\n  return(\r\n    <React.Fragment>\r\n      <Space>\r\n      <div className=\"modal-custom modal_update_post\">\r\n        <div className=\"update-post-content\">\r\n          <EditorUpdatePost value={data.post_Content ? data.post_Content : ''} changeStatusButtonSubmit={changeStatusButtonSubmit}/>\r\n        </div>\r\n        <div className=\"update-upload-muti-image\">\r\n          <UploadMuti uploadMuti={uploadMuti} imagesPost={data.images_post}/>\r\n        </div>\r\n        <div className=\"update-post-select-privacy\">\r\n          <Select className=\"select-privacy select-privacy-update\" defaultValue={privacyNewFeed} style={{ width: '100%' }} onSelect={(value) => onChangePrivacyNewFeed(value)}>\r\n              <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n              <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n              <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n          </Select>\r\n        </div>\r\n        <div className=\"button-update-post\">\r\n          {!loadingUpdate ?\r\n          <button onClick={update}>Đăng</button>\r\n            :\r\n          <Button loading>Đăng</Button>\r\n          }\r\n        </div>\r\n      </div>\r\n    </Space>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ModalUpdatePostProfile;\r\n"]},"metadata":{},"sourceType":"module"}