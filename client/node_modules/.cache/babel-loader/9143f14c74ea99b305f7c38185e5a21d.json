{"ast":null,"code":"import { ImageOverlay, CRS, DomUtil, Util, Layer, popup, latLng, bounds } from 'leaflet';\nimport { cors } from '../Support';\nimport { setEsriAttribution } from '../Util';\nvar Overlay = ImageOverlay.extend({\n  onAdd: function (map) {\n    this._topLeft = map.getPixelBounds().min;\n    ImageOverlay.prototype.onAdd.call(this, map);\n  },\n  _reset: function () {\n    if (this._map.options.crs === CRS.EPSG3857) {\n      ImageOverlay.prototype._reset.call(this);\n    } else {\n      DomUtil.setPosition(this._image, this._topLeft.subtract(this._map.getPixelOrigin()));\n    }\n  }\n});\nexport var RasterLayer = Layer.extend({\n  options: {\n    opacity: 1,\n    position: 'front',\n    f: 'image',\n    useCors: cors,\n    attribution: null,\n    interactive: false,\n    alt: ''\n  },\n  onAdd: function (map) {\n    // include 'Powered by Esri' in map attribution\n    setEsriAttribution(map);\n\n    if (this.options.zIndex) {\n      this.options.position = null;\n    }\n\n    this._update = Util.throttle(this._update, this.options.updateInterval, this);\n    map.on('moveend', this._update, this); // if we had an image loaded and it matches the\n    // current bounds show the image otherwise remove it\n\n    if (this._currentImage && this._currentImage._bounds.equals(this._map.getBounds())) {\n      map.addLayer(this._currentImage);\n    } else if (this._currentImage) {\n      this._map.removeLayer(this._currentImage);\n\n      this._currentImage = null;\n    }\n\n    this._update();\n\n    if (this._popup) {\n      this._map.on('click', this._getPopupData, this);\n\n      this._map.on('dblclick', this._resetPopupState, this);\n    } // add copyright text listed in service metadata\n\n\n    this.metadata(function (err, metadata) {\n      if (!err && !this.options.attribution && map.attributionControl && metadata.copyrightText) {\n        this.options.attribution = metadata.copyrightText;\n        map.attributionControl.addAttribution(this.getAttribution());\n      }\n    }, this);\n  },\n  onRemove: function (map) {\n    if (this._currentImage) {\n      this._map.removeLayer(this._currentImage);\n    }\n\n    if (this._popup) {\n      this._map.off('click', this._getPopupData, this);\n\n      this._map.off('dblclick', this._resetPopupState, this);\n    }\n\n    this._map.off('moveend', this._update, this);\n  },\n  bindPopup: function (fn, popupOptions) {\n    this._shouldRenderPopup = false;\n    this._lastClick = false;\n    this._popup = popup(popupOptions);\n    this._popupFunction = fn;\n\n    if (this._map) {\n      this._map.on('click', this._getPopupData, this);\n\n      this._map.on('dblclick', this._resetPopupState, this);\n    }\n\n    return this;\n  },\n  unbindPopup: function () {\n    if (this._map) {\n      this._map.closePopup(this._popup);\n\n      this._map.off('click', this._getPopupData, this);\n\n      this._map.off('dblclick', this._resetPopupState, this);\n    }\n\n    this._popup = false;\n    return this;\n  },\n  bringToFront: function () {\n    this.options.position = 'front';\n\n    if (this._currentImage) {\n      this._currentImage.bringToFront();\n\n      this._setAutoZIndex(Math.max);\n    }\n\n    return this;\n  },\n  bringToBack: function () {\n    this.options.position = 'back';\n\n    if (this._currentImage) {\n      this._currentImage.bringToBack();\n\n      this._setAutoZIndex(Math.min);\n    }\n\n    return this;\n  },\n  setZIndex: function (value) {\n    this.options.zIndex = value;\n\n    if (this._currentImage) {\n      this._currentImage.setZIndex(value);\n    }\n\n    return this;\n  },\n  _setAutoZIndex: function (compare) {\n    // go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)\n    if (!this._currentImage) {\n      return;\n    }\n\n    var layers = this._currentImage.getPane().children;\n\n    var edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min\n\n    for (var i = 0, len = layers.length, zIndex; i < len; i++) {\n      zIndex = layers[i].style.zIndex;\n\n      if (layers[i] !== this._currentImage._image && zIndex) {\n        edgeZIndex = compare(edgeZIndex, +zIndex);\n      }\n    }\n\n    if (isFinite(edgeZIndex)) {\n      this.options.zIndex = edgeZIndex + compare(-1, 1);\n      this.setZIndex(this.options.zIndex);\n    }\n  },\n  getAttribution: function () {\n    return this.options.attribution;\n  },\n  getOpacity: function () {\n    return this.options.opacity;\n  },\n  setOpacity: function (opacity) {\n    this.options.opacity = opacity;\n\n    if (this._currentImage) {\n      this._currentImage.setOpacity(opacity);\n    }\n\n    return this;\n  },\n  getTimeRange: function () {\n    return [this.options.from, this.options.to];\n  },\n  setTimeRange: function (from, to) {\n    this.options.from = from;\n    this.options.to = to;\n\n    this._update();\n\n    return this;\n  },\n  metadata: function (callback, context) {\n    this.service.metadata(callback, context);\n    return this;\n  },\n  authenticate: function (token) {\n    this.service.authenticate(token);\n    return this;\n  },\n  redraw: function () {\n    this._update();\n  },\n  _renderImage: function (url, bounds, contentType) {\n    if (this._map) {\n      // if no output directory has been specified for a service, MIME data will be returned\n      if (contentType) {\n        url = 'data:' + contentType + ';base64,' + url;\n      } // if server returns an inappropriate response, abort.\n\n\n      if (!url) return; // create a new image overlay and add it to the map\n      // to start loading the image\n      // opacity is 0 while the image is loading\n\n      var image = new Overlay(url, bounds, {\n        opacity: 0,\n        crossOrigin: this.options.withCredentials ? 'use-credentials' : this.options.useCors,\n        alt: this.options.alt,\n        pane: this.options.pane || this.getPane(),\n        interactive: this.options.interactive\n      }).addTo(this._map);\n\n      var onOverlayError = function () {\n        this._map.removeLayer(image);\n\n        this.fire('error');\n        image.off('load', onOverlayLoad, this);\n      };\n\n      var onOverlayLoad = function (e) {\n        image.off('error', onOverlayLoad, this);\n\n        if (this._map) {\n          var newImage = e.target;\n          var oldImage = this._currentImage; // if the bounds of this image matches the bounds that\n          // _renderImage was called with and we have a map with the same bounds\n          // hide the old image if there is one and set the opacity\n          // of the new image otherwise remove the new image\n\n          if (newImage._bounds.equals(bounds) && newImage._bounds.equals(this._map.getBounds())) {\n            this._currentImage = newImage;\n\n            if (this.options.position === 'front') {\n              this.bringToFront();\n            } else if (this.options.position === 'back') {\n              this.bringToBack();\n            }\n\n            if (this.options.zIndex) {\n              this.setZIndex(this.options.zIndex);\n            }\n\n            if (this._map && this._currentImage._map) {\n              this._currentImage.setOpacity(this.options.opacity);\n            } else {\n              this._currentImage._map.removeLayer(this._currentImage);\n            }\n\n            if (oldImage && this._map) {\n              this._map.removeLayer(oldImage);\n            }\n\n            if (oldImage && oldImage._map) {\n              oldImage._map.removeLayer(oldImage);\n            }\n          } else {\n            this._map.removeLayer(newImage);\n          }\n        }\n\n        this.fire('load', {\n          bounds: bounds\n        });\n      }; // If loading the image fails\n\n\n      image.once('error', onOverlayError, this); // once the image loads\n\n      image.once('load', onOverlayLoad, this);\n    }\n  },\n  _update: function () {\n    if (!this._map) {\n      return;\n    }\n\n    var zoom = this._map.getZoom();\n\n    var bounds = this._map.getBounds();\n\n    if (this._animatingZoom) {\n      return;\n    }\n\n    if (this._map._panTransition && this._map._panTransition._inProgress) {\n      return;\n    }\n\n    if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n      if (this._currentImage) {\n        this._currentImage._map.removeLayer(this._currentImage);\n\n        this._currentImage = null;\n      }\n\n      return;\n    }\n\n    var params = this._buildExportParams();\n\n    Util.extend(params, this.options.requestParams);\n\n    if (params) {\n      this._requestExport(params, bounds);\n\n      this.fire('loading', {\n        bounds: bounds\n      });\n    } else if (this._currentImage) {\n      this._currentImage._map.removeLayer(this._currentImage);\n\n      this._currentImage = null;\n    }\n  },\n  _renderPopup: function (latlng, error, results, response) {\n    latlng = latLng(latlng);\n\n    if (this._shouldRenderPopup && this._lastClick.equals(latlng)) {\n      // add the popup to the map where the mouse was clicked at\n      var content = this._popupFunction(error, results, response);\n\n      if (content) {\n        this._popup.setLatLng(latlng).setContent(content).openOn(this._map);\n      }\n    }\n  },\n  _resetPopupState: function (e) {\n    this._shouldRenderPopup = false;\n    this._lastClick = e.latlng;\n  },\n  _calculateBbox: function () {\n    var pixelBounds = this._map.getPixelBounds();\n\n    var sw = this._map.unproject(pixelBounds.getBottomLeft());\n\n    var ne = this._map.unproject(pixelBounds.getTopRight());\n\n    var neProjected = this._map.options.crs.project(ne);\n\n    var swProjected = this._map.options.crs.project(sw); // this ensures ne/sw are switched in polar maps where north/top bottom/south is inverted\n\n\n    var boundsProjected = bounds(neProjected, swProjected);\n    return [boundsProjected.getBottomLeft().x, boundsProjected.getBottomLeft().y, boundsProjected.getTopRight().x, boundsProjected.getTopRight().y].join(',');\n  },\n  _calculateImageSize: function () {\n    // ensure that we don't ask ArcGIS Server for a taller image than we have actual map displaying within the div\n    var bounds = this._map.getPixelBounds();\n\n    var size = this._map.getSize();\n\n    var sw = this._map.unproject(bounds.getBottomLeft());\n\n    var ne = this._map.unproject(bounds.getTopRight());\n\n    var top = this._map.latLngToLayerPoint(ne).y;\n\n    var bottom = this._map.latLngToLayerPoint(sw).y;\n\n    if (top > 0 || bottom < size.y) {\n      size.y = bottom - top;\n    }\n\n    return size.x + ',' + size.y;\n  }\n});","map":{"version":3,"sources":["D:/mohi/mohi/client/node_modules/esri-leaflet/src/Layers/RasterLayer.js"],"names":["ImageOverlay","CRS","DomUtil","Util","Layer","popup","latLng","bounds","cors","setEsriAttribution","Overlay","extend","onAdd","map","_topLeft","getPixelBounds","min","prototype","call","_reset","_map","options","crs","EPSG3857","setPosition","_image","subtract","getPixelOrigin","RasterLayer","opacity","position","f","useCors","attribution","interactive","alt","zIndex","_update","throttle","updateInterval","on","_currentImage","_bounds","equals","getBounds","addLayer","removeLayer","_popup","_getPopupData","_resetPopupState","metadata","err","attributionControl","copyrightText","addAttribution","getAttribution","onRemove","off","bindPopup","fn","popupOptions","_shouldRenderPopup","_lastClick","_popupFunction","unbindPopup","closePopup","bringToFront","_setAutoZIndex","Math","max","bringToBack","setZIndex","value","compare","layers","getPane","children","edgeZIndex","Infinity","i","len","length","style","isFinite","getOpacity","setOpacity","getTimeRange","from","to","setTimeRange","callback","context","service","authenticate","token","redraw","_renderImage","url","contentType","image","crossOrigin","withCredentials","pane","addTo","onOverlayError","fire","onOverlayLoad","e","newImage","target","oldImage","once","zoom","getZoom","_animatingZoom","_panTransition","_inProgress","maxZoom","minZoom","params","_buildExportParams","requestParams","_requestExport","_renderPopup","latlng","error","results","response","content","setLatLng","setContent","openOn","_calculateBbox","pixelBounds","sw","unproject","getBottomLeft","ne","getTopRight","neProjected","project","swProjected","boundsProjected","x","y","join","_calculateImageSize","size","getSize","top","latLngToLayerPoint","bottom"],"mappings":"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","sourcesContent":["import { ImageOverlay, CRS, DomUtil, Util, Layer, popup, latLng, bounds } from 'leaflet';\r\nimport { cors } from '../Support';\r\nimport { setEsriAttribution } from '../Util';\r\n\r\nvar Overlay = ImageOverlay.extend({\r\n  onAdd: function (map) {\r\n    this._topLeft = map.getPixelBounds().min;\r\n    ImageOverlay.prototype.onAdd.call(this, map);\r\n  },\r\n  _reset: function () {\r\n    if (this._map.options.crs === CRS.EPSG3857) {\r\n      ImageOverlay.prototype._reset.call(this);\r\n    } else {\r\n      DomUtil.setPosition(this._image, this._topLeft.subtract(this._map.getPixelOrigin()));\r\n    }\r\n  }\r\n});\r\n\r\nexport var RasterLayer = Layer.extend({\r\n  options: {\r\n    opacity: 1,\r\n    position: 'front',\r\n    f: 'image',\r\n    useCors: cors,\r\n    attribution: null,\r\n    interactive: false,\r\n    alt: ''\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    // include 'Powered by Esri' in map attribution\r\n    setEsriAttribution(map);\r\n\r\n    if (this.options.zIndex) {\r\n      this.options.position = null;\r\n    }\r\n\r\n    this._update = Util.throttle(this._update, this.options.updateInterval, this);\r\n\r\n    map.on('moveend', this._update, this);\r\n\r\n    // if we had an image loaded and it matches the\r\n    // current bounds show the image otherwise remove it\r\n    if (this._currentImage && this._currentImage._bounds.equals(this._map.getBounds())) {\r\n      map.addLayer(this._currentImage);\r\n    } else if (this._currentImage) {\r\n      this._map.removeLayer(this._currentImage);\r\n      this._currentImage = null;\r\n    }\r\n\r\n    this._update();\r\n\r\n    if (this._popup) {\r\n      this._map.on('click', this._getPopupData, this);\r\n      this._map.on('dblclick', this._resetPopupState, this);\r\n    }\r\n\r\n    // add copyright text listed in service metadata\r\n    this.metadata(function (err, metadata) {\r\n      if (!err && !this.options.attribution && map.attributionControl && metadata.copyrightText) {\r\n        this.options.attribution = metadata.copyrightText;\r\n        map.attributionControl.addAttribution(this.getAttribution());\r\n      }\r\n    }, this);\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    if (this._currentImage) {\r\n      this._map.removeLayer(this._currentImage);\r\n    }\r\n\r\n    if (this._popup) {\r\n      this._map.off('click', this._getPopupData, this);\r\n      this._map.off('dblclick', this._resetPopupState, this);\r\n    }\r\n\r\n    this._map.off('moveend', this._update, this);\r\n  },\r\n\r\n  bindPopup: function (fn, popupOptions) {\r\n    this._shouldRenderPopup = false;\r\n    this._lastClick = false;\r\n    this._popup = popup(popupOptions);\r\n    this._popupFunction = fn;\r\n    if (this._map) {\r\n      this._map.on('click', this._getPopupData, this);\r\n      this._map.on('dblclick', this._resetPopupState, this);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  unbindPopup: function () {\r\n    if (this._map) {\r\n      this._map.closePopup(this._popup);\r\n      this._map.off('click', this._getPopupData, this);\r\n      this._map.off('dblclick', this._resetPopupState, this);\r\n    }\r\n    this._popup = false;\r\n    return this;\r\n  },\r\n\r\n  bringToFront: function () {\r\n    this.options.position = 'front';\r\n    if (this._currentImage) {\r\n      this._currentImage.bringToFront();\r\n      this._setAutoZIndex(Math.max);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  bringToBack: function () {\r\n    this.options.position = 'back';\r\n    if (this._currentImage) {\r\n      this._currentImage.bringToBack();\r\n      this._setAutoZIndex(Math.min);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  setZIndex: function (value) {\r\n    this.options.zIndex = value;\r\n    if (this._currentImage) {\r\n      this._currentImage.setZIndex(value);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _setAutoZIndex: function (compare) {\r\n    // go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)\r\n    if (!this._currentImage) {\r\n      return;\r\n    }\r\n    var layers = this._currentImage.getPane().children;\r\n    var edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min\r\n    for (var i = 0, len = layers.length, zIndex; i < len; i++) {\r\n      zIndex = layers[i].style.zIndex;\r\n      if (layers[i] !== this._currentImage._image && zIndex) {\r\n        edgeZIndex = compare(edgeZIndex, +zIndex);\r\n      }\r\n    }\r\n\r\n    if (isFinite(edgeZIndex)) {\r\n      this.options.zIndex = edgeZIndex + compare(-1, 1);\r\n      this.setZIndex(this.options.zIndex);\r\n    }\r\n  },\r\n\r\n  getAttribution: function () {\r\n    return this.options.attribution;\r\n  },\r\n\r\n  getOpacity: function () {\r\n    return this.options.opacity;\r\n  },\r\n\r\n  setOpacity: function (opacity) {\r\n    this.options.opacity = opacity;\r\n    if (this._currentImage) {\r\n      this._currentImage.setOpacity(opacity);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  getTimeRange: function () {\r\n    return [this.options.from, this.options.to];\r\n  },\r\n\r\n  setTimeRange: function (from, to) {\r\n    this.options.from = from;\r\n    this.options.to = to;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  metadata: function (callback, context) {\r\n    this.service.metadata(callback, context);\r\n    return this;\r\n  },\r\n\r\n  authenticate: function (token) {\r\n    this.service.authenticate(token);\r\n    return this;\r\n  },\r\n\r\n  redraw: function () {\r\n    this._update();\r\n  },\r\n\r\n  _renderImage: function (url, bounds, contentType) {\r\n    if (this._map) {\r\n      // if no output directory has been specified for a service, MIME data will be returned\r\n      if (contentType) {\r\n        url = 'data:' + contentType + ';base64,' + url;\r\n      }\r\n\r\n      // if server returns an inappropriate response, abort.\r\n      if (!url) return;\r\n\r\n      // create a new image overlay and add it to the map\r\n      // to start loading the image\r\n      // opacity is 0 while the image is loading\r\n      var image = new Overlay(url, bounds, {\r\n        opacity: 0,\r\n        crossOrigin: this.options.withCredentials ? 'use-credentials' : this.options.useCors,\r\n        alt: this.options.alt,\r\n        pane: this.options.pane || this.getPane(),\r\n        interactive: this.options.interactive\r\n      }).addTo(this._map);\r\n\r\n      var onOverlayError = function () {\r\n        this._map.removeLayer(image);\r\n        this.fire('error');\r\n        image.off('load', onOverlayLoad, this);\r\n      };\r\n\r\n      var onOverlayLoad = function (e) {\r\n        image.off('error', onOverlayLoad, this);\r\n        if (this._map) {\r\n          var newImage = e.target;\r\n          var oldImage = this._currentImage;\r\n\r\n          // if the bounds of this image matches the bounds that\r\n          // _renderImage was called with and we have a map with the same bounds\r\n          // hide the old image if there is one and set the opacity\r\n          // of the new image otherwise remove the new image\r\n          if (newImage._bounds.equals(bounds) && newImage._bounds.equals(this._map.getBounds())) {\r\n            this._currentImage = newImage;\r\n\r\n            if (this.options.position === 'front') {\r\n              this.bringToFront();\r\n            } else if (this.options.position === 'back') {\r\n              this.bringToBack();\r\n            }\r\n\r\n            if (this.options.zIndex) {\r\n              this.setZIndex(this.options.zIndex);\r\n            }\r\n\r\n            if (this._map && this._currentImage._map) {\r\n              this._currentImage.setOpacity(this.options.opacity);\r\n            } else {\r\n              this._currentImage._map.removeLayer(this._currentImage);\r\n            }\r\n\r\n            if (oldImage && this._map) {\r\n              this._map.removeLayer(oldImage);\r\n            }\r\n\r\n            if (oldImage && oldImage._map) {\r\n              oldImage._map.removeLayer(oldImage);\r\n            }\r\n          } else {\r\n            this._map.removeLayer(newImage);\r\n          }\r\n        }\r\n\r\n        this.fire('load', {\r\n          bounds: bounds\r\n        });\r\n      };\r\n\r\n      // If loading the image fails\r\n      image.once('error', onOverlayError, this);\r\n\r\n      // once the image loads\r\n      image.once('load', onOverlayLoad, this);\r\n    }\r\n  },\r\n\r\n  _update: function () {\r\n    if (!this._map) {\r\n      return;\r\n    }\r\n\r\n    var zoom = this._map.getZoom();\r\n    var bounds = this._map.getBounds();\r\n\r\n    if (this._animatingZoom) {\r\n      return;\r\n    }\r\n\r\n    if (this._map._panTransition && this._map._panTransition._inProgress) {\r\n      return;\r\n    }\r\n\r\n    if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\r\n      if (this._currentImage) {\r\n        this._currentImage._map.removeLayer(this._currentImage);\r\n        this._currentImage = null;\r\n      }\r\n      return;\r\n    }\r\n\r\n    var params = this._buildExportParams();\r\n    Util.extend(params, this.options.requestParams);\r\n\r\n    if (params) {\r\n      this._requestExport(params, bounds);\r\n\r\n      this.fire('loading', {\r\n        bounds: bounds\r\n      });\r\n    } else if (this._currentImage) {\r\n      this._currentImage._map.removeLayer(this._currentImage);\r\n      this._currentImage = null;\r\n    }\r\n  },\r\n\r\n  _renderPopup: function (latlng, error, results, response) {\r\n    latlng = latLng(latlng);\r\n    if (this._shouldRenderPopup && this._lastClick.equals(latlng)) {\r\n      // add the popup to the map where the mouse was clicked at\r\n      var content = this._popupFunction(error, results, response);\r\n      if (content) {\r\n        this._popup.setLatLng(latlng).setContent(content).openOn(this._map);\r\n      }\r\n    }\r\n  },\r\n\r\n  _resetPopupState: function (e) {\r\n    this._shouldRenderPopup = false;\r\n    this._lastClick = e.latlng;\r\n  },\r\n\r\n  _calculateBbox: function () {\r\n    var pixelBounds = this._map.getPixelBounds();\r\n\r\n    var sw = this._map.unproject(pixelBounds.getBottomLeft());\r\n    var ne = this._map.unproject(pixelBounds.getTopRight());\r\n\r\n    var neProjected = this._map.options.crs.project(ne);\r\n    var swProjected = this._map.options.crs.project(sw);\r\n\r\n    // this ensures ne/sw are switched in polar maps where north/top bottom/south is inverted\r\n    var boundsProjected = bounds(neProjected, swProjected);\r\n\r\n    return [boundsProjected.getBottomLeft().x, boundsProjected.getBottomLeft().y, boundsProjected.getTopRight().x, boundsProjected.getTopRight().y].join(',');\r\n  },\r\n\r\n  _calculateImageSize: function () {\r\n    // ensure that we don't ask ArcGIS Server for a taller image than we have actual map displaying within the div\r\n    var bounds = this._map.getPixelBounds();\r\n    var size = this._map.getSize();\r\n\r\n    var sw = this._map.unproject(bounds.getBottomLeft());\r\n    var ne = this._map.unproject(bounds.getTopRight());\r\n\r\n    var top = this._map.latLngToLayerPoint(ne).y;\r\n    var bottom = this._map.latLngToLayerPoint(sw).y;\r\n\r\n    if (top > 0 || bottom < size.y) {\r\n      size.y = bottom - top;\r\n    }\r\n\r\n    return size.x + ',' + size.y;\r\n  }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}