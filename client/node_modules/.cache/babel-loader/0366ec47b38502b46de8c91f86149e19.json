{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Profile from'./../Components/Profiles/MyProfile/Index.jsx';import{useDispatch,useSelector}from'react-redux';import axios from'axios';import{useParams}from'react-router-dom';import{requestPostsProfile}from'./../Actions/index.jsx';import{responsePostsProfile}from'./../Actions/index.jsx';import{responseMorePostsProfile}from'./../Actions/index.jsx';import{fetchMorePostsProfile}from'./../Actions/index.jsx';import{responseAddCommentProfile}from'./../Actions/index.jsx';import{requestAddCommentProfile}from'./../Actions/index.jsx';function ProfileContainer(_ref){var myPosts=_ref.myPosts;var dispatch=useDispatch();var _useParams=useParams(),idProfile=_useParams.idProfile;var _useSelector=useSelector(function(state){return state.myPosts;}),currentPage=_useSelector.currentPage;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingSetting=_useState2[0],setLoadingSetting=_useState2[1];var fetchPostsProfile=function fetchPostsProfile(){dispatch(requestPostsProfile());axios.get('https://www.api.mohi.vn/api/auth/post-profile/'+idProfile).then(function(res){dispatch(responsePostsProfile(res.data));});};useEffect(function(){fetchPostsProfile();},[]);useEffect(function(){if(currentPage>1){dispatch(fetchMorePostsProfile());getPostNewFeedInfinite();}},[currentPage]);var getPostNewFeedInfinite=function getPostNewFeedInfinite(){axios({method:'GET',url:'https://www.api.mohi.vn/api/auth/post-profile/'+idProfile,params:{page:currentPage}}).then(function(res){dispatch(responseMorePostsProfile(res.data));}).catch(function(e){if(axios.isCancel(e))return;});};var sendReactionPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(reaction,postId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(reaction==='unlike')){_context.next=4;break;}console.log(reaction,postId);_context.next=6;break;case 4:_context.next=6;return axios.post('https://www.api.mohi.vn/api/auth/create-action',{actions_PostId:postId,actions_action:reaction}).then(function(res){}).catch(function(e){});case 6:case\"end\":return _context.stop();}}},_callee);}));return function sendReactionPost(_x,_x2){return _ref2.apply(this,arguments);};}();var onSubmitComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value,idPost){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(requestAddCommentProfile());_context2.next=3;return axios.post('https://www.api.mohi.vn/api/auth/create-comment',{comment_PostId:idPost,comment_Content:value,comment_Type:'parent'}).then(function(res){dispatch(responseAddCommentProfile(res.data));}).catch(function(e){});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmitComment(_x3,_x4){return _ref3.apply(this,arguments);};}();var hideOnePostOfUser=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idPost){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post('https://www.api.mohi.vn/api/auth/hide-one-post',{id:idPost}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function hideOnePostOfUser(_x5){return _ref4.apply(this,arguments);};}();var unNotificationOfPost=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(idPost){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post('https://www.api.mohi.vn/api/auth/hide-notifycation-post',{id:idPost}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function unNotificationOfPost(_x6){return _ref5.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(idPost){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post('https://www.api.mohi.vn/api/auth/delete-post-profile',{id:idPost}).then(function(res){setLoadingSetting(false);}).catch(function(e){});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function deletePost(_x7){return _ref6.apply(this,arguments);};}();var loadingSendRequestSetting=function loadingSendRequestSetting(type,idPost,idUser){setLoadingSetting(true);switch(type){case'hidePost':hideOnePostOfUser(idPost);break;case'unNotification':unNotificationOfPost(idPost);break;case'deletePost':deletePost(idPost);break;default:break;}};return/*#__PURE__*/React.createElement(Profile,{sendReactionPost:sendReactionPost,onSubmitComment:onSubmitComment,loadingSendRequestSetting:loadingSendRequestSetting,loadingSetting:loadingSetting});}export default ProfileContainer;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Containers/ProfileContainer.jsx"],"names":["React","useEffect","useState","Profile","useDispatch","useSelector","axios","useParams","requestPostsProfile","responsePostsProfile","responseMorePostsProfile","fetchMorePostsProfile","responseAddCommentProfile","requestAddCommentProfile","ProfileContainer","myPosts","dispatch","idProfile","state","currentPage","loadingSetting","setLoadingSetting","fetchPostsProfile","get","then","res","data","getPostNewFeedInfinite","method","url","params","page","catch","e","isCancel","sendReactionPost","reaction","postId","console","log","post","actions_PostId","actions_action","onSubmitComment","value","idPost","comment_PostId","comment_Content","comment_Type","hideOnePostOfUser","id","unNotificationOfPost","deletePost","loadingSendRequestSetting","type","idUser"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Profile from './../Components/Profiles/MyProfile/Index.jsx';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport axios from 'axios';\r\nimport {useParams} from 'react-router-dom';\r\nimport {requestPostsProfile} from './../Actions/index.jsx';\r\nimport {responsePostsProfile} from './../Actions/index.jsx';\r\nimport {responseMorePostsProfile} from './../Actions/index.jsx';\r\nimport {fetchMorePostsProfile} from './../Actions/index.jsx';\r\nimport { responseAddCommentProfile } from './../Actions/index.jsx';\r\nimport { requestAddCommentProfile } from './../Actions/index.jsx';\r\n\r\nfunction ProfileContainer({myPosts}){\r\n  const dispatch = useDispatch();\r\n  const {idProfile} = useParams();\r\n  const { currentPage } = useSelector(state => state.myPosts);\r\n  const [loadingSetting, setLoadingSetting] = useState(false)\r\n\r\n  const fetchPostsProfile = () => {\r\n    dispatch(requestPostsProfile())\r\n\r\n    axios.get('https://www.api.mohi.vn/api/auth/post-profile/'+ idProfile)\r\n    .then((res) => {\r\n      dispatch(responsePostsProfile(res.data))\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchPostsProfile()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(currentPage > 1){\r\n      dispatch(fetchMorePostsProfile())\r\n      getPostNewFeedInfinite();\r\n    }\r\n  }, [currentPage])\r\n\r\n  const getPostNewFeedInfinite = () => {\r\n        axios({\r\n          method: 'GET',\r\n          url: 'https://www.api.mohi.vn/api/auth/post-profile/'+ idProfile,\r\n          params: {page : currentPage}\r\n        })\r\n        .then(res =>{\r\n          dispatch(responseMorePostsProfile(res.data))\r\n        })\r\n        .catch(e => {\r\n          if(axios.isCancel(e)) return\r\n        })\r\n  }\r\n\r\n  const sendReactionPost = async (reaction, postId) => {\r\n    if(reaction === 'unlike'){\r\n      console.log(reaction, postId);\r\n    }else {\r\n      await axios.post('https://www.api.mohi.vn/api/auth/create-action', {actions_PostId: postId, actions_action: reaction}).then((res) => {\r\n      }).catch((e) => {\r\n      })\r\n    }\r\n  }\r\n\r\n  const onSubmitComment = async (value, idPost) => {\r\n    dispatch(requestAddCommentProfile())\r\n\r\n    await axios.post('https://www.api.mohi.vn/api/auth/create-comment', {comment_PostId: idPost, comment_Content: value, comment_Type: 'parent'})\r\n    .then((res) => {\r\n      dispatch(responseAddCommentProfile(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const hideOnePostOfUser = async (idPost) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/hide-one-post', {id: idPost})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n\r\n  const unNotificationOfPost = async (idPost) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/hide-notifycation-post', {id: idPost})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n\r\n  const deletePost = async (idPost) => {\r\n    await axios.post('https://www.api.mohi.vn/api/auth/delete-post-profile', {id: idPost})\r\n    .then((res) => {\r\n      setLoadingSetting(false)\r\n    })\r\n    .catch((e) => {\r\n    })\r\n  }\r\n\r\n  const loadingSendRequestSetting = (type, idPost, idUser) => {\r\n    setLoadingSetting(true)\r\n    switch (type) {\r\n      case 'hidePost':\r\n        hideOnePostOfUser(idPost)\r\n        break;\r\n      case 'unNotification':\r\n        unNotificationOfPost(idPost)\r\n        break;\r\n      case 'deletePost':\r\n        deletePost(idPost)\r\n        break;\r\n      default:\r\n        break;\r\n\r\n    }\r\n  }\r\n\r\n  return(\r\n    <Profile sendReactionPost={sendReactionPost} onSubmitComment={onSubmitComment} loadingSendRequestSetting={loadingSendRequestSetting} loadingSetting={loadingSetting}/>\r\n  )\r\n}\r\n\r\nexport default ProfileContainer;\r\n"]},"metadata":{},"sourceType":"module"}