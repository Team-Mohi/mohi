{"ast":null,"code":"import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./index.css';import{Link,useHistory,useParams}from\"react-router-dom\";import{AiFillCloseCircle,AiFillLike,AiFillCaretLeft,AiFillCaretRight}from\"react-icons/ai\";import{BsThreeDots}from\"react-icons/bs\";import{FaRegCommentAlt,FaUserLock,FaUserAlt}from\"react-icons/fa\";import{MdPublic}from\"react-icons/md\";import moment from'moment';function ModalPost(){var history=useHistory();var _useParams=useParams(),index=_useParams.index;var postData=history.location.state;console.log(postData);var images=postData.images_post;var _useState=useState(index),_useState2=_slicedToArray(_useState,2),indexCurrent=_useState2[0],setIndexCurrent=_useState2[1];var lastIndex=images.length-1;var _useState3=useState(images[index].post_images_Url),_useState4=_slicedToArray(_useState3,2),currentPhoto=_useState4[0],setCurrentPhoto=_useState4[1];moment.updateLocale('en',{relativeTime:{future:\"%s\",past:\"%s trước\",s:'vài giây',ss:'%d phút',m:\"1 phút trước\",mm:\"%d phút\",h:\"an giờ\",hh:\"%d giờ\",d:\"một ngày\",dd:\"%d ngày\",w:\"một tuần\",ww:\"%d tuần\",M:\"một tháng\",MM:\"%d tháng\",y:\"một năm\",yy:\"%d năm\"}});useEffect(function(){document.addEventListener(\"keydown\",handleKeyUp,false);return function(){return document.removeEventListener(\"keydown\",handleKeyUp,false);};});var backToHistory=function backToHistory(){history.goBack();};var handleKeyUp=function handleKeyUp(e){if(e.keyCode===27){backToHistory();}};var prePostImage=function prePostImage(){if(Number(indexCurrent)===0){setIndexCurrent(lastIndex);setCurrentPhoto(images[lastIndex].post_images_Url);}else{var _preImage=Number(indexCurrent)-1;setCurrentPhoto(images[_preImage].post_images_Url);setIndexCurrent(_preImage);}};var nextPostImage=function nextPostImage(){if(Number(indexCurrent)===images.length-1){setIndexCurrent(0);setCurrentPhoto(images[0].post_images_Url);}else{var _nextImage=Number(indexCurrent)+1;setCurrentPhoto(images[_nextImage].post_images_Url);setIndexCurrent(_nextImage);}};var PrivacyPost=function PrivacyPost(){switch(postData.post_Privacy){case\"public\":return/*#__PURE__*/React.createElement(MdPublic,null);break;case\"onlyme\":return/*#__PURE__*/React.createElement(FaUserLock,null);break;case\"friend\":return/*#__PURE__*/React.createElement(FaUserAlt,null);break;default:return null;}};return/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-container\"},/*#__PURE__*/React.createElement(AiFillCloseCircle,{onClick:backToHistory,className:\"close-modal-post-image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-background\",style:{filter:'blur(10px)',backgroundImage:\"url(\".concat(currentPhoto,\")\")}}),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-carousel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-carousel-container\"},images.length>1?/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-pre-image\"},/*#__PURE__*/React.createElement(\"button\",{onClick:prePostImage},/*#__PURE__*/React.createElement(AiFillCaretLeft,null))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-curent-image\"},images[indexCurrent].post_images_Type==='image'?/*#__PURE__*/React.createElement(\"img\",{src:currentPhoto,alt:\"\"}):/*#__PURE__*/React.createElement(\"video\",{src:currentPhoto,autoPlay:true,preload:\"metadata\",controls:true})),images.length>1?/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-next-image\"},/*#__PURE__*/React.createElement(\"button\",{onClick:nextPostImage},/*#__PURE__*/React.createElement(AiFillCaretRight,null))):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-info-user\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-info-user-avatar\"},/*#__PURE__*/React.createElement(\"img\",{src:postData.user_admin_post.user_avatar,alt:postData.user_admin_post.user_first_name+' '+postData.user_admin_post.user_last_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-info-user-name\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:'/'+postData.user_admin_post.user_username},postData.user_admin_post.user_first_name+' '+postData.user_admin_post.user_last_name)),/*#__PURE__*/React.createElement(\"span\",null,moment(postData.created_at,\"YYYYMMDD\\h:m:s\").fromNow(),\" \",/*#__PURE__*/React.createElement(PrivacyPost,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-info-user-option\"},/*#__PURE__*/React.createElement(BsThreeDots,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-content\"},postData.post_Content),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-reaction\"},postData.actions_post.length?/*#__PURE__*/React.createElement(\"span\",null,postData.actions_post.length,\" c\\u1EA3m x\\xFAc\"):null,postData.comment_post.length?/*#__PURE__*/React.createElement(\"span\",null,postData.comment_post.length,\" c\\u1EA3m x\\xFAc\"):null,/*#__PURE__*/React.createElement(\"span\",null,\"Chia s\\u1EBB\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-post-action\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiFillLike,null),\" Th\\xEDch\"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(FaRegCommentAlt,null),\" B\\xECnh lu\\u1EADn\")))));}export default ModalPost;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/ModalPost/index.jsx"],"names":["React","useEffect","useState","Link","useHistory","useParams","AiFillCloseCircle","AiFillLike","AiFillCaretLeft","AiFillCaretRight","BsThreeDots","FaRegCommentAlt","FaUserLock","FaUserAlt","MdPublic","moment","ModalPost","history","index","postData","location","state","console","log","images","images_post","indexCurrent","setIndexCurrent","lastIndex","length","post_images_Url","currentPhoto","setCurrentPhoto","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","document","addEventListener","handleKeyUp","removeEventListener","backToHistory","goBack","e","keyCode","prePostImage","Number","_preImage","nextPostImage","_nextImage","PrivacyPost","post_Privacy","filter","backgroundImage","post_images_Type","user_admin_post","user_avatar","user_first_name","user_last_name","user_username","created_at","fromNow","post_Content","actions_post","comment_post"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport './index.css';\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\nimport { AiFillCloseCircle, AiFillLike, AiFillCaretLeft, AiFillCaretRight } from \"react-icons/ai\";\r\nimport { BsThreeDots } from \"react-icons/bs\";\r\nimport { FaRegCommentAlt, FaUserLock, FaUserAlt } from \"react-icons/fa\";\r\nimport { MdPublic } from \"react-icons/md\";\r\nimport moment from 'moment';\r\n\r\nfunction ModalPost(){\r\n  const history = useHistory();\r\n  const { index } = useParams();\r\n  const postData = history.location.state;\r\n  console.log(postData);\r\n\r\n  const images = postData.images_post;\r\n  const [indexCurrent, setIndexCurrent] = useState(index);\r\n  const lastIndex = images.length - 1;\r\n  const [currentPhoto, setCurrentPhoto] = useState(images[index].post_images_Url);\r\n\r\n  moment.updateLocale('en', {\r\n    relativeTime : {\r\n        future: \"%s\",\r\n        past:   \"%s trước\",\r\n        s  : 'vài giây',\r\n        ss : '%d phút',\r\n        m:  \"1 phút trước\",\r\n        mm: \"%d phút\",\r\n        h:  \"an giờ\",\r\n        hh: \"%d giờ\",\r\n        d:  \"một ngày\",\r\n        dd: \"%d ngày\",\r\n        w:  \"một tuần\",\r\n        ww: \"%d tuần\",\r\n        M:  \"một tháng\",\r\n        MM: \"%d tháng\",\r\n        y:  \"một năm\",\r\n        yy: \"%d năm\"\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleKeyUp, false);\r\n\r\n    return () => document.removeEventListener(\"keydown\", handleKeyUp, false);\r\n  })\r\n\r\n  const backToHistory = () => {\r\n    history.goBack()\r\n  }\r\n  const handleKeyUp = (e) => {\r\n    if (e.keyCode === 27) {\r\n        backToHistory()\r\n    }\r\n  }\r\n\r\n  const prePostImage = () => {\r\n    if(Number(indexCurrent) === 0){\r\n      setIndexCurrent(lastIndex)\r\n      setCurrentPhoto(images[lastIndex].post_images_Url)\r\n    }else {\r\n      let _preImage = Number(indexCurrent) - 1;\r\n      setCurrentPhoto(images[_preImage].post_images_Url)\r\n      setIndexCurrent(_preImage)\r\n    }\r\n  }\r\n\r\n  const nextPostImage = () => {\r\n    if(Number(indexCurrent) === images.length - 1){\r\n      setIndexCurrent(0)\r\n      setCurrentPhoto(images[0].post_images_Url)\r\n    }else {\r\n      let _nextImage = Number(indexCurrent) + 1;\r\n      setCurrentPhoto(images[_nextImage].post_images_Url)\r\n      setIndexCurrent(_nextImage)\r\n    }\r\n  }\r\n\r\n  const PrivacyPost = () => {\r\n    switch (postData.post_Privacy) {\r\n      case \"public\":\r\n          return <MdPublic />\r\n        break;\r\n      case \"onlyme\":\r\n          return <FaUserLock />\r\n        break;\r\n      case \"friend\":\r\n          return <FaUserAlt />\r\n        break;\r\n      default: return null\r\n\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"modal-post\">\r\n      <div className=\"modal-post-container\">\r\n        <AiFillCloseCircle onClick={backToHistory}  className=\"close-modal-post-image\" />\r\n        <div className=\"modal-post-background\" style={{ filter: 'blur(10px)',backgroundImage: `url(${currentPhoto})`}}></div>\r\n        <div className=\"modal-post-carousel\" >\r\n          <div className=\"modal-post-carousel-container\" >\r\n          {images.length > 1 ?\r\n            <div className=\"modal-post-pre-image\">\r\n              <button onClick={prePostImage}><AiFillCaretLeft /></button>\r\n            </div> : null}\r\n            <div className=\"modal-post-curent-image\">\r\n              {images[indexCurrent].post_images_Type === 'image' ?\r\n                <img src={currentPhoto} alt=\"\" />\r\n                :\r\n                <video src={currentPhoto} autoPlay preload=\"metadata\" controls></video>\r\n              }\r\n            </div>\r\n            {images.length > 1 ?\r\n            <div className=\"modal-post-next-image\">\r\n              <button onClick={nextPostImage}><AiFillCaretRight /></button>\r\n            </div> : null}\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-post-info\">\r\n          <div className=\"modal-post-info-user\">\r\n            <div className=\"modal-post-info-user-avatar\">\r\n              <img src={postData.user_admin_post.user_avatar} alt={postData.user_admin_post.user_first_name + ' ' + postData.user_admin_post.user_last_name}/>\r\n            </div>\r\n            <div className=\"modal-post-info-user-name\">\r\n              <p><Link to={'/' + postData.user_admin_post.user_username}>{postData.user_admin_post.user_first_name + ' ' + postData.user_admin_post.user_last_name}</Link></p>\r\n              <span>{moment(postData.created_at, \"YYYYMMDD\\h:m:s\").fromNow()} <PrivacyPost /></span>\r\n            </div>\r\n            <div className=\"modal-post-info-user-option\">\r\n              <BsThreeDots />\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-post-content\">\r\n            {postData.post_Content}\r\n          </div>\r\n          <div className=\"modal-post-reaction\">\r\n            {postData.actions_post.length ? <span>{postData.actions_post.length} cảm xúc</span> : null}\r\n            {postData.comment_post.length ? <span>{postData.comment_post.length} cảm xúc</span> : null}\r\n            <span>Chia sẻ</span>\r\n          </div>\r\n          <div className=\"modal-post-action\">\r\n            <span><AiFillLike /> Thích</span>\r\n            <span><FaRegCommentAlt /> Bình luận</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalPost;\r\n"]},"metadata":{},"sourceType":"module"}