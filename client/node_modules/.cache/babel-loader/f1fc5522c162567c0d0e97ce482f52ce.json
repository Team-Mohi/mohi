{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 10px;\\n  border: 0;\\n  z-index: 2;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-height: 100px;\\n  overflow-y: auto;\\n  border: 1px solid #ddd;\\n  margin-left: 10px;\\n  font-size: 14px;\\n  padding: 5px 10px;\\n  border-radius: 30px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from\"react\";import Editor,{createEditorStateWithText}from\"draft-js-plugins-editor\";import createEmojiPlugin from\"draft-js-emoji-plugin\";import\"draft-js-emoji-plugin/lib/plugin.css\";import style from'styled-components';import{EditorState,Modifier,ContentState,convertToRaw}from'draft-js';import htmlToDraft from'html-to-draftjs';import createLinkifyPlugin from'draft-js-linkify-plugin';import draftToHtml from'draftjs-to-html';var emojiPlugin=createEmojiPlugin({useNativeArt:true});var linkifyPlugin=createLinkifyPlugin();var EmojiSuggestions=emojiPlugin.EmojiSuggestions,EmojiSelect=emojiPlugin.EmojiSelect;var plugins=[emojiPlugin,linkifyPlugin];var StyleEditor=style.div(_templateObject());var Wrapper=style.div(_templateObject2());var StyleEmoji=style.div(_templateObject3());var CommentReplyEditor=/*#__PURE__*/function(_Component){_inherits(CommentReplyEditor,_Component);var _super=_createSuper(CommentReplyEditor);function CommentReplyEditor(){var _this;_classCallCheck(this,CommentReplyEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={editorState:EditorState.createEmpty(),idUserReceivedReply:_this.props.idUserReceivedReply,userReceivedReply:_this.props.userReceivedReply,idUserReceivedReplyArr:[]};_this.onChange=function(editorState){_this.setState({editorState:editorState});};return _this;}_createClass(CommentReplyEditor,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(StyleEditor,null,/*#__PURE__*/React.createElement(Editor,{editorState:this.state.editorState,onChange:this.onChange,plugins:plugins,placeholder:\"Vi\\u1EBFt b\\xECnh lu\\u1EADn...\"})),/*#__PURE__*/React.createElement(EmojiSuggestions,null),/*#__PURE__*/React.createElement(StyleEmoji,null,/*#__PURE__*/React.createElement(EmojiSelect,null)));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.idUserReceivedReply!==state.idUserReceivedReply||props.userReceivedReply!==state.userReceivedReply){if(state.idUserReceivedReplyArr.indexOf(props.idUserReceivedReply)<0){var insertUserReceivedReply=function insertUserReceivedReply(userReceivedReply,idUserReceivedReply,editorState){var currentContent=editorState.getCurrentContent(),currentSelection=editorState.getSelection();var linkUserReceivedReply=\"<a href='\"+idUserReceivedReply+\"' ><strong>\"+userReceivedReply+\"</strong></a>\";var _htmlToDraft=htmlToDraft(linkUserReceivedReply),contentBlocks=_htmlToDraft.contentBlocks,entityMap=_htmlToDraft.entityMap;var newContent=Modifier.replaceWithFragment(currentContent,currentSelection,ContentState.createFromBlockArray(contentBlocks,entityMap).getBlockMap());var newEditorState=EditorState.set(editorState,{currentContent:newContent});return EditorState.forceSelection(newEditorState,newContent.getSelectionAfter());};return{idUserReceivedReply:props.idUserReceivedReply,userReceivedReply:props.userReceivedReply,editorState:insertUserReceivedReply(props.userReceivedReply,props.idUserReceivedReply,state.editorState),idUserReceivedReplyArr:[].concat(_toConsumableArray(state.idUserReceivedReplyArr),[props.idUserReceivedReply])};}}// Return null to indicate no change to state.\nreturn null;}}]);return CommentReplyEditor;}(Component);export{CommentReplyEditor as default};","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/CommentReplyEditor.jsx"],"names":["React","Component","Editor","createEditorStateWithText","createEmojiPlugin","style","EditorState","Modifier","ContentState","convertToRaw","htmlToDraft","createLinkifyPlugin","draftToHtml","emojiPlugin","useNativeArt","linkifyPlugin","EmojiSuggestions","EmojiSelect","plugins","StyleEditor","div","Wrapper","StyleEmoji","CommentReplyEditor","state","editorState","createEmpty","idUserReceivedReply","props","userReceivedReply","idUserReceivedReplyArr","onChange","setState","indexOf","insertUserReceivedReply","currentContent","getCurrentContent","currentSelection","getSelection","linkUserReceivedReply","contentBlocks","entityMap","newContent","replaceWithFragment","createFromBlockArray","getBlockMap","newEditorState","set","forceSelection","getSelectionAfter"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Editor, { createEditorStateWithText } from \"draft-js-plugins-editor\";\r\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\r\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\r\nimport style from 'styled-components';\r\nimport { EditorState, Modifier, ContentState, convertToRaw } from 'draft-js';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport createLinkifyPlugin from 'draft-js-linkify-plugin';\r\nimport draftToHtml from 'draftjs-to-html';\r\n\r\nconst emojiPlugin = createEmojiPlugin({\r\n  useNativeArt: true\r\n});\r\nconst linkifyPlugin = createLinkifyPlugin();\r\n\r\nconst { EmojiSuggestions, EmojiSelect } = emojiPlugin;\r\nconst plugins = [emojiPlugin, linkifyPlugin];\r\n\r\nconst StyleEditor = style.div`\r\n  width: 100%;\r\n  max-height: 100px;\r\n  overflow-y: auto;\r\n  border: 1px solid #ddd;\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n  padding: 5px 10px;\r\n  border-radius: 30px;\r\n`;\r\n\r\nconst Wrapper = style.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst StyleEmoji = style.div`\r\n  position: absolute;\r\n  right: 10px;\r\n  border: 0;\r\n  z-index: 2;\r\n`;\r\n\r\nexport default class CommentReplyEditor extends Component {\r\n    state = {\r\n      editorState: EditorState.createEmpty(),\r\n      idUserReceivedReply: this.props.idUserReceivedReply,\r\n      userReceivedReply: this.props.userReceivedReply,\r\n      idUserReceivedReplyArr: []\r\n    };\r\n\r\n\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n     if (props.idUserReceivedReply !== state.idUserReceivedReply || props.userReceivedReply !== state.userReceivedReply) {\r\n       if(state.idUserReceivedReplyArr.indexOf(props.idUserReceivedReply) < 0){\r\n\r\n         const insertUserReceivedReply = (userReceivedReply, idUserReceivedReply, editorState) => {\r\n             const currentContent = editorState.getCurrentContent(),\r\n                   currentSelection = editorState.getSelection();\r\n              const linkUserReceivedReply = \"<a href='\"+idUserReceivedReply+\"' ><strong>\"+ userReceivedReply +\"</strong></a>\";\r\n              let { contentBlocks, entityMap } = htmlToDraft(linkUserReceivedReply);\r\n\r\n             const newContent = Modifier.replaceWithFragment(\r\n               currentContent,\r\n               currentSelection,\r\n               ContentState.createFromBlockArray(contentBlocks, entityMap).getBlockMap()\r\n             );\r\n             const newEditorState = EditorState.set(editorState, {\r\n                currentContent: newContent,\r\n              });\r\n             return  EditorState.forceSelection(newEditorState, newContent.getSelectionAfter());\r\n           }\r\n\r\n         return {\r\n           idUserReceivedReply: props.idUserReceivedReply,\r\n           userReceivedReply: props.userReceivedReply,\r\n           editorState: insertUserReceivedReply(props.userReceivedReply, props.idUserReceivedReply, state.editorState),\r\n           idUserReceivedReplyArr: [...state.idUserReceivedReplyArr, props.idUserReceivedReply]\r\n         };\r\n       }\r\n     }\r\n      // Return null to indicate no change to state.\r\n      return null;\r\n     }\r\n\r\n  onChange = (editorState) => {\r\n    this.setState({\r\n      editorState\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Wrapper>\r\n        <StyleEditor>\r\n          <Editor\r\n            editorState={this.state.editorState}\r\n            onChange={this.onChange}\r\n            plugins={plugins}\r\n            placeholder=\"Viết bình luận...\"\r\n          />\r\n        </StyleEditor>\r\n        <EmojiSuggestions />\r\n        <StyleEmoji>\r\n          <EmojiSelect />\r\n        </StyleEmoji>\r\n      </Wrapper>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}