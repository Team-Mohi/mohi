{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\Profiles\\\\MyProfile\\\\Gallery.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Row, Col } from 'antd';\nimport { Link, Route, Switch, useLocation, useParams } from 'react-router-dom';\nimport { AiFillPicture, AiOutlineLike } from 'react-icons/ai';\nimport { MdZoomOutMap } from 'react-icons/md';\nimport { FaCommentDots } from 'react-icons/fa';\nimport { BsFillPlayFill } from 'react-icons/bs';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { loadMoreImageProfile } from './../../../Actions/index.jsx';\nimport { loadMoreVideoProfile } from './../../../Actions/index.jsx';\nimport { setLoadMoreDefault } from './../../../Actions/index.jsx';\nimport { Image, Transformation } from 'cloudinary-react';\nimport { toggleStatusPresentialModal } from './../../../Actions/index.jsx';\n\nfunction Gallery({\n  profile\n}) {\n  const path = useLocation().pathname.split('/');\n  const isActive = path[4];\n  const {\n    idProfile\n  } = useParams();\n  const [isChangeAlbum, setIsChangeAlbum] = useState(true);\n  const {\n    info,\n    listImage,\n    listVideo,\n    lastImageOfList,\n    lastVideoOfList\n  } = useSelector(state => state.profile);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setLoadMoreDefault());\n  }, []);\n\n  function changeContentAlbum() {\n    setIsChangeAlbum(false);\n  }\n\n  const loadMoreImageOfProfile = () => {\n    dispatch(loadMoreImageProfile());\n  };\n\n  const loadMoreVideoOfProfile = () => {\n    dispatch(loadMoreVideoProfile());\n  };\n\n  const getBlobFromUrl = myImageUrl => {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n      request.open('GET', myImageUrl, true);\n      request.responseType = 'blob';\n\n      request.onload = () => {\n        resolve(request.response);\n      };\n\n      request.onerror = reject;\n      request.send();\n    });\n  };\n\n  const getDataFromBlob = myBlob => {\n    return new Promise((resolve, reject) => {\n      let reader = new FileReader();\n\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n\n      reader.onerror = reject;\n      reader.readAsDataURL(myBlob);\n    });\n  };\n\n  const convertUrlToImageData = async myImageUrl => {\n    try {\n      let myBlob = await getBlobFromUrl(myImageUrl);\n      let myImageData = await getDataFromBlob(myBlob);\n      console.log(myImageData);\n      return myImageData;\n    } catch (err) {\n      return null;\n    }\n  };\n\n  const ListALl = () => {\n    if (!listImage.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingTop: '50px',\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, \"Kh\\xF4ng c\\xF3 \\u1EA3nh hi\\u1EC3n th\\u1ECB\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, listImage.slice(0, lastImageOfList).map((image, index) => {\n      return /*#__PURE__*/React.createElement(Col, {\n        span: 6,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"galerry-overview-item-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"galerry-overview-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"galerry-overview-item-image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 23\n        }\n      }, image.post_images_Url.toLowerCase().indexOf('https://') !== -1 ? /*#__PURE__*/React.createElement(\"i\", {\n        style: {\n          backgroundImage: \"url(\" + image.post_images_Url + \")\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 27\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        style: {\n          backgroundImage: \"url(https://res.cloudinary.com/mohi-vn/image/upload/v1607061343/\" + image.post_images_Url + \".jpg)\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"galerry-overview-item-info\",\n        onClick: () => dispatch(toggleStatusPresentialModal('view_image', {\n          list: listImage,\n          activeId: index\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(MdZoomOutMap, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }))))));\n    })), lastImageOfList < listImage.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"load-more\",\n      onClick: loadMoreImageOfProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 83\n      }\n    }, \"Xem th\\xEAm\")));\n  };\n\n  const Album = () => {\n    if (!listVideo.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingTop: '50px',\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 9\n        }\n      }, \"Kh\\xF4ng c\\xF3 video hi\\u1EC3n th\\u1ECB\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"album\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, listVideo.slice(0, lastVideoOfList).map((image, index) => {\n      return /*#__PURE__*/React.createElement(Col, {\n        span: 12,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"album-item-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"album-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"album-image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"video\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"source\", {\n        src: image.post_images_Url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 34\n        }\n      }), \"Your browser does not support HTML5 video.\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"album-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(BsFillPlayFill, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 27\n        }\n      })))));\n    })), lastVideoOfList < listVideo.length && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 50\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"load-more\",\n      onClick: loadMoreVideoOfProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 85\n      }\n    }, \"Xem th\\xEAm\")));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galerry-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galerry-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galerry-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AiFillPicture, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 30\n    }\n  }, \"\\u1EA2nh\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galerry-navigation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/profile/\" + idProfile + \"/gallery/image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: isActive === 'image' || !isActive ? 'galerry-active' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 22\n    }\n  }, idProfile === JSON.parse(localStorage.getItem('ustk')).info.user_username ? `Ảnh của bạn` : `Ảnh của ` + info.user_first_name + ' ' + info.user_last_name))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/profile/\" + idProfile + \"/gallery/video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: isActive === 'video' ? 'galerry-active' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 22\n    }\n  }, idProfile === JSON.parse(localStorage.getItem('ustk')).info.user_username ? `Video của bạn` : `Video của ` + info.user_first_name + ' ' + info.user_last_name)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"galerry-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/:idProfile/gallery/image\",\n    component: ListALl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/:idProfile/gallery/video\",\n    component: Album,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    component: ListALl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default Gallery;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/Gallery.jsx"],"names":["React","useEffect","useState","Row","Col","Link","Route","Switch","useLocation","useParams","AiFillPicture","AiOutlineLike","MdZoomOutMap","FaCommentDots","BsFillPlayFill","useSelector","useDispatch","loadMoreImageProfile","loadMoreVideoProfile","setLoadMoreDefault","Image","Transformation","toggleStatusPresentialModal","Gallery","profile","path","pathname","split","isActive","idProfile","isChangeAlbum","setIsChangeAlbum","info","listImage","listVideo","lastImageOfList","lastVideoOfList","state","dispatch","changeContentAlbum","loadMoreImageOfProfile","loadMoreVideoOfProfile","getBlobFromUrl","myImageUrl","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onload","response","onerror","send","getDataFromBlob","myBlob","reader","FileReader","result","readAsDataURL","convertUrlToImageData","myImageData","console","log","err","ListALl","length","paddingTop","textAlign","display","flexDirection","slice","map","image","index","post_images_Url","toLowerCase","indexOf","backgroundImage","list","activeId","Album","JSON","parse","localStorage","getItem","user_username","user_first_name","user_last_name"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,GAAR,EAAaC,GAAb,QAAuB,MAAvB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BC,WAA9B,EAA2CC,SAA3C,QAA4D,kBAA5D;AACA,SAAQC,aAAR,EAAuBC,aAAvB,QAA2C,gBAA3C;AACA,SAAQC,YAAR,QAA2B,gBAA3B;AACA,SAAQC,aAAR,QAA4B,gBAA5B;AACA,SAAQC,cAAR,QAA6B,gBAA7B;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,oBAAR,QAAmC,8BAAnC;AACA,SAAQC,oBAAR,QAAmC,8BAAnC;AACA,SAAQC,kBAAR,QAAiC,8BAAjC;AACA,SAAQC,KAAR,EAAcC,cAAd,QAAmC,kBAAnC;AACA,SAASC,2BAAT,QAA4C,8BAA5C;;AAEA,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA6B;AAE3B,QAAMC,IAAI,GAAGjB,WAAW,GAAGkB,QAAd,CAAuBC,KAAvB,CAA6B,GAA7B,CAAb;AACA,QAAMC,QAAQ,GAAGH,IAAI,CAAC,CAAD,CAArB;AACA,QAAM;AAACI,IAAAA;AAAD,MAAcpB,SAAS,EAA7B;AACA,QAAM,CAACqB,aAAD,EAAgBC,gBAAhB,IAAoC7B,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAM;AAAC8B,IAAAA,IAAD;AAAOC,IAAAA,SAAP;AAAkBC,IAAAA,SAAlB;AAA6BC,IAAAA,eAA7B;AAA8CC,IAAAA;AAA9C,MAAiErB,WAAW,CAACsB,KAAK,IAAIA,KAAK,CAACb,OAAhB,CAAlF;AACA,QAAMc,QAAQ,GAAGtB,WAAW,EAA5B;AAEAf,EAAAA,SAAS,CAAC,MAAK;AACbqC,IAAAA,QAAQ,CAACnB,kBAAkB,EAAnB,CAAR;AACD,GAFQ,EAEP,EAFO,CAAT;;AAIA,WAASoB,kBAAT,GAA6B;AACzBR,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH;;AAED,QAAMS,sBAAsB,GAAG,MAAM;AACnCF,IAAAA,QAAQ,CAACrB,oBAAoB,EAArB,CAAR;AACD,GAFD;;AAIA,QAAMwB,sBAAsB,GAAG,MAAM;AACnCH,IAAAA,QAAQ,CAACpB,oBAAoB,EAArB,CAAR;AACD,GAFD;;AAIA,QAAMwB,cAAc,GAAIC,UAAD,IAAgB;AACnC,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,UAAIC,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,MAAAA,OAAO,CAACE,IAAR,CAAa,KAAb,EAAoBN,UAApB,EAAgC,IAAhC;AACAI,MAAAA,OAAO,CAACG,YAAR,GAAuB,MAAvB;;AACAH,MAAAA,OAAO,CAACI,MAAR,GAAiB,MAAM;AACnBN,QAAAA,OAAO,CAACE,OAAO,CAACK,QAAT,CAAP;AACH,OAFD;;AAGAL,MAAAA,OAAO,CAACM,OAAR,GAAkBP,MAAlB;AACAC,MAAAA,OAAO,CAACO,IAAR;AACH,KATM,CAAP;AAUH,GAXD;;AAaA,QAAMC,eAAe,GAAIC,MAAD,IAAY;AAClC,WAAO,IAAIZ,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,UAAIW,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AACAD,MAAAA,MAAM,CAACN,MAAP,GAAgB,MAAM;AAClBN,QAAAA,OAAO,CAACY,MAAM,CAACE,MAAR,CAAP;AACH,OAFD;;AAGAF,MAAAA,MAAM,CAACJ,OAAP,GAAiBP,MAAjB;AACAW,MAAAA,MAAM,CAACG,aAAP,CAAqBJ,MAArB;AACH,KAPM,CAAP;AAQH,GATC;;AAWF,QAAMK,qBAAqB,GAAG,MAAOlB,UAAP,IAAsB;AAChD,QAAI;AACA,UAAIa,MAAM,GAAG,MAAMd,cAAc,CAACC,UAAD,CAAjC;AACA,UAAImB,WAAW,GAAG,MAAMP,eAAe,CAACC,MAAD,CAAvC;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;AACA,aAAOA,WAAP;AACH,KALD,CAKE,OAAOG,GAAP,EAAY;AACV,aAAO,IAAP;AACH;AACJ,GATD;;AAWE,QAAMC,OAAO,GAAG,MAAM;AAEpB,QAAG,CAACjC,SAAS,CAACkC,MAAd,EAAqB;AACnB,0BACE;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,UAAU,EAAE,MAAb;AAAqBC,UAAAA,SAAS,EAAE;AAAhC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADF;AAGD;;AAED,wBACE;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,OAAO,EAAE,MAAV;AAAkBC,QAAAA,aAAa,EAAE;AAAjC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGtC,SAAS,CAACuC,KAAV,CAAgB,CAAhB,EAAmBrC,eAAnB,EAAoCsC,GAApC,CAAwC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACzD,0BACE,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAE,CAAX;AAAc,QAAA,GAAG,EAAEA,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGD,KAAK,CAACE,eAAN,CAAsBC,WAAtB,GAAoCC,OAApC,CAA4C,UAA5C,MAA4D,CAAC,CAA7D,gBACC;AAAG,QAAA,KAAK,EAAE;AAACC,UAAAA,eAAe,EAAC,SAASL,KAAK,CAACE,eAAf,GAAiC;AAAlD,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,gBAGC;AAAG,QAAA,KAAK,EAAE;AAACG,UAAAA,eAAe,EAAC,qEAAqEL,KAAK,CAACE,eAA3E,GAA6F;AAA9G,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CADF,eAQE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAA4C,QAAA,OAAO,EAAE,MAAMtC,QAAQ,CAAChB,2BAA2B,CAAC,YAAD,EAAe;AAAC0D,UAAAA,IAAI,EAAE/C,SAAP;AAAkBgD,UAAAA,QAAQ,EAAEN;AAA5B,SAAf,CAA5B,CAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CARF,CADF,CADF,CADF,CADF;AAoBD,KArBA,CADH,CADF,EAyBGxC,eAAe,GAAGF,SAAS,CAACkC,MAA5B,iBAAsC;AAAK,MAAA,KAAK,EAAE;AAACE,QAAAA,SAAS,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAmC;AAAQ,MAAA,SAAS,EAAC,WAAlB;AAA8B,MAAA,OAAO,EAAE7B,sBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAnC,CAzBzC,CADF;AA6BD,GArCD;;AAuCA,QAAM0C,KAAK,GAAG,MAAM;AAElB,QAAG,CAAChD,SAAS,CAACiC,MAAd,EAAqB;AACnB,0BACE;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,UAAU,EAAE,MAAb;AAAqBC,UAAAA,SAAS,EAAE;AAAhC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDADF;AAGD;;AAED,wBACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnC,SAAS,CAACsC,KAAV,CAAgB,CAAhB,EAAmBpC,eAAnB,EAAoCqC,GAApC,CAAwC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACzD,0BACE,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAE,EAAX;AAAe,QAAA,GAAG,EAAEA,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACK;AAAQ,QAAA,GAAG,EAAED,KAAK,CAACE,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADL,+CADJ,CADJ,eAOI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPJ,CADF,CADF,CADF;AAiBD,KAlBA,CADH,CADF,EAsBGxC,eAAe,GAAGF,SAAS,CAACiC,MAA5B,iBAAsC;AAAK,MAAA,KAAK,EAAE;AAACE,QAAAA,SAAS,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAmC;AAAQ,MAAA,SAAS,EAAC,WAAlB;AAA8B,MAAA,OAAO,EAAE5B,sBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAnC,CAtBzC,CADJ;AA0BD,GAlCD;;AAoCA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eACmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADnB,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE,cAAaZ,SAAb,GAAwB,gBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAK;AAAM,IAAA,SAAS,EAAED,QAAQ,KAAK,OAAb,IAAwB,CAACA,QAAzB,GAAoC,gBAApC,GAAuD,EAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6EC,SAAS,KAAKsD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCtD,IAAzC,CAA8CuD,aAA5D,GAA6E,aAA7E,GAA6F,UAAD,GAAavD,IAAI,CAACwD,eAAlB,GAAoC,GAApC,GAA0CxD,IAAI,CAACyD,cAAxN,CAAL,CADF,CADF,eAIE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE,cAAa5D,SAAb,GAAwB,gBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAK;AAAM,IAAA,SAAS,EAAED,QAAQ,KAAK,OAAb,GAAuB,gBAAvB,GAA0C,EAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgEC,SAAS,KAAKsD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCtD,IAAzC,CAA8CuD,aAA5D,GAA6E,eAA7E,GAA+F,YAAD,GAAcvD,IAAI,CAACwD,eAAnB,GAAqC,GAArC,GAA2CxD,IAAI,CAACyD,cAA9M,CAAL,CADF,CAJF,CADF,CAJF,CADF,eAgBE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAE,mCAAb;AAAkD,IAAA,SAAS,EAAEvB,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAE,mCAAb;AAAkD,IAAA,SAAS,EAAEgB,KAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAEhB,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,CAhBF,CADF,CADF;AA4BD;;AAGD,eAAe3C,OAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Row, Col} from 'antd';\r\nimport { Link, Route, Switch, useLocation, useParams } from 'react-router-dom';\r\nimport {AiFillPicture, AiOutlineLike} from 'react-icons/ai';\r\nimport {MdZoomOutMap} from 'react-icons/md';\r\nimport {FaCommentDots} from 'react-icons/fa';\r\nimport {BsFillPlayFill} from 'react-icons/bs';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {loadMoreImageProfile} from './../../../Actions/index.jsx';\r\nimport {loadMoreVideoProfile} from './../../../Actions/index.jsx';\r\nimport {setLoadMoreDefault} from './../../../Actions/index.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { toggleStatusPresentialModal } from './../../../Actions/index.jsx';\r\n\r\nfunction Gallery({ profile }){\r\n\r\n  const path = useLocation().pathname.split('/');\r\n  const isActive = path[4];\r\n  const {idProfile} = useParams();\r\n  const [isChangeAlbum, setIsChangeAlbum] = useState(true);\r\n  const {info, listImage, listVideo, lastImageOfList, lastVideoOfList} = useSelector(state => state.profile);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() =>{\r\n    dispatch(setLoadMoreDefault())\r\n  },[])\r\n\r\n  function changeContentAlbum(){\r\n      setIsChangeAlbum(false)\r\n  }\r\n\r\n  const loadMoreImageOfProfile = () => {\r\n    dispatch(loadMoreImageProfile())\r\n  }\r\n\r\n  const loadMoreVideoOfProfile = () => {\r\n    dispatch(loadMoreVideoProfile())\r\n  }\r\n\r\n  const getBlobFromUrl = (myImageUrl) => {\r\n      return new Promise((resolve, reject) => {\r\n          let request = new XMLHttpRequest();\r\n          request.open('GET', myImageUrl, true);\r\n          request.responseType = 'blob';\r\n          request.onload = () => {\r\n              resolve(request.response);\r\n          };\r\n          request.onerror = reject;\r\n          request.send();\r\n      })\r\n  }\r\n\r\n  const getDataFromBlob = (myBlob) => {\r\n    return new Promise((resolve, reject) => {\r\n        let reader = new FileReader();\r\n        reader.onload = () => {\r\n            resolve(reader.result);\r\n        };\r\n        reader.onerror = reject;\r\n        reader.readAsDataURL(myBlob);\r\n    })\r\n}\r\n\r\nconst convertUrlToImageData = async (myImageUrl) => {\r\n    try {\r\n        let myBlob = await getBlobFromUrl(myImageUrl);\r\n        let myImageData = await getDataFromBlob(myBlob);\r\n        console.log(myImageData)\r\n        return myImageData;\r\n    } catch (err) {\r\n        return null;\r\n    }\r\n}\r\n\r\n  const ListALl = () => {\r\n\r\n    if(!listImage.length){\r\n      return(\r\n        <div style={{paddingTop: '50px', textAlign: 'center'}}>Không có ảnh hiển thị</div>\r\n      )\r\n    }\r\n\r\n    return(\r\n      <div style={{display: 'flex', flexDirection: 'column'}}>\r\n        <Row>\r\n          {listImage.slice(0, lastImageOfList).map((image, index) => {\r\n            return(\r\n              <Col span={6} key={index}>\r\n                <div className=\"galerry-overview-item-container\">\r\n                  <Link to=\"\">\r\n                    <div className=\"galerry-overview-item\">\r\n                      <div className=\"galerry-overview-item-image\">\r\n                        {image.post_images_Url.toLowerCase().indexOf('https://') !== -1 ?\r\n                          <i style={{backgroundImage:\"url(\" + image.post_images_Url + \")\"}}></i>\r\n                          :\r\n                          <i style={{backgroundImage:\"url(https://res.cloudinary.com/mohi-vn/image/upload/v1607061343/\" + image.post_images_Url + \".jpg)\"}}></i>\r\n                        }\r\n                      </div>\r\n                      <div className=\"galerry-overview-item-info\" onClick={() => dispatch(toggleStatusPresentialModal('view_image', {list: listImage, activeId: index}))}>\r\n                        <MdZoomOutMap />\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                </div>\r\n              </Col>\r\n            )\r\n          })}\r\n        </Row>\r\n        {lastImageOfList < listImage.length && <div style={{textAlign: 'center'}}><button className=\"load-more\" onClick={loadMoreImageOfProfile}>Xem thêm</button></div>}\r\n        </div>\r\n    )\r\n  }\r\n\r\n  const Album = () => {\r\n\r\n    if(!listVideo.length){\r\n      return(\r\n        <div style={{paddingTop: '50px', textAlign: 'center'}}>Không có video hiển thị</div>\r\n      )\r\n    }\r\n\r\n    return(\r\n        <div className=\"album\">\r\n          <Row>\r\n            {listVideo.slice(0, lastVideoOfList).map((image, index) => {\r\n              return(\r\n                <Col span={12} key={index}>\r\n                  <div className=\"album-item-container\" >\r\n                    <div className=\"album-item\" >\r\n                        <div className=\"album-image\">\r\n                            <video >\r\n                                 <source src={image.post_images_Url} />\r\n                                 Your browser does not support HTML5 video.\r\n                            </video>\r\n                        </div>\r\n                        <div className=\"album-info\">\r\n                          <BsFillPlayFill />\r\n                        </div>\r\n                    </div>\r\n                  </div>\r\n                </Col>\r\n              )\r\n            })}\r\n            </Row>\r\n          {lastVideoOfList < listVideo.length && <div style={{textAlign: 'center'}}><button className=\"load-more\" onClick={loadMoreVideoOfProfile}>Xem thêm</button></div>}\r\n        </div>\r\n    )\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <div className=\"galerry-container\">\r\n        <div className=\"galerry-head\">\r\n          <div className=\"galerry-title\">\r\n            <AiFillPicture /><h5>Ảnh</h5>\r\n          </div>\r\n          <div className=\"galerry-navigation\">\r\n            <ul>\r\n              <Link to={\"/profile/\"+ idProfile +\"/gallery/image\"}>\r\n                <li ><span className={isActive === 'image' || !isActive ? 'galerry-active' : ''}>{idProfile === JSON.parse(localStorage.getItem('ustk')).info.user_username ? `Ảnh của bạn` : `Ảnh của ` + info.user_first_name + ' ' + info.user_last_name}</span></li>\r\n              </Link>\r\n              <Link to={\"/profile/\"+ idProfile +\"/gallery/video\"}>\r\n                <li ><span className={isActive === 'video' ? 'galerry-active' : ''}>{idProfile === JSON.parse(localStorage.getItem('ustk')).info.user_username ? `Video của bạn` : `Video của `+ info.user_first_name + ' ' + info.user_last_name}</span></li>\r\n              </Link>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className=\"galerry-content\">\r\n          <Switch>\r\n            <Route path={\"/profile/:idProfile/gallery/image\"} component={ListALl}/>\r\n            <Route path={\"/profile/:idProfile/gallery/video\"} component={Album}/>\r\n            <Route component={ListALl}/>\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Gallery;\r\n"]},"metadata":{},"sourceType":"module"}