{"ast":null,"code":"import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import EditorEmoji from'./EditorEmoji.jsx';import EditorMention from'./EditorMention.jsx';import{Image,Transformation}from'cloudinary-react';import UploadMuti from'./../Upload/UploadMuti.jsx';import{Select,Switch,Button,Tooltip,Row,Col}from'antd';import{Link}from'react-router-dom';import{FaUserTag,FaImage,FaUserFriends,FaLock,FaMapMarkerAlt,FaListAlt}from\"react-icons/fa\";import{MdPublic}from\"react-icons/md\";import{AiFillInfoCircle,AiOutlinePlus,AiFillLike,AiFillFlag}from\"react-icons/ai\";import{FiBarChart}from\"react-icons/fi\";import{GiPhone}from\"react-icons/gi\";import{MdEmail}from\"react-icons/md\";;function CreatePost(props){var Option=Select.Option;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isShowInputTag=_useState2[0],setIsShowInputTag=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listMention=_useState4[0],setListMention=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModalCreatePost=_useState6[0],setShowModalCreatePost=_useState6[1];var currentUser=JSON.parse(localStorage.getItem('ustk')).info;// data send api create post\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),valueEditor=_useState8[0],setValueEditor=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),fileList=_useState10[0],setFileList=_useState10[1];var _useState11=useState('public'),_useState12=_slicedToArray(_useState11,2),privacyNewFeed=_useState12[0],setPrivacyNewFeed=_useState12[1];var _useState13=useState('public'),_useState14=_slicedToArray(_useState13,2),privacyStory=_useState14[0],setPrivacyStory=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),placeNewFeed=_useState16[0],setPlaceNewFeed=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),placeStory=_useState18[0],setPlaceStory=_useState18[1];useEffect(function(){if(props.statusCreatePost==='success'||props.statusCreatePost==='error'){setFileList([]);setValueEditor(null);setShowModalCreatePost(false);setPlaceNewFeed(1);setPlaceStory(0);}},[props.statusCreatePost]);var uploadMuti=function uploadMuti(files){setFileList(files);};var onChangePrivacyStory=function onChangePrivacyStory(value){setPrivacyStory(value);};var onChangePrivacyNewFeed=function onChangePrivacyNewFeed(value){setPrivacyNewFeed(value);};var onChangePlaceNewFeed=function onChangePlaceNewFeed(checked,event){if(checked){setPlaceNewFeed(1);}else{setPlaceNewFeed(0);}};var onChangePlaceStory=function onChangePlaceStory(checked,event){if(checked){setPlaceStory(1);}else{setPlaceStory(0);}};function showModalCreatePostFunc(){setShowModalCreatePost(true);}function closeModalCreatePost(){setShowModalCreatePost(false);}// func create post when submit\nfunction submitCreatePost(){props.submitCreatePost(valueEditor,fileList,privacyNewFeed,privacyStory,placeNewFeed,placeStory,listMention);}var changeStatusButtonSubmit=function changeStatusButtonSubmit(value){setValueEditor(value);};function showInputTag(){setIsShowInputTag(true);}function showMentionList(mention){var arr=[];for(var key in mention){var ent=mention[key];arr.push(ent);}setListMention(arr);}var moreMention=function moreMention(){return/*#__PURE__*/React.createElement(\"ul\",{className:\"create-post-more-mention\"},listMention.map(function(mention,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:mention.data.mention.link},mention.data.mention.name));}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"create-post\",onClick:function onClick(){return showModalCreatePostFunc();},style:showModalCreatePost?{zIndex:'10'}:null},/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-input\"},/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-avatar\"},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-editor\"},/*#__PURE__*/React.createElement(EditorEmoji,{showModalCreatePost:showModalCreatePost,changeStatusButtonSubmit:changeStatusButtonSubmit,statusCreatePost:props.statusCreatePost}))),/*#__PURE__*/React.createElement(UploadMuti,{statusCreatePost:props.statusCreatePost,showModalCreatePost:showModalCreatePost,uploadMuti:uploadMuti}),isShowInputTag&&showModalCreatePost?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-input-tag\"},showModalCreatePost&&/*#__PURE__*/React.createElement(EditorMention,{showMentionList:showMentionList})),listMention.length?/*#__PURE__*/React.createElement(\"div\",{className:\"creat-post-tag-list\"},/*#__PURE__*/React.createElement(\"span\",null,listMention.length<=2?/*#__PURE__*/React.createElement(React.Fragment,null,listMention.map(function(mention,index){return/*#__PURE__*/React.createElement(\"span\",{key:index},index===0?'Cùng với':'và',/*#__PURE__*/React.createElement(Link,{to:mention.data.mention.link},\" \",mention.data.mention.name,\" \"),\" \");})):/*#__PURE__*/React.createElement(\"span\",{className:\"create-post-mention\"},/*#__PURE__*/React.createElement(Tooltip,{title:moreMention,color:\"black\"},\"c\\xF9ng v\\u1EDBi \",listMention.length,\" ng\\u01B0\\u1EDDi kh\\xE1c\")))):null):null,/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-option\"},/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-choose-image\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"create_post_upload_image\"},/*#__PURE__*/React.createElement(FaImage,{style:{fontSize:\"20px\",marginRight:'7px'}}),\"\\u1EA2nh/video\")),/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-tag\",onClick:function onClick(){return showInputTag();}},/*#__PURE__*/React.createElement(FaUserTag,{style:{fontSize:\"20px\",marginRight:'7px'}}),\"G\\u1EAFn th\\u1EBB\")),showModalCreatePost?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-choose-place-post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-newfeed-place\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,{onChange:function onChange(checked,event){return onChangePlaceStory(checked,event);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"place-post\"},\"Tin c\\u1EE7a b\\u1EA1n\")),/*#__PURE__*/React.createElement(Select,{className:\"select-privacy\",defaultValue:privacyNewFeed,style:{width:140},onSelect:function onSelect(value){return onChangePrivacyStory(value);}},/*#__PURE__*/React.createElement(Option,{value:\"public\"},/*#__PURE__*/React.createElement(MdPublic,null),\" C\\xF4ng khai\"),/*#__PURE__*/React.createElement(Option,{value:\"friend\"},/*#__PURE__*/React.createElement(FaUserFriends,null),\" B\\u1EA1n b\\xE8\"),/*#__PURE__*/React.createElement(Option,{value:\"onlyme\"},/*#__PURE__*/React.createElement(FaLock,null),\" Ch\\u1EC9 m\\xECnh t\\xF4i\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-story-place\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,{onChange:function onChange(checked,event){return onChangePlaceNewFeed(checked,event);},defaultChecked:true}),/*#__PURE__*/React.createElement(\"span\",{className:\"place-post\"},\"B\\u1EA3ng tin\")),/*#__PURE__*/React.createElement(Select,{className:\"select-privacy\",defaultValue:privacyStory,style:{width:140},onSelect:function onSelect(value){return onChangePrivacyNewFeed(value);}},/*#__PURE__*/React.createElement(Option,{value:\"public\"},/*#__PURE__*/React.createElement(MdPublic,null),\" C\\xF4ng khai\"),/*#__PURE__*/React.createElement(Option,{value:\"friend\"},/*#__PURE__*/React.createElement(FaUserFriends,null),\" B\\u1EA1n b\\xE8\"),/*#__PURE__*/React.createElement(Option,{value:\"onlyme\"},/*#__PURE__*/React.createElement(FaLock,null),\" Ch\\u1EC9 m\\xECnh t\\xF4i\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"create-post-submit\"},props.statusCreatePost==='loading'?/*#__PURE__*/React.createElement(Button,{loading:true},\"\\u0110\\u0103ng\"):/*#__PURE__*/React.createElement(React.Fragment,null,valueEditor||fileList.length?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return submitCreatePost();}},\"\\u0110\\u0103ng\"):/*#__PURE__*/React.createElement(Button,{disabled:true},\"\\u0110\\u0103ng\")))):null),showModalCreatePost&&/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return closeModalCreatePost();},className:\"presential\",style:{position:'fixed',width:'100%',height:'100vh',top:0,left:0,background:'rgba(0,0,0,0.5)',zIndex:9}}));}export default CreatePost;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/CreatePost.jsx"],"names":["React","useState","useEffect","EditorEmoji","EditorMention","Image","Transformation","UploadMuti","Select","Switch","Button","Tooltip","Row","Col","Link","FaUserTag","FaImage","FaUserFriends","FaLock","FaMapMarkerAlt","FaListAlt","MdPublic","AiFillInfoCircle","AiOutlinePlus","AiFillLike","AiFillFlag","FiBarChart","GiPhone","MdEmail","CreatePost","props","Option","isShowInputTag","setIsShowInputTag","listMention","setListMention","showModalCreatePost","setShowModalCreatePost","currentUser","JSON","parse","localStorage","getItem","info","valueEditor","setValueEditor","fileList","setFileList","privacyNewFeed","setPrivacyNewFeed","privacyStory","setPrivacyStory","placeNewFeed","setPlaceNewFeed","placeStory","setPlaceStory","statusCreatePost","uploadMuti","files","onChangePrivacyStory","value","onChangePrivacyNewFeed","onChangePlaceNewFeed","checked","event","onChangePlaceStory","showModalCreatePostFunc","closeModalCreatePost","submitCreatePost","changeStatusButtonSubmit","showInputTag","showMentionList","mention","arr","key","ent","push","moreMention","map","index","data","link","name","zIndex","user_avatar_cropX","user_avatar","user_first_name","user_last_name","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","length","fontSize","marginRight","width","position","height","top","left","background"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport EditorEmoji from './EditorEmoji.jsx';\r\nimport EditorMention from './EditorMention.jsx';\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport UploadMuti from './../Upload/UploadMuti.jsx';\r\nimport {Select, Switch, Button, Tooltip, Row, Col} from 'antd';\r\nimport {Link} from 'react-router-dom';\r\nimport { FaUserTag, FaImage, FaUserFriends, FaLock, FaMapMarkerAlt, FaListAlt} from \"react-icons/fa\";\r\nimport {MdPublic} from \"react-icons/md\";\r\nimport {AiFillInfoCircle, AiOutlinePlus, AiFillLike, AiFillFlag} from \"react-icons/ai\";\r\nimport { FiBarChart } from \"react-icons/fi\";\r\nimport { GiPhone } from \"react-icons/gi\";\r\nimport { MdEmail } from \"react-icons/md\";;\r\n\r\nfunction CreatePost(props) {\r\n  const {Option} = Select;\r\n  const [isShowInputTag, setIsShowInputTag] = useState(false);\r\n  const [listMention, setListMention] = useState([]);\r\n  const [showModalCreatePost, setShowModalCreatePost] = useState(false);\r\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n  // data send api create post\r\n  const [valueEditor, setValueEditor] = useState();\r\n  const [fileList, setFileList] = useState([]);\r\n  const [privacyNewFeed, setPrivacyNewFeed] = useState('public');\r\n  const [privacyStory, setPrivacyStory] = useState('public');\r\n  const [placeNewFeed, setPlaceNewFeed] = useState(1);\r\n  const [placeStory, setPlaceStory] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if(props.statusCreatePost === 'success' || props.statusCreatePost === 'error'){\r\n      setFileList([])\r\n      setValueEditor(null)\r\n      setShowModalCreatePost(false)\r\n      setPlaceNewFeed(1)\r\n      setPlaceStory(0)\r\n    }\r\n  }, [props.statusCreatePost])\r\n\r\n  const uploadMuti = (files) => {\r\n    setFileList(files)\r\n  }\r\n\r\n  const onChangePrivacyStory = (value) => {\r\n    setPrivacyStory(value)\r\n  }\r\n\r\n  const onChangePrivacyNewFeed = (value) => {\r\n    setPrivacyNewFeed(value)\r\n  }\r\n\r\n  const onChangePlaceNewFeed = (checked, event) => {\r\n\r\n    if(checked){\r\n      setPlaceNewFeed(1)\r\n    }else {\r\n      setPlaceNewFeed(0)\r\n    }\r\n  }\r\n\r\n  const onChangePlaceStory= (checked, event) => {\r\n    if(checked){\r\n      setPlaceStory(1)\r\n    }else {\r\n      setPlaceStory(0)\r\n    }\r\n  }\r\n\r\n  function showModalCreatePostFunc(){\r\n    setShowModalCreatePost(true)\r\n  }\r\n\r\n  function closeModalCreatePost(){\r\n    setShowModalCreatePost(false)\r\n  }\r\n// func create post when submit\r\n  function submitCreatePost(){\r\n    props.submitCreatePost(valueEditor, fileList, privacyNewFeed, privacyStory, placeNewFeed, placeStory, listMention)\r\n  }\r\n\r\n  const changeStatusButtonSubmit = (value) => {\r\n    setValueEditor(value)\r\n  }\r\n\r\n  function showInputTag(){\r\n    setIsShowInputTag(true)\r\n  }\r\n\r\n  function showMentionList(mention){\r\n    let arr = [];\r\n\r\n    for(let key in mention){\r\n      const ent = mention[key];\r\n        arr.push(ent);\r\n    }\r\n    setListMention(arr)\r\n  }\r\n\r\n  const moreMention = () => {\r\n    return(\r\n      <ul className=\"create-post-more-mention\">\r\n        {listMention.map((mention, index) => {\r\n          return(\r\n            <li key={index}><Link to={mention.data.mention.link}>{mention.data.mention.name}</Link></li>\r\n          )\r\n        })}\r\n      </ul>\r\n    )\r\n  }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"create-post\" onClick={() => showModalCreatePostFunc()} style={showModalCreatePost ? {zIndex: '10'} : null}>\r\n          <div className=\"create-post-input\">\r\n            <div className=\"create-post-avatar\">\r\n              {currentUser.user_avatar_cropX === null ?\r\n                <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                :\r\n                <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                  <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                </Image>\r\n              }\r\n            </div>\r\n            <div className=\"create-post-editor\">\r\n            <EditorEmoji showModalCreatePost={showModalCreatePost} changeStatusButtonSubmit={changeStatusButtonSubmit} statusCreatePost={props.statusCreatePost}/>\r\n            </div>\r\n          </div>\r\n          <UploadMuti statusCreatePost={props.statusCreatePost} showModalCreatePost={showModalCreatePost} uploadMuti={uploadMuti}/>\r\n          {isShowInputTag && showModalCreatePost ?\r\n            <>\r\n              <div className=\"create-post-input-tag\">\r\n              {showModalCreatePost && <EditorMention showMentionList={showMentionList}/>}\r\n              </div>\r\n              {listMention.length ?\r\n              <div className=\"creat-post-tag-list\">\r\n                <span>\r\n                  {listMention.length <= 2 ?\r\n                    <>\r\n                      {listMention.map((mention, index) => {\r\n                        return(\r\n                          <span  key={index}>\r\n                            {index === 0 ? 'Cùng với' : 'và'}\r\n                            <Link to={mention.data.mention.link}> {mention.data.mention.name} </Link> {/*mention kế trừ mention đầu*/}\r\n                          </span>\r\n                        )\r\n                      })}\r\n                    </>\r\n                  :\r\n                    <span className=\"create-post-mention\">\r\n                      <Tooltip title={moreMention} color={`black`}>\r\n                          cùng với {listMention.length} người khác\r\n                      </Tooltip>\r\n                    </span>\r\n                  }\r\n                </span>\r\n              </div>\r\n              : null}\r\n            </>\r\n          :null}\r\n          <div className=\"create-post-option\">\r\n            <div className=\"create-post-choose-image\">\r\n              <label htmlFor=\"create_post_upload_image\">\r\n                <FaImage style={{ fontSize: \"20px\", marginRight: '7px' }} />\r\n                Ảnh/video\r\n              </label>\r\n            </div>\r\n            <div className=\"create-post-tag\" onClick={() => showInputTag()}>\r\n              <FaUserTag style={{ fontSize: \"20px\", marginRight: '7px' }} />\r\n              Gắn thẻ\r\n            </div>\r\n          </div>\r\n          {showModalCreatePost ?\r\n            <div>\r\n              <div className=\"create-post-choose-place-post\">\r\n                <div className=\"create-post-newfeed-place\">\r\n                  <div>\r\n                      <Switch onChange={(checked, event) => onChangePlaceStory(checked, event)} ></Switch>\r\n                      <span className=\"place-post\">Tin của bạn</span>\r\n                  </div>\r\n                  <Select className=\"select-privacy\" defaultValue={privacyNewFeed} style={{ width: 140 }} onSelect={(value) => onChangePrivacyStory(value)}>\r\n                      <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n                      <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n                      <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n                  </Select>\r\n                </div>\r\n                <div className=\"create-post-story-place\">\r\n                  <div>\r\n                      <Switch  onChange={(checked, event) => onChangePlaceNewFeed(checked, event)} defaultChecked></Switch>\r\n                      <span className=\"place-post\">Bảng tin</span>\r\n                  </div>\r\n                  <Select className=\"select-privacy\" defaultValue={privacyStory} style={{ width: 140 }} onSelect={(value) => onChangePrivacyNewFeed(value)}>\r\n                      <Option value=\"public\"><MdPublic /> Công khai</Option>\r\n                      <Option value=\"friend\"><FaUserFriends /> Bạn bè</Option>\r\n                      <Option value=\"onlyme\"><FaLock /> Chỉ mình tôi</Option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n              <div className=\"create-post-submit\">\r\n                {props.statusCreatePost === 'loading' ?\r\n                  <Button loading>Đăng</Button>\r\n                :\r\n                <>\r\n                {valueEditor || fileList.length ?\r\n\r\n                  <Button onClick={() => submitCreatePost()} >Đăng</Button>\r\n                  :\r\n                  <Button disabled>Đăng</Button>\r\n                }\r\n                </>\r\n              }\r\n              </div>\r\n            </div>\r\n          : null}\r\n        </div>\r\n        {showModalCreatePost && <div onClick={() => closeModalCreatePost()} className=\"presential\" style={{position: 'fixed', width: '100%', height: '100vh', top: 0, left: 0, background: 'rgba(0,0,0,0.5)', zIndex: 9}}>\r\n        </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}