{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import PostImage from'./PostImage.jsx';import CommentEditor from'./CommentEditor.jsx';import CommentParent from'./CommentParent.jsx';import{Link}from'react-router-dom';import{MdPublic,MdNotificationsOff}from\"react-icons/md\";import{AiOutlineLike,AiOutlineIssuesClose}from\"react-icons/ai\";import{BsThreeDots}from\"react-icons/bs\";import{FaRegCommentAlt,FaRegWindowClose,FaUserLock,FaUserAlt}from\"react-icons/fa\";import{IoIosShareAlt}from\"react-icons/io\";import{GoEyeClosed}from\"react-icons/go\";import{List,Tooltip,Spin}from'antd';import moment from'moment';import{PUBLIC_URL}from'./../../Constants/public.jsx';import{AiOutlineCaretRight}from\"react-icons/ai\";import{Image,Transformation}from'cloudinary-react';import{useDispatch}from'react-redux';import{toggleStatusPresentialModal}from'./../../Actions/index.jsx';import{responseAddComment}from'./../../Actions/index.jsx';import{requestAddComment}from'./../../Actions/index.jsx';import axios from'axios';export var PostNewFeed=React.forwardRef(function(props,ref){moment.updateLocale('vi',{relativeTime:{future:\"%s\",past:\"%s trước\",s:'vài giây',ss:'%d phút',m:\"1 phút trước\",mm:\"%d phút\",h:\"%d giờ\",hh:\"%d giờ\",d:\"1 ngày\",dd:\"%d ngày\",w:\"1 tuần\",ww:\"%d tuần\",M:\"1 tháng\",MM:\"%d tháng\",y:\"1 năm\",yy:\"%d năm\"}});var dispatch=useDispatch();var inputCommentRef=useRef();var refContentPost=useRef();var refContentPostShare=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listParentComment=_useState2[0],setListParentComment=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listChildComment=_useState4[0],setListChildComment=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),iconReaction=_useState6[0],setIconReaction=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),styleListSendReaction=_useState8[0],setStyleListSendReaction=_useState8[1];var _useState9=useState('default'),_useState10=_slicedToArray(_useState9,2),isLike=_useState10[0],setIsLike=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),contentPostStyle=_useState12[0],setContentPostStyle=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),contentPostShareStyle=_useState14[0],setContentPostShareStyle=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),moreContent=_useState16[0],setMoreContent=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),moreContentShare=_useState18[0],setMoreContentShare=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),lineContent=_useState20[0],setLineContent=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),lineContentShare=_useState22[0],setLineContentShare=_useState22[1];var totalReactionPost=props.post.actions_post;var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),delayHandler=_useState24[0],setDelayHandler=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),newComment=_useState26[0],setNewComment=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),showComment=_useState28[0],setShowComment=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),noti=_useState30[0],setNoti=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),typeNoti=_useState32[0],setTypeNoti=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),isHide=_useState34[0],setIsHide=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),newOneCmt=_useState36[0],setNewOneCmt=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),isNewComment=_useState38[0],setIsNewComment=_useState38[1];useEffect(function(){if(!props.loadingSetting&&typeNoti){if(typeNoti==='unNotification'){setNoti('Bạn đã tắt thông báo từ bài viết này thành công');}else{setIsHide(true);}}},[props.loadingSetting]);var onSubmitComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(requestAddComment());setNewOneCmt(value);setIsNewComment(true);_context.next=5;return axios.post('https://www.api.mohi.vn/api/auth/create-comment',{comment_PostId:props.post.id,comment_Content:value,comment_Type:'parent'}).then(function(res){setNewComment([res.data[0]].concat(_toConsumableArray(newComment)));setIsNewComment(false);dispatch(responseAddComment({idPost:props.post.id,comment:res.data}));});case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitComment(_x){return _ref.apply(this,arguments);};}();var updateComment=function updateComment(idPost,id,value){dispatch(toggleStatusPresentialModal('edit_comment',{idPost:idPost,id:id,value:value}));};var deleteComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var deleteCmt;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\",{id:id});case 2:deleteCmt=newComment.filter(function(cmt){return cmt.pivot.id!==id;});setNewComment(deleteCmt);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteComment(_x2){return _ref2.apply(this,arguments);};}();var toggleMoreContentPost=function toggleMoreContentPost(){if(moreContent){setMoreContent(false);setContentPostStyle({maxWidth:'100%',display:'-webkit-box',WebkitBoxOrient:'vertical',WebkitLineClamp:3,overflow:'hidden',textOverflow:'ellipsis'});}else{setMoreContent(true);setContentPostStyle({display:'block'});}};var toggleMoreContentPostShare=function toggleMoreContentPostShare(){if(moreContentShare){setMoreContentShare(false);setContentPostShareStyle({maxWidth:'100%',display:'-webkit-box',WebkitBoxOrient:'vertical',WebkitLineClamp:3,overflow:'hidden',textOverflow:'ellipsis'});}else{setMoreContentShare(true);setContentPostShareStyle({display:'block'});}};function removeOrFilterNationality(objectOfNationality){return Array.from(new Set(objectOfNationality.map(function(tempObject){return tempObject.pivot.actions_action;})));}function focusInputComment(){var inputRef=inputCommentRef.current;inputRef.focusCommentInput();}useEffect(function(){var _commentParent=[];var _commentChild=[];props.post.comment_post.reverse().map(function(comment,index){if(comment.pivot.comment_Type==='parent'){_commentParent.push(comment);setListParentComment(_commentParent);}if(comment.pivot.comment_Type==='child'){_commentChild.push(comment);setListChildComment(_commentChild);}});var divHeight=refContentPost.current.offsetHeight;setLineContent(divHeight/25);if(props.post.post_share.length>0){var divHeightShare=refContentPostShare.current.offsetHeight;setLineContentShare(divHeightShare/25);}},[]);function sharePostFunc(dataPost){dispatch(toggleStatusPresentialModal('modal_share_post',dataPost));}var leaveListSendReaction=function leaveListSendReaction(){setDelayHandler(setTimeout(function(){setStyleListSendReaction({top:'-10px',opacity:0,visibility:'hidden'});},1000));clearTimeout(delayHandler);};var enterListSendReaction=function enterListSendReaction(){setDelayHandler(setTimeout(function(){setStyleListSendReaction({top:'-56px',opacity:1,visibility:'visible'});},500));clearTimeout(delayHandler);};var loadingSendRequestSetting=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(type,idPost,idUser){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setTypeNoti(type);_context3.next=3;return props.loadingSendRequestSetting(type,idPost,idUser);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function loadingSendRequestSetting(_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();var showCommentFunc=function showCommentFunc(){setShowComment(!showComment);};var NotiSetting=function NotiSetting(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"noti-post\",style:{background:'white',border:'1px solid rgba(0,0,0,0.1)',borderRadius:'2px',padding:'10px',marginTop:'10px',color:'green'}},noti));};var settingPost=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(List,{className:\"setting-post\",loading:props.loadingSetting},/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('hidePost',props.post.id,'');}},/*#__PURE__*/React.createElement(GoEyeClosed,null),\" \\u1EA8n b\\xE0i vi\\u1EBFt\"),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('unFollow','',props.post.user_admin_post.id);}},/*#__PURE__*/React.createElement(AiOutlineIssuesClose,null),\" B\\u1ECF theo d\\xF5i \",props.post.user_admin_post.user_first_name+\" \"+props.post.user_admin_post.user_last_name),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('unNotification',props.post.id,'');}},/*#__PURE__*/React.createElement(MdNotificationsOff,null),\"T\\u1EAFt th\\xF4ng b\\xE1o t\\u1EEB b\\xE0i vi\\u1EBFt\"),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('hideAllPost','',props.post.user_admin_post.id);}},/*#__PURE__*/React.createElement(FaRegWindowClose,null),\" \\u1EA8n b\\xE0i vi\\u1EBFt t\\u1EEB \",props.post.user_admin_post.user_first_name+\" \"+props.post.user_admin_post.user_last_name)));var listReactionPost=function listReactionPost(){return/*#__PURE__*/React.createElement(\"ul\",{className:\"post-reaction-list\"},totalReactionPost.slice(0,21).map(function(reaction,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+reaction.user_username},reaction.user_first_name+' '+reaction.user_last_name));}),totalReactionPost.length-21>0&&/*#__PURE__*/React.createElement(\"li\",null,\"v\\xE0 \",totalReactionPost.length-21,\" ng\\u01B0\\u1EDDi kh\\xE1c\"));};var listIconReactionPost=function listIconReactionPost(reaction,index){switch(reaction){case'like':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"});break;case'haha':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"});break;case'wow':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"});break;case'sad':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"});break;case'angry':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"});break;case'love':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"});break;default:return/*#__PURE__*/React.createElement(AiOutlineLike,null);}};var ListTagUserPost=function ListTagUserPost(){var twoItemTags=props.post.tag_users_post.slice(0,2);var itemToLast=props.post.tag_users_post.slice(2);if(props.post.tag_users_post.length&&props.post.tag_users_post.length<=2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username,key:index},index!==0?' và ':null,' '+tag.user_first_name+' '+tag.user_last_name);}));}if(props.post.tag_users_post.length>2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(\"span\",{key:index},\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name),\" v\\xE0 \");}),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",className:\"tag-more-user\",title:/*#__PURE__*/React.createElement(\"ul\",{className:\"tag-more-user-list\"},itemToLast.map(function(tag,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name));}))},itemToLast.length,\" ng\\u01B0\\u1EDDi kh\\xE1c\"));}return null;};var ListTagUserPostShare=function ListTagUserPostShare(){var twoItemTags=props.post.post_share[0].tag_users_post.slice(0,2);var itemToLast=props.post.post_share[0].tag_users_post.slice(2);var lastItem=props.post.post_share[0].tag_users_post.length+1;if(props.post.post_share[0].tag_users_post.length&&props.post.post_share[0].tag_users_post.length<=2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username,key:index},lastItem!==index?'và':null,tag.user_first_name+' '+tag.user_last_name);}));}if(props.post.post_share[0].tag_users_post.length>2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(\"span\",{key:index},\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name),\" v\\xE0 \");}),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",className:\"tag-more-user\",title:/*#__PURE__*/React.createElement(\"ul\",{className:\"tag-more-user-list\"},itemToLast.map(function(tag,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name));}))},itemToLast.length,\" ng\\u01B0\\u1EDDi kh\\xE1c\"));}return null;};var PrivacyPost=function PrivacyPost(){switch(props.post.post_Privacy){case\"public\":return/*#__PURE__*/React.createElement(MdPublic,null);break;case\"onlyme\":return/*#__PURE__*/React.createElement(FaUserLock,null);break;case\"friend\":return/*#__PURE__*/React.createElement(FaUserAlt,null);break;default:return null;}};var iconReactionPost=function iconReactionPost(reaction,index){switch(reaction.pivot.actions_action){case'like':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"});break;case'haha':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"});break;case'wow':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"});break;case'sad':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"});break;case'angry':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"});break;case'love':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"});break;default:return/*#__PURE__*/React.createElement(AiOutlineLike,null);}};var PagePost=function PagePost(){if(props.post.post_PageId){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/pages/'+props.post.page_admin_post.page_FakeId},props.post.page_admin_post.page_Name));}return null;};var UserReceivedPost=function UserReceivedPost(){if(props.post.post_userReceiveId&&props.post.post_userReceiveId!==props.post.user_admin_post.id){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.profile_receive_post.user_username},props.post.profile_receive_post.user_first_name+' '+props.post.profile_receive_post.user_last_name));}return null;};var UserReceivedPostShare=function UserReceivedPostShare(){if(props.post.post_share[0].post_userReceiveId&&props.post.post_share[0].post_userReceiveId!==props.post.post_share[0].user_admin_post.id){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.post_share[0].profile_receive_post.user_username},props.post.post_share[0].profile_receive_post.user_first_name+' '+props.post.post_share[0].profile_receive_post.user_last_name));}return null;};var GroupPost=function GroupPost(){if(props.post.post_GroupId){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/groups/'+props.post.group_admin_post.group_FakeId},props.post.group_admin_post.group_Name));}return null;};var sendReactionPost=function sendReactionPost(reaction,postId){setStyleListSendReaction({top:'-10px',opacity:0,visibility:'hidden'});props.sendReactionPost(reaction,postId);switch(reaction){case'unlike':setIconReaction(/*#__PURE__*/React.createElement(AiOutlineLike,null));setIsLike(false);break;case'like':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"}));break;case'haha':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"}));break;case'wow':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"}));break;case'sad':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"}));break;case'angry':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"}));break;case'love':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"}));break;}};if(isHide)return null;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"post\",ref:ref},noti&&/*#__PURE__*/React.createElement(NotiSetting,null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.user_admin_post.user_username},props.post.user_admin_post.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:props.post.user_admin_post.user_avatar,alt:props.post.user_admin_post.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:props.post.user_admin_post.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:props.post.user_admin_post.user_avatar_cropH,width:props.post.user_admin_post.user_avatar_cropW,x:props.post.user_admin_post.user_avatar_cropX,y:props.post.user_admin_post.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-boss\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.user_admin_post.user_username},props.post.user_admin_post.user_first_name+\" \"+props.post.user_admin_post.user_last_name,\" \"),/*#__PURE__*/React.createElement(ListTagUserPost,null),/*#__PURE__*/React.createElement(PagePost,null),/*#__PURE__*/React.createElement(GroupPost,null),/*#__PURE__*/React.createElement(UserReceivedPost,null),props.post.post_share.length?'đã chia sẻ bài viết':null,props.post.post_Type==='avatar'&&/*#__PURE__*/React.createElement(\"span\",null,\"\\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n\"),props.post.post_Type==='cover'&&/*#__PURE__*/React.createElement(\"span\",null,\"\\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh b\\xECa\")),/*#__PURE__*/React.createElement(\"p\",{className:\"post-time-created\"},moment(moment.utc(props.post.created_at).toDate()).fromNow(),\" \",/*#__PURE__*/React.createElement(PrivacyPost,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-setting\"},/*#__PURE__*/React.createElement(Tooltip,{trigger:'click',placement:\"bottom\",title:settingPost},/*#__PURE__*/React.createElement(BsThreeDots,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-content\"},/*#__PURE__*/React.createElement(\"div\",{style:contentPostStyle,ref:refContentPost},props.post.post_Content,\" \"),lineContent>=4?/*#__PURE__*/React.createElement(React.Fragment,null,!moreContent?/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPost},\" Xem th\\xEAm\"):/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPost},\"Thu g\\u1ECDn\")):null),/*#__PURE__*/React.createElement(PostImage,{post:props.post,images:props.post.images_post}),props.post.post_share.length?/*#__PURE__*/React.createElement(\"div\",{className:\"post-share-container\"},/*#__PURE__*/React.createElement(PostImage,{post:props.post.post_share[0],images:props.post.post_share[0].images_post}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-content\"},/*#__PURE__*/React.createElement(\"div\",{style:contentPostShareStyle,ref:refContentPostShare},props.post.post_share[0].post_Content,\" \"),lineContentShare>=4?/*#__PURE__*/React.createElement(React.Fragment,null,!moreContentShare?/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPostShare},\" Xem th\\xEAm\"):/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPostShare},\"Thu g\\u1ECDn\")):null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-share-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.post_share[0].user_admin_post.user_username},props.post.post_share[0].user_admin_post.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:props.post.post_share[0].user_admin_post.user_avatar,alt:props.post.post_share[0].user_admin_post.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:props.post.post_share[0].user_admin_post.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:props.post.post_share[0].user_admin_post.user_avatar_cropH,width:props.post.post_share[0].user_admin_post.user_avatar_cropW,x:props.post.post_share[0].user_admin_post.user_avatar_cropX,y:props.post.post_share[0].user_admin_post.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-boss\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.post_share[0].user_admin_post.user_username},props.post.post_share[0].user_admin_post.user_first_name+\" \"+props.post.post_share[0].user_admin_post.user_last_name,\" \"),/*#__PURE__*/React.createElement(ListTagUserPostShare,null),/*#__PURE__*/React.createElement(UserReceivedPostShare,null),props.post.post_share[0].post_Type==='avatar'&&/*#__PURE__*/React.createElement(\"span\",null,\"\\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n\"),props.post.post_share[0].post_Type==='cover'&&/*#__PURE__*/React.createElement(\"span\",null,\"\\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh b\\xECa\")),/*#__PURE__*/React.createElement(\"p\",{className:\"post-time-created\"},moment(moment.utc(props.post.post_share[0].created_at).toDate()).fromNow(),\" \",/*#__PURE__*/React.createElement(PrivacyPost,null)))))):null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-total-action\",style:{display:'flex',justifyContent:'space-between'}},totalReactionPost.length?/*#__PURE__*/React.createElement(Tooltip,{placement:\"top\",title:listReactionPost},/*#__PURE__*/React.createElement(\"span\",null,removeOrFilterNationality(totalReactionPost).slice(0,3).map(function(reaction,index){return listIconReactionPost(reaction,index);}),' '+totalReactionPost.length,\" ng\\u01B0\\u1EDDi \\u0111\\xE3 b\\xE0y t\\u1ECF c\\u1EA3m x\\xFAc\")):null,/*#__PURE__*/React.createElement(\"span\",{onClick:showCommentFunc},props.post.comment_post.length+newComment.length?props.post.comment_post.length+' bình luận':null,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-action-item send-reaction\",onMouseEnter:enterListSendReaction,onMouseLeave:leaveListSendReaction},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).length&&isLike==='default'?sendReactionPost('unlike',props.post.id):/*#__PURE__*/React.createElement(React.Fragment,null,!isLike||isLike==='default'?sendReactionPost('like',props.post.id):sendReactionPost('unlike',props.post.id));}},iconReaction?iconReaction:totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).length?totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).map(function(reaction,index){return iconReactionPost(reaction,index);}):/*#__PURE__*/React.createElement(AiOutlineLike,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"list-icon-send-reaction\",style:styleListSendReaction},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('like',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/like.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('love',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/love.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('haha',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/haha.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('wow',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/wow.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('sad',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/sad.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('angry',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/angry.gif',alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action-item\",onClick:function onClick(){return focusInputComment();}},/*#__PURE__*/React.createElement(FaRegCommentAlt,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action-item\",onClick:function onClick(){return sharePostFunc(props.post);}},/*#__PURE__*/React.createElement(IoIosShareAlt,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-current-user\"},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-input\"},/*#__PURE__*/React.createElement(CommentEditor,{ref:inputCommentRef,onSubmitComment:onSubmitComment}))),props.loadingAddComment&&isNewComment?/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item post-new-comment\",style:{marginBottom:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+currentUser.user_username},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info-user\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+currentUser.user_username},currentUser.user_first_name+' '+currentUser.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-content\"},/*#__PURE__*/React.createElement(\"p\",null,newOneCmt)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-action\"},/*#__PURE__*/React.createElement(\"span\",null,moment(new Date(),\"YYYYMMDD\\h:m:s\").fromNow())))),/*#__PURE__*/React.createElement(Spin,null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-new-comment-waiting\"})):null,newComment.map(function(newcmt,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item post-new-comment\",style:{marginBottom:'10px'},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+newcmt.user_username},newcmt.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:newcmt.user_avatar,alt:newcmt.user_first_name+' '+newcmt.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:newcmt.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:newcmt.user_avatar_cropH,width:newcmt.user_avatar_cropW,x:newcmt.user_avatar_cropX,y:newcmt.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info-user\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+newcmt.user_username},newcmt.user_first_name+' '+newcmt.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-content\"},/*#__PURE__*/React.createElement(\"p\",null,newcmt.pivot.comment_Content)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-action\"},/*#__PURE__*/React.createElement(\"span\",null,moment(moment.utc(newcmt.pivot.created_at).toDate()).fromNow()))),newcmt.id===JSON.parse(localStorage.getItem('ustk')).info.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post\"},/*#__PURE__*/React.createElement(Tooltip,{trigger:\"click\",placement:\"bottom\",title:/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post-tooltip\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return updateComment(props.post.id,newcmt.pivot.id,newcmt.pivot.comment_Content);}},\"S\\u1EEDa b\\xECnh lu\\u1EADn\"),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return deleteComment(newcmt.pivot.id);}},\"X\\xF3a b\\xECnh lu\\u1EADn\"))},/*#__PURE__*/React.createElement(BsThreeDots,null)))));}),listParentComment.length>0&&listParentComment.length<=6||showComment?/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-container\"},listParentComment.map(function(comment,index){return/*#__PURE__*/React.createElement(CommentParent,{key:index,listChildComment:listChildComment,comment:comment,idPost:props.post.id});})):null)));});","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/PostNewFeed.jsx"],"names":["React","useEffect","useState","useRef","PostImage","CommentEditor","CommentParent","Link","MdPublic","MdNotificationsOff","AiOutlineLike","AiOutlineIssuesClose","BsThreeDots","FaRegCommentAlt","FaRegWindowClose","FaUserLock","FaUserAlt","IoIosShareAlt","GoEyeClosed","List","Tooltip","Spin","moment","PUBLIC_URL","AiOutlineCaretRight","Image","Transformation","useDispatch","toggleStatusPresentialModal","responseAddComment","requestAddComment","axios","PostNewFeed","forwardRef","props","ref","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","dispatch","inputCommentRef","refContentPost","refContentPostShare","listParentComment","setListParentComment","listChildComment","setListChildComment","iconReaction","setIconReaction","styleListSendReaction","setStyleListSendReaction","isLike","setIsLike","contentPostStyle","setContentPostStyle","contentPostShareStyle","setContentPostShareStyle","moreContent","setMoreContent","moreContentShare","setMoreContentShare","lineContent","setLineContent","lineContentShare","setLineContentShare","totalReactionPost","post","actions_post","currentUser","JSON","parse","localStorage","getItem","info","delayHandler","setDelayHandler","newComment","setNewComment","showComment","setShowComment","noti","setNoti","typeNoti","setTypeNoti","isHide","setIsHide","newOneCmt","setNewOneCmt","isNewComment","setIsNewComment","loadingSetting","onSubmitComment","value","comment_PostId","id","comment_Content","comment_Type","then","res","data","idPost","comment","updateComment","deleteComment","deleteCmt","filter","cmt","pivot","toggleMoreContentPost","maxWidth","display","WebkitBoxOrient","WebkitLineClamp","overflow","textOverflow","toggleMoreContentPostShare","removeOrFilterNationality","objectOfNationality","Array","from","Set","map","tempObject","actions_action","focusInputComment","inputRef","current","focusCommentInput","_commentParent","_commentChild","comment_post","reverse","index","push","divHeight","offsetHeight","post_share","length","divHeightShare","sharePostFunc","dataPost","leaveListSendReaction","setTimeout","top","opacity","visibility","clearTimeout","enterListSendReaction","loadingSendRequestSetting","type","idUser","showCommentFunc","NotiSetting","background","border","borderRadius","padding","marginTop","color","settingPost","user_admin_post","user_first_name","user_last_name","listReactionPost","slice","reaction","user_username","listIconReactionPost","ListTagUserPost","twoItemTags","tag_users_post","itemToLast","tag","ListTagUserPostShare","lastItem","PrivacyPost","post_Privacy","iconReactionPost","PagePost","post_PageId","page_admin_post","page_FakeId","page_Name","UserReceivedPost","post_userReceiveId","profile_receive_post","UserReceivedPostShare","GroupPost","post_GroupId","group_admin_post","group_FakeId","group_Name","sendReactionPost","postId","user_avatar_cropX","user_avatar","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","post_Type","utc","created_at","toDate","fromNow","post_Content","images_post","justifyContent","actions_UserId","loadingAddComment","marginBottom","Date","newcmt"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport PostImage from './PostImage.jsx';\r\nimport CommentEditor from './CommentEditor.jsx';\r\nimport CommentParent from './CommentParent.jsx';\r\nimport { Link } from 'react-router-dom';\r\nimport { MdPublic, MdNotificationsOff } from \"react-icons/md\";\r\nimport { AiOutlineLike, AiOutlineIssuesClose } from \"react-icons/ai\";\r\nimport { BsThreeDots } from \"react-icons/bs\";\r\nimport { FaRegCommentAlt, FaRegWindowClose, FaUserLock, FaUserAlt  } from \"react-icons/fa\";\r\nimport { IoIosShareAlt } from \"react-icons/io\";\r\nimport { GoEyeClosed } from \"react-icons/go\";\r\nimport { List, Tooltip, Spin } from 'antd';\r\nimport moment from 'moment';\r\nimport {PUBLIC_URL} from './../../Constants/public.jsx';\r\nimport { AiOutlineCaretRight } from \"react-icons/ai\";\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleStatusPresentialModal } from './../../Actions/index.jsx';\r\nimport { responseAddComment } from './../../Actions/index.jsx';\r\nimport { requestAddComment } from './../../Actions/index.jsx';\r\nimport axios from 'axios';\r\n\r\nexport const PostNewFeed = React.forwardRef((props, ref ) =>  {\r\n\r\n    moment.updateLocale('vi', {\r\n      relativeTime : {\r\n          future: \"%s\",\r\n          past:   \"%s trước\",\r\n          s  : 'vài giây',\r\n          ss : '%d phút',\r\n          m:  \"1 phút trước\",\r\n          mm: \"%d phút\",\r\n          h:  \"%d giờ\",\r\n          hh: \"%d giờ\",\r\n          d:  \"1 ngày\",\r\n          dd: \"%d ngày\",\r\n          w:  \"1 tuần\",\r\n          ww: \"%d tuần\",\r\n          M:  \"1 tháng\",\r\n          MM: \"%d tháng\",\r\n          y:  \"1 năm\",\r\n          yy: \"%d năm\"\r\n      }\r\n    });\r\n    const dispatch = useDispatch();\r\n    const inputCommentRef = useRef();\r\n    const refContentPost = useRef();\r\n    const refContentPostShare = useRef();\r\n    const [listParentComment, setListParentComment] = useState([]);\r\n    const [listChildComment, setListChildComment] = useState([]);\r\n    const [iconReaction, setIconReaction] = useState();\r\n    const [styleListSendReaction, setStyleListSendReaction] = useState();\r\n    const [isLike, setIsLike] = useState('default');\r\n    const [contentPostStyle, setContentPostStyle] = useState();\r\n    const [contentPostShareStyle, setContentPostShareStyle] = useState();\r\n    const [moreContent, setMoreContent] = useState(false);\r\n    const [moreContentShare, setMoreContentShare] = useState(false);\r\n    const [lineContent, setLineContent] = useState(false);\r\n    const [lineContentShare, setLineContentShare] = useState(false);\r\n    const totalReactionPost = props.post.actions_post;\r\n    const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n    const [delayHandler, setDelayHandler] = useState(null)\r\n    const [newComment, setNewComment] = useState([])\r\n    const [showComment, setShowComment] = useState(false)\r\n    const [noti, setNoti] = useState()\r\n    const [typeNoti, setTypeNoti] = useState()\r\n    const [isHide, setIsHide] = useState(false)\r\n    const [newOneCmt, setNewOneCmt] = useState()\r\n    const [isNewComment, setIsNewComment] = useState(false)\r\n\r\n    useEffect(() => {\r\n      if(!props.loadingSetting && typeNoti){\r\n        if(typeNoti === 'unNotification'){\r\n          setNoti('Bạn đã tắt thông báo từ bài viết này thành công')\r\n        }else {\r\n          setIsHide(true)\r\n        }\r\n      }\r\n    }, [props.loadingSetting])\r\n\r\n    const onSubmitComment = async (value) => {\r\n      dispatch(requestAddComment())\r\n      setNewOneCmt(value)\r\n      setIsNewComment(true)\r\n      await axios.post('https://www.api.mohi.vn/api/auth/create-comment', {comment_PostId: props.post.id, comment_Content: value, comment_Type: 'parent'})\r\n      .then((res) => {\r\n        setNewComment([res.data[0], ...newComment])\r\n        setIsNewComment(false)\r\n        dispatch(responseAddComment({idPost: props.post.id, comment: res.data}))\r\n      })\r\n    }\r\n\r\n    const updateComment = (idPost, id, value) => {\r\n      dispatch(toggleStatusPresentialModal('edit_comment', {idPost: idPost, id: id, value: value}))\r\n    }\r\n\r\n    const deleteComment = async (id) => {\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\", {id: id})\r\n      const deleteCmt = newComment.filter(cmt => cmt.pivot.id !== id);\r\n      setNewComment(deleteCmt)\r\n    }\r\n\r\n    const toggleMoreContentPost = () => {\r\n      if(moreContent){\r\n        setMoreContent(false)\r\n        setContentPostStyle({\r\n          maxWidth: '100%',\r\n          display: '-webkit-box',\r\n          WebkitBoxOrient: 'vertical',\r\n          WebkitLineClamp: 3,\r\n          overflow: 'hidden',\r\n          textOverflow: 'ellipsis',\r\n        })\r\n      }else {\r\n        setMoreContent(true)\r\n        setContentPostStyle({\r\n          display: 'block'\r\n        })\r\n      }\r\n    }\r\n\r\n    const toggleMoreContentPostShare = () => {\r\n      if(moreContentShare){\r\n        setMoreContentShare(false)\r\n        setContentPostShareStyle({\r\n          maxWidth: '100%',\r\n          display: '-webkit-box',\r\n          WebkitBoxOrient: 'vertical',\r\n          WebkitLineClamp: 3,\r\n          overflow: 'hidden',\r\n          textOverflow: 'ellipsis',\r\n        })\r\n      }else {\r\n        setMoreContentShare(true)\r\n        setContentPostShareStyle({\r\n          display: 'block'\r\n        })\r\n      }\r\n    }\r\n\r\n    function removeOrFilterNationality(objectOfNationality) {\r\n       return Array.from(new Set(objectOfNationality.map(tempObject => tempObject.pivot.actions_action)));\r\n    }\r\n\r\n    function focusInputComment() {\r\n        let inputRef = inputCommentRef.current;\r\n        inputRef.focusCommentInput();\r\n    }\r\n\r\n    useEffect(() => {\r\n        let _commentParent = []\r\n        let _commentChild = []\r\n\r\n        props.post.comment_post.reverse().map((comment, index) => {\r\n            if (comment.pivot.comment_Type === 'parent') {\r\n                _commentParent.push(comment)\r\n                setListParentComment(_commentParent)\r\n            }\r\n            if (comment.pivot.comment_Type === 'child') {\r\n                _commentChild.push(comment)\r\n                setListChildComment(_commentChild)\r\n            }\r\n        })\r\n        const divHeight = refContentPost.current.offsetHeight\r\n        setLineContent(divHeight / 25);\r\n        if(props.post.post_share.length > 0){\r\n          const divHeightShare = refContentPostShare.current.offsetHeight\r\n          setLineContentShare(divHeightShare / 25);\r\n        }\r\n    }, []);\r\n\r\n    function sharePostFunc(dataPost) {\r\n      dispatch(toggleStatusPresentialModal('modal_share_post', dataPost));\r\n    }\r\n\r\n    const leaveListSendReaction = () => {\r\n      setDelayHandler(setTimeout(() => {\r\n         setStyleListSendReaction({\r\n          top: '-10px',\r\n          opacity:0,\r\n          visibility: 'hidden'\r\n        })\r\n      }, 1000))\r\n      clearTimeout(delayHandler)\r\n    }\r\n\r\n    const enterListSendReaction = () => {\r\n      setDelayHandler(setTimeout(() => {\r\n            setStyleListSendReaction({\r\n              top: '-56px',\r\n              opacity:1,\r\n              visibility: 'visible'\r\n            })\r\n      }, 500))\r\n      clearTimeout(delayHandler)\r\n    }\r\n\r\n    const loadingSendRequestSetting = async (type, idPost, idUser) => {\r\n      setTypeNoti(type)\r\n      await props.loadingSendRequestSetting(type, idPost, idUser)\r\n    }\r\n\r\n    const showCommentFunc = () => {\r\n      setShowComment(!showComment)\r\n    }\r\n\r\n    const NotiSetting = () => {\r\n      return(\r\n        <React.Fragment>\r\n          <div className=\"noti-post\" style={{background: 'white', border: '1px solid rgba(0,0,0,0.1)', borderRadius: '2px', padding: '10px', marginTop: '10px', color: 'green'}}>{noti}</div>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    const settingPost = (\r\n        <React.Fragment>\r\n            <List className=\"setting-post\" loading={props.loadingSetting}>\r\n                <List.Item onClick={() => loadingSendRequestSetting('hidePost', props.post.id, '')}><GoEyeClosed /> Ẩn bài viết</List.Item>\r\n              <List.Item onClick={() => loadingSendRequestSetting('unFollow', '', props.post.user_admin_post.id)}><AiOutlineIssuesClose /> Bỏ theo dõi {props.post.user_admin_post.user_first_name + \" \" + props.post.user_admin_post.user_last_name}</List.Item>\r\n                <List.Item onClick={() => loadingSendRequestSetting('unNotification', props.post.id, '')}><MdNotificationsOff />Tắt thông báo từ bài viết</List.Item>\r\n              <List.Item onClick={() => loadingSendRequestSetting('hideAllPost', '', props.post.user_admin_post.id)}><FaRegWindowClose /> Ẩn bài viết từ {props.post.user_admin_post.user_first_name + \" \" + props.post.user_admin_post.user_last_name}</List.Item>\r\n            </List>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const listReactionPost = () => {\r\n      return(\r\n        <ul className=\"post-reaction-list\">\r\n          {totalReactionPost.slice(0, 21).map((reaction, index) => {\r\n            return(\r\n                <li key={index}>\r\n                  <Link to={'/profile/' + reaction.user_username}>{reaction.user_first_name + ' ' + reaction.user_last_name}</Link>\r\n                </li>\r\n            )\r\n          })}\r\n          { totalReactionPost.length - 21 > 0 &&\r\n          <li>\r\n            và {totalReactionPost.length - 21} người khác\r\n          </li>\r\n          }\r\n        </ul>\r\n      )\r\n    }\r\n\r\n    const listIconReactionPost = (reaction, index) => {\r\n      switch (reaction) {\r\n        case 'like':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/like.png'} alt=\"Thích\"/>\r\n          break;\r\n        case 'haha':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/haha.png'} alt=\"Cười\"/>\r\n          break;\r\n        case 'wow':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/wow.png'} alt=\"Ngạc nhiên\"/>\r\n          break;\r\n        case 'sad':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/sad.png'} alt=\"Buồn\"/>\r\n          break;\r\n        case 'angry':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/angry.png'} alt=\"Giận dữ\"/>\r\n          break;\r\n        case 'love':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/heart.png'} alt=\"Yêu thích\"/>\r\n          break;\r\n        default: return <AiOutlineLike/>\r\n      }\r\n    }\r\n\r\n    const ListTagUserPost = () => {\r\n        const twoItemTags = props.post.tag_users_post.slice(0, 2);\r\n        const itemToLast =  props.post.tag_users_post.slice(2);\r\n\r\n        if(props.post.tag_users_post.length && props.post.tag_users_post.length <= 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <Link to={'/profile/' + tag.user_username} key={index}>\r\n                    { index !== 0 ? ' và ' : null}\r\n                    { ' ' + tag.user_first_name + ' ' + tag.user_last_name}\r\n                  </Link>\r\n                )\r\n              })}\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        if(props.post.tag_users_post.length > 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <span key={index}> <Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link> và </span>\r\n                )\r\n              })}\r\n              <Tooltip\r\n                placement=\"bottom\"\r\n                className=\"tag-more-user\"\r\n                title={\r\n                  <ul className=\"tag-more-user-list\">\r\n                    {itemToLast.map((tag, index) => {\r\n                      return(\r\n                        <li key={index}><Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link></li>\r\n                      )\r\n                    })}\r\n                  </ul>\r\n                }\r\n              >\r\n                {itemToLast.length} người khác\r\n              </Tooltip>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        return null\r\n\r\n    }\r\n\r\n    const ListTagUserPostShare = () => {\r\n        const twoItemTags = props.post.post_share[0].tag_users_post.slice(0, 2);\r\n        const itemToLast =  props.post.post_share[0].tag_users_post.slice(2);\r\n        const lastItem = props.post.post_share[0].tag_users_post.length + 1;\r\n\r\n        if(props.post.post_share[0].tag_users_post.length && props.post.post_share[0].tag_users_post.length <= 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <Link to={'/profile/' + tag.user_username} key={index}>\r\n                    {lastItem !== index ? 'và' : null}\r\n                    {tag.user_first_name + ' ' + tag.user_last_name}\r\n                  </Link>\r\n                )\r\n              })}\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        if(props.post.post_share[0].tag_users_post.length > 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <span key={index}> <Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link> và </span>\r\n                )\r\n              })}\r\n              <Tooltip\r\n                placement=\"bottom\"\r\n                className=\"tag-more-user\"\r\n                title={\r\n                  <ul className=\"tag-more-user-list\">\r\n                    {itemToLast.map((tag, index) => {\r\n                      return(\r\n                        <li key={index}><Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link></li>\r\n                      )\r\n                    })}\r\n                  </ul>\r\n                }\r\n              >\r\n                {itemToLast.length} người khác\r\n              </Tooltip>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        return null\r\n\r\n    }\r\n\r\n    const PrivacyPost = () => {\r\n      switch ( props.post.post_Privacy) {\r\n        case \"public\":\r\n            return <MdPublic />\r\n          break;\r\n        case \"onlyme\":\r\n            return <FaUserLock />\r\n          break;\r\n        case \"friend\":\r\n            return <FaUserAlt />\r\n          break;\r\n        default: return null\r\n\r\n      }\r\n    }\r\n\r\n    const iconReactionPost = (reaction, index) => {\r\n        switch (reaction.pivot.actions_action) {\r\n          case 'like':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/like.png'} alt=\"Thích\"/>\r\n            break;\r\n          case 'haha':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/haha.png'} alt=\"Cười\"/>\r\n            break;\r\n          case 'wow':\r\n              return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/wow.png'} alt=\"Ngạc nhiên\"/>\r\n            break;\r\n          case 'sad':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/sad.png'} alt=\"Buồn\"/>\r\n            break;\r\n          case 'angry':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/angry.png'} alt=\"Giận dữ\"/>\r\n            break;\r\n          case 'love':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/heart.png'} alt=\"Yêu thích\"/>\r\n            break;\r\n          default: return <AiOutlineLike />\r\n        }\r\n    }\r\n\r\n    const PagePost = () => {\r\n      if(props.post.post_PageId){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/pages/' + props.post.page_admin_post.page_FakeId}>{props.post.page_admin_post.page_Name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const UserReceivedPost = () => {\r\n      if(props.post.post_userReceiveId && props.post.post_userReceiveId !== props.post.user_admin_post.id){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/profile/' + props.post.profile_receive_post.user_username}>{props.post.profile_receive_post.user_first_name + ' ' + props.post.profile_receive_post.user_last_name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const UserReceivedPostShare = () => {\r\n      if(props.post.post_share[0].post_userReceiveId && props.post.post_share[0].post_userReceiveId !== props.post.post_share[0].user_admin_post.id){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/profile/' + props.post.post_share[0].profile_receive_post.user_username}>{props.post.post_share[0].profile_receive_post.user_first_name + ' ' + props.post.post_share[0].profile_receive_post.user_last_name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const GroupPost = () => {\r\n      if(props.post.post_GroupId){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/groups/' + props.post.group_admin_post.group_FakeId}>{props.post.group_admin_post.group_Name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const sendReactionPost = (reaction, postId) => {\r\n      setStyleListSendReaction({\r\n         top: '-10px',\r\n         opacity:0,\r\n         visibility: 'hidden'\r\n       })\r\n      props.sendReactionPost(reaction, postId)\r\n      switch (reaction) {\r\n        case 'unlike':\r\n            setIconReaction(<AiOutlineLike/>)\r\n            setIsLike(false)\r\n          break;\r\n        case 'like':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/like.png'} alt='Thích'/>)\r\n          break;\r\n        case 'haha':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/haha.png'} alt='Cười'/>)\r\n          break;\r\n        case 'wow':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/wow.png'} alt='Ngạc nhiên'/>)\r\n          break;\r\n        case 'sad':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/sad.png'} alt='Buồn'/>)\r\n          break;\r\n        case 'angry':\r\n            setIsLike(true)\r\n            setIconReaction(<img  className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/angry.png'} alt='Giận dữ'/>)\r\n          break;\r\n        case 'love':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/heart.png'} alt='Yêu thích'/>)\r\n          break;\r\n      }\r\n    }\r\n\r\n    if(isHide) return null\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"post\" ref={ref}>\r\n                {noti && <NotiSetting />}\r\n                <div className=\"post-container\">\r\n                    <div className=\"post-header\">\r\n                        <div className=\"post-info\">\r\n                            <div className=\"post-avatar\">\r\n                                <Link to={'/profile/' + props.post.user_admin_post.user_username}>\r\n                                {props.post.user_admin_post.user_avatar_cropX === null ?\r\n                                  <img src={props.post.user_admin_post.user_avatar} alt={props.post.user_admin_post.user_last_name} />\r\n                                  :\r\n                                  <Image cloudName=\"mohi-vn\" publicId={props.post.user_admin_post.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                    <Transformation height={props.post.user_admin_post.user_avatar_cropH}  width={props.post.user_admin_post.user_avatar_cropW} x={props.post.user_admin_post.user_avatar_cropX} y={props.post.user_admin_post.user_avatar_cropY} crop=\"crop\" />\r\n                                  </Image>\r\n                                }\r\n                                </Link>\r\n                            </div>\r\n                            <div className=\"post-boss\">\r\n                                <p>\r\n                                    <Link to={'/profile/' + props.post.user_admin_post.user_username}>{props.post.user_admin_post.user_first_name + \" \" + props.post.user_admin_post.user_last_name} </Link>\r\n                                    <ListTagUserPost />\r\n                                    <PagePost />\r\n                                    <GroupPost />\r\n                                    <UserReceivedPost />\r\n                                    {props.post.post_share.length ? 'đã chia sẻ bài viết' : null}\r\n                                    {props.post.post_Type === 'avatar' && <span>đã cập nhật ảnh đại diện</span>}\r\n                                    {props.post.post_Type === 'cover' && <span>đã cập nhật ảnh bìa</span>}\r\n                                </p>\r\n                                <p className=\"post-time-created\">{moment(moment.utc(props.post.created_at).toDate()).fromNow()} <PrivacyPost /></p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"post-setting\">\r\n                          <Tooltip trigger={'click'} placement=\"bottom\" title={settingPost}>\r\n                            <BsThreeDots />\r\n                          </Tooltip>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"post-body\">\r\n                        <div className=\"post-content\" >\r\n                            <div style={contentPostStyle} ref={refContentPost}>{props.post.post_Content} </div>\r\n                            {lineContent >= 4 ?\r\n                              <React.Fragment>\r\n                                {!moreContent ? <span className=\"more-content-post\" onClick={toggleMoreContentPost }> Xem thêm</span > : <span className=\"more-content-post\" onClick={toggleMoreContentPost }>Thu gọn</span>}\r\n                              </React.Fragment>\r\n                            : null}\r\n                        </div>\r\n                        <PostImage post={props.post} images={props.post.images_post} />\r\n                        {props.post.post_share.length ?\r\n                          <div className=\"post-share-container\">\r\n                            <PostImage post={props.post.post_share[0]} images={props.post.post_share[0].images_post} />\r\n                            <div className=\"post-content\" >\r\n                                <div style={contentPostShareStyle} ref={refContentPostShare}>{props.post.post_share[0].post_Content} </div>\r\n                                {lineContentShare >= 4 ?\r\n                                  <React.Fragment>\r\n                                    {!moreContentShare ? <span className=\"more-content-post\" onClick={toggleMoreContentPostShare }> Xem thêm</span > : <span className=\"more-content-post\" onClick={toggleMoreContentPostShare }>Thu gọn</span>}\r\n                                  </React.Fragment>\r\n                                : null}\r\n                            </div>\r\n                            <div className=\"post-share-footer\">\r\n                              <div className=\"post-info\">\r\n                                  <div className=\"post-avatar\">\r\n                                      <Link to={'/profile/' + props.post.post_share[0].user_admin_post.user_username}>\r\n                                      {props.post.post_share[0].user_admin_post.user_avatar_cropX === null ?\r\n                                        <img src={props.post.post_share[0].user_admin_post.user_avatar} alt={props.post.post_share[0].user_admin_post.user_last_name} />\r\n                                        :\r\n                                        <Image cloudName=\"mohi-vn\" publicId={props.post.post_share[0].user_admin_post.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                          <Transformation height={props.post.post_share[0].user_admin_post.user_avatar_cropH}  width={props.post.post_share[0].user_admin_post.user_avatar_cropW} x={props.post.post_share[0].user_admin_post.user_avatar_cropX} y={props.post.post_share[0].user_admin_post.user_avatar_cropY} crop=\"crop\" />\r\n                                        </Image>\r\n                                      }\r\n                                      </Link>\r\n                                  </div>\r\n                                  <div className=\"post-boss\">\r\n                                      <p>\r\n                                          <Link to={'/profile/' + props.post.post_share[0].user_admin_post.user_username}>{props.post.post_share[0].user_admin_post.user_first_name + \" \" + props.post.post_share[0].user_admin_post.user_last_name} </Link>\r\n                                          <ListTagUserPostShare />\r\n                                          <UserReceivedPostShare />\r\n                                          {props.post.post_share[0].post_Type === 'avatar' && <span>đã cập nhật ảnh đại diện</span>}\r\n                                          {props.post.post_share[0].post_Type === 'cover' && <span>đã cập nhật ảnh bìa</span>}\r\n                                      </p>\r\n                                      <p className=\"post-time-created\">{moment(moment.utc(props.post.post_share[0].created_at).toDate()).fromNow()} <PrivacyPost /></p>\r\n                                  </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        : null}\r\n                    </div>\r\n                    <div className=\"post-footer\">\r\n                          <div className=\"post-total-action\" style={{display:'flex', justifyContent: 'space-between'}}>\r\n                            { totalReactionPost.length ?\r\n                              <Tooltip placement=\"top\" title={listReactionPost}>\r\n                                <span>\r\n                                  {removeOrFilterNationality(totalReactionPost).slice(0, 3).map((reaction, index) => listIconReactionPost(reaction, index))}\r\n                                  {' '+ totalReactionPost.length} người đã bày tỏ cảm xúc</span>\r\n                              </Tooltip>\r\n                            : null}\r\n                            <span onClick={showCommentFunc}>{props.post.comment_post.length + newComment.length ? props.post.comment_post.length + ' bình luận' : null} </span>\r\n                          </div>\r\n                        <div className=\"post-action\" >\r\n                            <div className=\"post-action-item send-reaction\"  onMouseEnter={enterListSendReaction} onMouseLeave={leaveListSendReaction}>\r\n                              <div onClick={() => totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).length && isLike === 'default' ?\r\n                                sendReactionPost('unlike', props.post.id) :\r\n                                  <React.Fragment>\r\n                                    {!isLike || isLike === 'default' ?\r\n                                      sendReactionPost('like', props.post.id)\r\n                                      :\r\n                                      sendReactionPost('unlike', props.post.id)\r\n                                    }\r\n                                  </React.Fragment>\r\n                                } >\r\n                              { iconReaction\r\n                                ?\r\n                                iconReaction\r\n                                :\r\n                                (totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).length\r\n                                ?\r\n                                totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).map((reaction, index) => iconReactionPost(reaction, index))\r\n                                :\r\n                                <AiOutlineLike/>)\r\n                              }\r\n                              </div>\r\n                              <div className=\"list-icon-send-reaction\" style={styleListSendReaction}>\r\n                                <img onClick={() => sendReactionPost('like', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/like.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('love', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/love.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('haha', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/haha.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('wow', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/wow.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('sad', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/sad.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('angry', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/angry.gif'} alt=\"\"/>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"post-action-item\" onClick={() => focusInputComment()}>\r\n                                <FaRegCommentAlt />\r\n                            </div>\r\n                            <div className=\"post-action-item\" onClick={() => sharePostFunc(props.post)}>\r\n                                <IoIosShareAlt />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"post-comment\">\r\n                        <div className=\"post-comment-current-user\">\r\n                          {currentUser.user_avatar_cropX === null ?\r\n                            <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                            :\r\n                            <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                              <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                            </Image>\r\n                          }\r\n                        </div>\r\n                          <div className=\"post-comment-input\">\r\n                              <CommentEditor ref={inputCommentRef} onSubmitComment={onSubmitComment}/>\r\n                          </div>\r\n                    </div>\r\n                    {props.loadingAddComment && isNewComment?\r\n                        <div className=\"post-comment-item post-new-comment\" style={{marginBottom: '10px'}}>\r\n                          <div className=\"post-comment-item-parent\">\r\n                            <div className=\"post-comment-item-parent-avatar\">\r\n                              <Link to={'/profile/'+ currentUser.user_username}>\r\n                                {currentUser.user_avatar_cropX === null ?\r\n                                  <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                                  :\r\n                                  <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                    <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                                  </Image>\r\n                                }\r\n                              </Link>\r\n                            </div>\r\n                            <div className=\"post-comment-item-parent-info\">\r\n                              <div className=\"post-comment-item-parent-info-user\">\r\n                                <Link to={'/profile/'+ currentUser.user_username}>{currentUser.user_first_name + ' ' + currentUser.user_last_name}</Link>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-content\">\r\n                                <p>{newOneCmt}</p>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-action\">\r\n                              <span>{moment(new Date, \"YYYYMMDD\\h:m:s\").fromNow()}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                              <Spin />\r\n                              <div className=\"post-new-comment-waiting\" />\r\n                        </div>\r\n                    : null}\r\n                    {newComment.map((newcmt, index) => {\r\n                      return(\r\n                        <div className=\"post-comment-item post-new-comment\" style={{marginBottom: '10px'}} key={index}>\r\n                          <div className=\"post-comment-item-parent\">\r\n                            <div className=\"post-comment-item-parent-avatar\">\r\n                              <Link to={'/profile/'+ newcmt.user_username}>\r\n                                {newcmt.user_avatar_cropX === null ?\r\n                                  <img src={newcmt.user_avatar} alt={newcmt.user_first_name + ' ' + newcmt.user_last_name} />\r\n                                  :\r\n                                  <Image cloudName=\"mohi-vn\" publicId={newcmt.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                    <Transformation height={newcmt.user_avatar_cropH}  width={newcmt.user_avatar_cropW} x={newcmt.user_avatar_cropX} y={newcmt.user_avatar_cropY} crop=\"crop\" />\r\n                                  </Image>\r\n                                }\r\n                              </Link>\r\n                            </div>\r\n                            <div className=\"post-comment-item-parent-info\">\r\n                              <div className=\"post-comment-item-parent-info-user\">\r\n                                <Link to={'/profile/'+ newcmt.user_username}>{newcmt.user_first_name + ' ' + newcmt.user_last_name}</Link>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-content\">\r\n                                <p>{newcmt.pivot.comment_Content}</p>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-action\">\r\n                              <span>{moment(moment.utc(newcmt.pivot.created_at).toDate()).fromNow()}</span>\r\n                              </div>\r\n                            </div>\r\n                            {newcmt.id === JSON.parse(localStorage.getItem('ustk')).info.id && <div className=\"setting-comment-post\">\r\n                              <Tooltip\r\n                                trigger=\"click\"\r\n                                placement=\"bottom\"\r\n                                title={\r\n                                  <div className=\"setting-comment-post-tooltip\">\r\n                                    <div onClick={() => updateComment(props.post.id, newcmt.pivot.id, newcmt.pivot.comment_Content)}>\r\n                                      Sửa bình luận\r\n                                    </div>\r\n                                    <div onClick={() => deleteComment(newcmt.pivot.id)}>\r\n                                      Xóa bình luận\r\n                                    </div>\r\n                                  </div>\r\n                                }\r\n                              >\r\n                                <BsThreeDots />\r\n                              </Tooltip>\r\n                            </div>\r\n                            }\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                    {\r\n                        listParentComment.length > 0 && listParentComment.length <= 6 || showComment\r\n                            ? <div className=\"post-comment-container\">\r\n                                {\r\n                                    listParentComment.map((comment, index) => {\r\n                                        return (<CommentParent key={index} listChildComment={listChildComment} comment={comment} idPost={props.post.id}/>)\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n})\r\n"]},"metadata":{},"sourceType":"module"}