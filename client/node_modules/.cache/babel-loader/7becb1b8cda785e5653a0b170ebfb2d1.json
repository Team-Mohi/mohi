{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import RegisterForm from'./../app/Authen/RegisterForm.jsx';import axios from'axios';import{API_VERI_CODE}from'./../Constants/Api.jsx';import{useDispatch}from'react-redux';import{toggleStatusSpin}from'./../Actions/index.jsx';import{useHistory}from'react-router-dom';var CryptoJS=require(\"crypto-js\");function RegisterContainer(){var history=useHistory();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),duplicateEmail=_useState2[0],setDuplicateEmail=_useState2[1];var onSubmitRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://load Spin\ndispatch(toggleStatusSpin());_context.next=3;return axios.post('https://www.api.mohi.vn/api/register',data).then(function(response){console.log(response);var code=CryptoJS.AES.encrypt(JSON.stringify(response.data.veriCode),'code_veri').toString();var user_email=response.data.email;var user_password=response.data.password;var id_user=response.data.idUser;history.push('/register/step-2',{user_email:user_email,code:code,id_user:id_user,user_password:user_password});}).catch(function(err){setDuplicateEmail(Math.random());});case 3://close Spin\ndispatch(toggleStatusSpin());case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitRegister(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(RegisterForm,{onSubmitRegister:onSubmitRegister,duplicateEmail:duplicateEmail});}export default RegisterContainer;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Containers/RegisterContainer.jsx"],"names":["React","useState","RegisterForm","axios","API_VERI_CODE","useDispatch","toggleStatusSpin","useHistory","CryptoJS","require","RegisterContainer","history","dispatch","duplicateEmail","setDuplicateEmail","onSubmitRegister","data","post","then","response","console","log","code","AES","encrypt","JSON","stringify","veriCode","toString","user_email","email","user_password","password","id_user","idUser","push","catch","err","Math","random"],"mappings":"gbAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,aAAR,KAA4B,wBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,gBAAT,KAAiC,wBAAjC,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,GAAIC,CAAAA,QAAQ,CAAGC,OAAO,CAAC,WAAD,CAAtB,CAEA,QAASC,CAAAA,iBAAT,EAA4B,CAC1B,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CACA,GAAMK,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAF0B,cAGkBJ,QAAQ,EAH1B,wCAGnBY,cAHmB,eAGHC,iBAHG,eAI1B,GAAMC,CAAAA,gBAAgB,0FAAG,iBAAOC,IAAP,kHACvB;AACAJ,QAAQ,CAACN,gBAAgB,EAAjB,CAAR,CAFuB,sBAIjBH,CAAAA,KAAK,CAACc,IAAN,CAAW,sCAAX,CAAmDD,IAAnD,EACLE,IADK,CACA,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACA,GAAIG,CAAAA,IAAI,CAAGd,QAAQ,CAACe,GAAT,CAAaC,OAAb,CAAqBC,IAAI,CAACC,SAAL,CAAeP,QAAQ,CAACH,IAAT,CAAcW,QAA7B,CAArB,CAA6D,WAA7D,EAA0EC,QAA1E,EAAX,CACA,GAAIC,CAAAA,UAAU,CAAGV,QAAQ,CAACH,IAAT,CAAcc,KAA/B,CACA,GAAIC,CAAAA,aAAa,CAAGZ,QAAQ,CAACH,IAAT,CAAcgB,QAAlC,CACA,GAAIC,CAAAA,OAAO,CAAGd,QAAQ,CAACH,IAAT,CAAckB,MAA5B,CACAvB,OAAO,CAACwB,IAAR,CAAa,kBAAb,CAAiC,CAC/BN,UAAU,CAAEA,UADmB,CAE/BP,IAAI,CAAEA,IAFyB,CAG/BW,OAAO,CAAEA,OAHsB,CAI/BF,aAAa,CAAEA,aAJgB,CAAjC,EAMD,CAbK,EAcLK,KAdK,CAcC,SAACC,GAAD,CAAS,CACdvB,iBAAiB,CAACwB,IAAI,CAACC,MAAL,EAAD,CAAjB,CACD,CAhBK,CAJiB,QAsBvB;AACA3B,QAAQ,CAACN,gBAAgB,EAAjB,CAAR,CAvBuB,sDAAH,kBAAhBS,CAAAA,gBAAgB,4CAAtB,CA0BA,mBACE,oBAAC,YAAD,EAAc,gBAAgB,CAAEA,gBAAhC,CAAkD,cAAc,CAAEF,cAAlE,EADF,CAGD,CAED,cAAeH,CAAAA,iBAAf","sourcesContent":["import React, {useState} from 'react';\r\nimport RegisterForm from './../app/Authen/RegisterForm.jsx';\r\nimport axios from 'axios';\r\nimport {API_VERI_CODE} from './../Constants/Api.jsx';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleStatusSpin } from './../Actions/index.jsx';\r\nimport {useHistory} from 'react-router-dom';\r\nvar CryptoJS = require(\"crypto-js\");\r\n\r\nfunction RegisterContainer(){\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [duplicateEmail, setDuplicateEmail] = useState()\r\n  const onSubmitRegister = async (data) => {\r\n    //load Spin\r\n    dispatch(toggleStatusSpin())\r\n\r\n    await axios.post('https://www.api.mohi.vn/api/register', data)\r\n    .then((response) => {\r\n      console.log(response);\r\n      let code = CryptoJS.AES.encrypt(JSON.stringify(response.data.veriCode), 'code_veri').toString();\r\n      let user_email = response.data.email;\r\n      let user_password = response.data.password;\r\n      let id_user = response.data.idUser;\r\n      history.push('/register/step-2', {\r\n        user_email: user_email,\r\n        code: code,\r\n        id_user: id_user,\r\n        user_password: user_password\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      setDuplicateEmail(Math.random())\r\n    })\r\n\r\n    //close Spin\r\n    dispatch(toggleStatusSpin())\r\n  }\r\n\r\n  return(\r\n    <RegisterForm onSubmitRegister={onSubmitRegister} duplicateEmail={duplicateEmail}/>\r\n  )\r\n}\r\n\r\nexport default RegisterContainer;\r\n"]},"metadata":{},"sourceType":"module"}