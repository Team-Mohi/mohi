{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import PostImage from'./PostImage.jsx';import CommentEditor from'./CommentEditor.jsx';import CommentParent from'./CommentParent.jsx';import{Link}from'react-router-dom';import{MdPublic,MdNotificationsOff,MdDelete}from\"react-icons/md\";import{AiOutlineLike,AiOutlineIssuesClose,AiFillEdit}from\"react-icons/ai\";import{BsThreeDots}from\"react-icons/bs\";import{FaRegCommentAlt,FaRegWindowClose,FaUserLock,FaUserAlt}from\"react-icons/fa\";import{IoIosShareAlt}from\"react-icons/io\";import{GoEyeClosed}from\"react-icons/go\";import{List,Tooltip,Spin}from'antd';import moment from'moment';import{PUBLIC_URL}from'./../../../Constants/public.jsx';import{AiOutlineCaretRight}from\"react-icons/ai\";import{Image,Transformation}from'cloudinary-react';import{useDispatch}from'react-redux';import{toggleStatusPresentialModal}from'./../../../Actions/index.jsx';import{responseAddCommentProfile}from'./../../../Actions/index.jsx';import{requestAddCommentProfile}from'./../../../Actions/index.jsx';import axios from'axios';export var Post=React.forwardRef(function(props,ref){moment.updateLocale('vi',{relativeTime:{future:\"%s\",past:\"%s trước\",s:'vài giây',ss:'%d phút',m:\"1 phút trước\",mm:\"%d phút\",h:\"%d giờ\",hh:\"%d giờ\",d:\"1 ngày\",dd:\"%d ngày\",w:\"1 tuần\",ww:\"%d tuần\",M:\"1 tháng\",MM:\"%d tháng\",y:\"1 năm\",yy:\"%d năm\"}});var inputCommentRef=useRef();var refContentPost=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listParentComment=_useState2[0],setListParentComment=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listChildComment=_useState4[0],setListChildComment=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),iconReaction=_useState6[0],setIconReaction=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),styleListSendReaction=_useState8[0],setStyleListSendReaction=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLike=_useState10[0],setIsLike=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),contentPostStyle=_useState12[0],setContentPostStyle=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),moreContent=_useState14[0],setMoreContent=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),lineContent=_useState16[0],setLineContent=_useState16[1];var totalReactionPost=props.post.actions_post;var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),delayHandler=_useState18[0],setDelayHandler=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),newComment=_useState20[0],setNewComment=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showComment=_useState22[0],setShowComment=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),noti=_useState24[0],setNoti=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),typeNoti=_useState26[0],setTypeNoti=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),isHide=_useState28[0],setIsHide=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),newOneCmt=_useState30[0],setNewOneCmt=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),isNewComment=_useState32[0],setIsNewComment=_useState32[1];var dispatch=useDispatch();useEffect(function(){if(!props.loadingSetting&&typeNoti){if(typeNoti==='unNotification'){setNoti('Bạn đã tắt thông báo từ bài viết này thành công');}else{setIsHide(true);}}},[props.loadingSetting]);var onSubmitComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(requestAddCommentProfile());setNewOneCmt(value);setIsNewComment(true);_context.next=5;return axios.post('https://www.api.mohi.vn/api/auth/create-comment',{comment_PostId:props.post.id,comment_Content:value,comment_Type:'parent'}).then(function(res){setNewComment([res.data[0]].concat(_toConsumableArray(newComment)));setIsNewComment(false);dispatch(responseAddCommentProfile({idPost:props.post.id,comment:res.data}));});case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitComment(_x){return _ref.apply(this,arguments);};}();var updateComment=function updateComment(idPost,id,value){dispatch(toggleStatusPresentialModal('edit_comment_profile',{idPost:idPost,id:id,value:value}));};var deleteComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var deleteCmt;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\",{id:id});case 2:deleteCmt=newComment.filter(function(cmt){return cmt.pivot.id!==id;});setNewComment(deleteCmt);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteComment(_x2){return _ref2.apply(this,arguments);};}();var toggleMoreContentPost=function toggleMoreContentPost(){if(moreContent){setMoreContent(false);setContentPostStyle({maxWidth:'100%',display:'-webkit-box',WebkitBoxOrient:'vertical',WebkitLineClamp:3,overflow:'hidden',textOverflow:'ellipsis'});}else{setMoreContent(true);setContentPostStyle({display:'block'});}};function removeOrFilterNationality(objectOfNationality){return Array.from(new Set(objectOfNationality.map(function(tempObject){return tempObject.pivot.actions_action;})));}function focusInputComment(){var inputRef=inputCommentRef.current;inputRef.focusCommentInput();}useEffect(function(){var _commentParent=[];var _commentChild=[];props.post.comment_post.reverse().map(function(comment,index){if(comment.pivot.comment_Type==='parent'){_commentParent.push(comment);setListParentComment(_commentParent);}if(comment.pivot.comment_Type==='child'){_commentChild.push(comment);setListChildComment(_commentChild);}});var divHeight=refContentPost.current.offsetHeight;setLineContent(divHeight/25);},[]);var leaveListSendReaction=function leaveListSendReaction(){setDelayHandler(setTimeout(function(){setStyleListSendReaction({top:'-10px',opacity:0,visibility:'hidden'});},1000));clearTimeout(delayHandler);};var enterListSendReaction=function enterListSendReaction(){setDelayHandler(setTimeout(function(){setStyleListSendReaction({top:'-56px',opacity:1,visibility:'visible'});},500));clearTimeout(delayHandler);};var loadingSendRequestSetting=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(type,idPost,idUser){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setTypeNoti(type);_context3.next=3;return props.loadingSendRequestSetting(type,idPost,idUser);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function loadingSendRequestSetting(_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();var showCommentFunc=function showCommentFunc(){setShowComment(!showComment);};var NotiSetting=function NotiSetting(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"noti-post\",style:{background:'white',border:'1px solid rgba(0,0,0,0.1)',borderRadius:'2px',padding:'10px',marginTop:'10px',color:'green'}},noti));};var updatePost=function updatePost(post){dispatch(toggleStatusPresentialModal('update_post_profile',post));};var settingPost=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(List,{className:\"setting-post\",loading:props.loadingSetting},props.post.user_admin_post.user_username===currentUser.user_username&&/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('deletePost',props.post.id,'');}},/*#__PURE__*/React.createElement(MdDelete,null),\" X\\xF3a b\\xE0i vi\\u1EBFt\"),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return updatePost(props.post);}},/*#__PURE__*/React.createElement(AiFillEdit,null),\" S\\u1EEDa b\\xE0i vi\\u1EBFt\"),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('hidePost',props.post.id,'');}},/*#__PURE__*/React.createElement(GoEyeClosed,null),\" \\u1EA8n b\\xE0i vi\\u1EBFt\"),/*#__PURE__*/React.createElement(List.Item,{onClick:function onClick(){return loadingSendRequestSetting('unNotification',props.post.id,'');}},/*#__PURE__*/React.createElement(MdNotificationsOff,null),\"T\\u1EAFt th\\xF4ng b\\xE1o t\\u1EEB b\\xE0i vi\\u1EBFt\")));var listReactionPost=function listReactionPost(){return/*#__PURE__*/React.createElement(\"ul\",{className:\"post-reaction-list\"},totalReactionPost.slice(0,21).map(function(reaction,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+reaction.user_username},reaction.user_first_name+' '+reaction.user_last_name));}),totalReactionPost.length-21>0&&/*#__PURE__*/React.createElement(\"li\",null,\"v\\xE0 \",totalReactionPost.length-21,\" ng\\u01B0\\u1EDDi kh\\xE1c\"));};var listIconReactionPost=function listIconReactionPost(reaction,index){switch(reaction){case'like':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"});break;case'haha':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"});break;case'wow':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"});break;case'sad':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"});break;case'angry':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"});break;case'love':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"});break;default:return/*#__PURE__*/React.createElement(AiOutlineLike,null);}};var ListTagUserPost=function ListTagUserPost(){var twoItemTags=props.post.tag_users_post.slice(0,2);var itemToLast=props.post.tag_users_post.slice(2);if(props.post.tag_users_post.length&&props.post.tag_users_post.length<=2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},index!==0?' và ':null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},' '+tag.user_first_name+' '+tag.user_last_name));}));}if(props.post.tag_users_post.length>2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"c\\xF9ng v\\u1EDBi\",twoItemTags.map(function(tag,index){return/*#__PURE__*/React.createElement(\"span\",{key:index},\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name),\" v\\xE0 \");}),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",className:\"tag-more-user\",title:/*#__PURE__*/React.createElement(\"ul\",{className:\"tag-more-user-list\"},itemToLast.map(function(tag,index){return/*#__PURE__*/React.createElement(\"li\",{key:index},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+tag.user_username},tag.user_first_name+' '+tag.user_last_name));}))},itemToLast.length,\" ng\\u01B0\\u1EDDi kh\\xE1c\"));}return null;};var PrivacyPost=function PrivacyPost(){switch(props.post.post_Privacy){case\"public\":return/*#__PURE__*/React.createElement(MdPublic,null);break;case\"onlyme\":return/*#__PURE__*/React.createElement(FaUserLock,null);break;case\"friend\":return/*#__PURE__*/React.createElement(FaUserAlt,null);break;default:return null;}};var iconReactionPost=function iconReactionPost(reaction,index){switch(reaction.pivot.actions_action){case'like':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"});break;case'haha':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"});break;case'wow':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"});break;case'sad':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"});break;case'angry':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"});break;case'love':return/*#__PURE__*/React.createElement(\"img\",{key:index,className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"});break;default:return/*#__PURE__*/React.createElement(AiOutlineLike,null);}};var PagePost=function PagePost(){if(props.post.post_PageId){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/pages/'+props.post.page_admin_post.page_FakeId},props.post.page_admin_post.page_Name));}return null;};var UserReceivedPost=function UserReceivedPost(){if(props.post.post_userReceiveId&&props.post.post_userReceiveId!==props.post.user_admin_post.id){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.profile_receive_post.user_username},props.post.profile_receive_post.user_first_name+' '+props.post.profile_receive_post.user_last_name));}return null;};var GroupPost=function GroupPost(){if(props.post.post_GroupId){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(AiOutlineCaretRight,null),\" \",/*#__PURE__*/React.createElement(Link,{to:'/groups/'+props.post.group_admin_post.group_FakeId},props.post.group_admin_post.group_Name));}return null;};var sendReactionPost=function sendReactionPost(reaction,postId){setStyleListSendReaction({top:'-10px',opacity:0,visibility:'hidden'});props.sendReactionPost(reaction,postId);switch(reaction){case'unlike':setIconReaction(/*#__PURE__*/React.createElement(AiOutlineLike,null));setIsLike(false);break;case'like':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/like.png',alt:\"Th\\xEDch\"}));break;case'haha':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/haha.png',alt:\"C\\u01B0\\u1EDDi\"}));break;case'wow':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/wow.png',alt:\"Ng\\u1EA1c nhi\\xEAn\"}));break;case'sad':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/sad.png',alt:\"Bu\\u1ED3n\"}));break;case'angry':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/angry.png',alt:\"Gi\\u1EADn d\\u1EEF\"}));break;case'love':setIsLike(true);setIconReaction(/*#__PURE__*/React.createElement(\"img\",{className:\"icon-reaction icon-like-22\",src:PUBLIC_URL+'icon/heart.png',alt:\"Y\\xEAu th\\xEDch\"}));break;}};var UserUpdateCover=function UserUpdateCover(){if(props.post.post_Type==='cover'){return/*#__PURE__*/React.createElement(\"span\",null,\" \\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh b\\xECa\");}return null;};var UserUpdateAvatar=function UserUpdateAvatar(){if(props.post.post_Type==='avatar'){return/*#__PURE__*/React.createElement(\"span\",null,\" \\u0111\\xE3 c\\u1EADp nh\\u1EADt \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n\");}return null;};if(isHide)return null;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"post\",ref:ref},noti&&/*#__PURE__*/React.createElement(NotiSetting,null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.user_admin_post.user_username},props.post.user_admin_post.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:props.post.user_admin_post.user_avatar,alt:props.post.user_admin_post.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:props.post.user_admin_post.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:props.post.user_admin_post.user_avatar_cropH,width:props.post.user_admin_post.user_avatar_cropW,x:props.post.user_admin_post.user_avatar_cropX,y:props.post.user_admin_post.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-boss\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:'/profile/'+props.post.user_admin_post.user_username},props.post.user_admin_post.user_first_name+\" \"+props.post.user_admin_post.user_last_name,\" \"),/*#__PURE__*/React.createElement(ListTagUserPost,null),/*#__PURE__*/React.createElement(PagePost,null),/*#__PURE__*/React.createElement(GroupPost,null),/*#__PURE__*/React.createElement(UserReceivedPost,null),/*#__PURE__*/React.createElement(UserUpdateCover,null),/*#__PURE__*/React.createElement(UserUpdateAvatar,null)),/*#__PURE__*/React.createElement(\"p\",{className:\"post-time-created\"},moment(moment.utc(props.post.created_at).toDate()).fromNow(),\" \",/*#__PURE__*/React.createElement(PrivacyPost,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-setting\"},/*#__PURE__*/React.createElement(Tooltip,{trigger:'click',placement:\"bottom\",title:settingPost},/*#__PURE__*/React.createElement(BsThreeDots,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-content\"},/*#__PURE__*/React.createElement(\"div\",{style:contentPostStyle,ref:refContentPost},props.post.post_Content,\" \"),lineContent>=4?/*#__PURE__*/React.createElement(React.Fragment,null,!moreContent?/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPost},\" Xem th\\xEAm\"):/*#__PURE__*/React.createElement(\"span\",{className:\"more-content-post\",onClick:toggleMoreContentPost},\"Thu g\\u1ECDn\")):null),/*#__PURE__*/React.createElement(PostImage,{post:props.post,images:props.post.images_post})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-total-action\",style:{display:'flex',justifyContent:'space-between'}},totalReactionPost.length?/*#__PURE__*/React.createElement(Tooltip,{placement:\"top\",title:listReactionPost},/*#__PURE__*/React.createElement(\"span\",null,removeOrFilterNationality(totalReactionPost).slice(0,3).map(function(reaction,index){return listIconReactionPost(reaction,index);}),' '+totalReactionPost.length,\" ng\\u01B0\\u1EDDi \\u0111\\xE3 b\\xE0y t\\u1ECF c\\u1EA3m x\\xFAc\")):null,/*#__PURE__*/React.createElement(\"span\",{onClick:showCommentFunc},props.post.comment_post.length+newComment.length?props.post.comment_post.length+' bình luận':null,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-action-item send-reaction\",onMouseEnter:enterListSendReaction,onMouseLeave:leaveListSendReaction},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).length&&isLike==='default'?sendReactionPost('unlike',props.post.id):/*#__PURE__*/React.createElement(React.Fragment,null,!isLike||isLike==='default'?sendReactionPost('like',props.post.id):sendReactionPost('unlike',props.post.id));}},iconReaction?iconReaction:totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).length?totalReactionPost.filter(function(reaction){return reaction.pivot.actions_UserId===currentUser.id;}).map(function(reaction,index){return iconReactionPost(reaction,index);}):/*#__PURE__*/React.createElement(AiOutlineLike,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"list-icon-send-reaction\",style:styleListSendReaction},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('like',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/like.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('love',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/love.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('haha',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/haha.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('wow',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/wow.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('sad',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/sad.gif',alt:\"\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){return sendReactionPost('angry',props.post.id);},className:\"icon-like-48\",src:PUBLIC_URL+'icon/angry.gif',alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-action-item\",onClick:function onClick(){return focusInputComment();}},/*#__PURE__*/React.createElement(FaRegCommentAlt,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-current-user\"},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-input\"},/*#__PURE__*/React.createElement(CommentEditor,{ref:inputCommentRef,onSubmitComment:onSubmitComment}))),props.loadingAddComment&&isNewComment?/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item post-new-comment\",style:{marginBottom:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+currentUser.user_username},currentUser.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:currentUser.user_avatar,alt:currentUser.user_first_name+' '+currentUser.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:currentUser.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:currentUser.user_avatar_cropH,width:currentUser.user_avatar_cropW,x:currentUser.user_avatar_cropX,y:currentUser.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info-user\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+currentUser.user_username},currentUser.user_first_name+' '+currentUser.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-content\"},/*#__PURE__*/React.createElement(\"p\",null,newOneCmt)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-action\"},/*#__PURE__*/React.createElement(\"span\",null,moment(new Date(),\"YYYYMMDD\\h:m:s\").fromNow())))),/*#__PURE__*/React.createElement(Spin,null),/*#__PURE__*/React.createElement(\"div\",{className:\"post-new-comment-waiting\"})):null,newComment.map(function(newcmt,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item post-new-comment\",style:{marginBottom:'10px'},key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-avatar\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+newcmt.user_username},newcmt.user_avatar_cropX===null?/*#__PURE__*/React.createElement(\"img\",{src:newcmt.user_avatar,alt:newcmt.user_first_name+' '+newcmt.user_last_name}):/*#__PURE__*/React.createElement(Image,{cloudName:\"mohi-vn\",publicId:newcmt.user_avatar+\".jpg\",version:\"1607061343\"},/*#__PURE__*/React.createElement(Transformation,{height:newcmt.user_avatar_cropH,width:newcmt.user_avatar_cropW,x:newcmt.user_avatar_cropX,y:newcmt.user_avatar_cropY,crop:\"crop\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-info-user\"},/*#__PURE__*/React.createElement(Link,{to:'/profile/'+newcmt.user_username},newcmt.user_first_name+' '+newcmt.user_last_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-content\"},/*#__PURE__*/React.createElement(\"p\",null,newcmt.pivot.comment_Content)),/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-item-parent-action\"},/*#__PURE__*/React.createElement(\"span\",null,moment(moment.utc(newcmt.pivot.created_at).toDate()).fromNow()))),newcmt.id===JSON.parse(localStorage.getItem('ustk')).info.id&&/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post\"},/*#__PURE__*/React.createElement(Tooltip,{trigger:\"click\",placement:\"bottom\",title:/*#__PURE__*/React.createElement(\"div\",{className:\"setting-comment-post-tooltip\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return updateComment(props.post.id,newcmt.pivot.id,newcmt.pivot.comment_Content);}},\"S\\u1EEDa b\\xECnh lu\\u1EADn\"),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return deleteComment(newcmt.pivot.id);}},\"X\\xF3a b\\xECnh lu\\u1EADn\"))},/*#__PURE__*/React.createElement(BsThreeDots,null)))));}),listParentComment.length>0&&listParentComment.length<=6||showComment?/*#__PURE__*/React.createElement(\"div\",{className:\"post-comment-container\"},listParentComment.map(function(comment,index){return/*#__PURE__*/React.createElement(CommentParent,{key:index,listChildComment:listChildComment,comment:comment,idPost:props.post.id});})):null)));});","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/Profiles/MyProfile/Post.jsx"],"names":["React","useEffect","useState","useRef","PostImage","CommentEditor","CommentParent","Link","MdPublic","MdNotificationsOff","MdDelete","AiOutlineLike","AiOutlineIssuesClose","AiFillEdit","BsThreeDots","FaRegCommentAlt","FaRegWindowClose","FaUserLock","FaUserAlt","IoIosShareAlt","GoEyeClosed","List","Tooltip","Spin","moment","PUBLIC_URL","AiOutlineCaretRight","Image","Transformation","useDispatch","toggleStatusPresentialModal","responseAddCommentProfile","requestAddCommentProfile","axios","Post","forwardRef","props","ref","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","w","ww","M","MM","y","yy","inputCommentRef","refContentPost","listParentComment","setListParentComment","listChildComment","setListChildComment","iconReaction","setIconReaction","styleListSendReaction","setStyleListSendReaction","isLike","setIsLike","contentPostStyle","setContentPostStyle","moreContent","setMoreContent","lineContent","setLineContent","totalReactionPost","post","actions_post","currentUser","JSON","parse","localStorage","getItem","info","delayHandler","setDelayHandler","newComment","setNewComment","showComment","setShowComment","noti","setNoti","typeNoti","setTypeNoti","isHide","setIsHide","newOneCmt","setNewOneCmt","isNewComment","setIsNewComment","dispatch","loadingSetting","onSubmitComment","value","comment_PostId","id","comment_Content","comment_Type","then","res","data","idPost","comment","updateComment","deleteComment","deleteCmt","filter","cmt","pivot","toggleMoreContentPost","maxWidth","display","WebkitBoxOrient","WebkitLineClamp","overflow","textOverflow","removeOrFilterNationality","objectOfNationality","Array","from","Set","map","tempObject","actions_action","focusInputComment","inputRef","current","focusCommentInput","_commentParent","_commentChild","comment_post","reverse","index","push","divHeight","offsetHeight","leaveListSendReaction","setTimeout","top","opacity","visibility","clearTimeout","enterListSendReaction","loadingSendRequestSetting","type","idUser","showCommentFunc","NotiSetting","background","border","borderRadius","padding","marginTop","color","updatePost","settingPost","user_admin_post","user_username","listReactionPost","slice","reaction","user_first_name","user_last_name","length","listIconReactionPost","ListTagUserPost","twoItemTags","tag_users_post","itemToLast","tag","PrivacyPost","post_Privacy","iconReactionPost","PagePost","post_PageId","page_admin_post","page_FakeId","page_Name","UserReceivedPost","post_userReceiveId","profile_receive_post","GroupPost","post_GroupId","group_admin_post","group_FakeId","group_Name","sendReactionPost","postId","UserUpdateCover","post_Type","UserUpdateAvatar","user_avatar_cropX","user_avatar","user_avatar_cropH","user_avatar_cropW","user_avatar_cropY","utc","created_at","toDate","fromNow","post_Content","images_post","justifyContent","actions_UserId","loadingAddComment","marginBottom","Date","newcmt"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport PostImage from './PostImage.jsx';\r\nimport CommentEditor from './CommentEditor.jsx';\r\nimport CommentParent from './CommentParent.jsx';\r\nimport { Link } from 'react-router-dom';\r\nimport { MdPublic, MdNotificationsOff, MdDelete } from \"react-icons/md\";\r\nimport { AiOutlineLike, AiOutlineIssuesClose, AiFillEdit } from \"react-icons/ai\";\r\nimport { BsThreeDots } from \"react-icons/bs\";\r\nimport { FaRegCommentAlt, FaRegWindowClose, FaUserLock, FaUserAlt  } from \"react-icons/fa\";\r\nimport { IoIosShareAlt } from \"react-icons/io\";\r\nimport { GoEyeClosed } from \"react-icons/go\";\r\nimport { List, Tooltip, Spin } from 'antd';\r\nimport moment from 'moment';\r\nimport {PUBLIC_URL} from './../../../Constants/public.jsx';\r\nimport { AiOutlineCaretRight } from \"react-icons/ai\";\r\nimport {Image,Transformation} from 'cloudinary-react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggleStatusPresentialModal } from './../../../Actions/index.jsx';\r\nimport { responseAddCommentProfile } from './../../../Actions/index.jsx';\r\nimport { requestAddCommentProfile } from './../../../Actions/index.jsx';\r\nimport axios from 'axios';\r\n\r\nexport const Post = React.forwardRef((props, ref ) =>  {\r\n\r\n    moment.updateLocale('vi', {\r\n      relativeTime : {\r\n          future: \"%s\",\r\n          past:   \"%s trước\",\r\n          s  : 'vài giây',\r\n          ss : '%d phút',\r\n          m:  \"1 phút trước\",\r\n          mm: \"%d phút\",\r\n          h:  \"%d giờ\",\r\n          hh: \"%d giờ\",\r\n          d:  \"1 ngày\",\r\n          dd: \"%d ngày\",\r\n          w:  \"1 tuần\",\r\n          ww: \"%d tuần\",\r\n          M:  \"1 tháng\",\r\n          MM: \"%d tháng\",\r\n          y:  \"1 năm\",\r\n          yy: \"%d năm\"\r\n      }\r\n    });\r\n    const inputCommentRef = useRef();\r\n    const refContentPost = useRef();\r\n    const [listParentComment, setListParentComment] = useState([]);\r\n    const [listChildComment, setListChildComment] = useState([]);\r\n    const [iconReaction, setIconReaction] = useState();\r\n    const [styleListSendReaction, setStyleListSendReaction] = useState();\r\n    const [isLike, setIsLike] = useState(false);\r\n    const [contentPostStyle, setContentPostStyle] = useState();\r\n    const [moreContent, setMoreContent] = useState(false);\r\n    const [lineContent, setLineContent] = useState(false);\r\n    const totalReactionPost = props.post.actions_post;\r\n    const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n    const [delayHandler, setDelayHandler] = useState(null)\r\n    const [newComment, setNewComment] = useState([])\r\n    const [showComment, setShowComment] = useState(false)\r\n    const [noti, setNoti] = useState()\r\n    const [typeNoti, setTypeNoti] = useState()\r\n    const [isHide, setIsHide] = useState(false)\r\n    const [newOneCmt, setNewOneCmt] = useState()\r\n    const [isNewComment, setIsNewComment] = useState(false)\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n      if(!props.loadingSetting && typeNoti){\r\n        if(typeNoti === 'unNotification'){\r\n          setNoti('Bạn đã tắt thông báo từ bài viết này thành công')\r\n        }else {\r\n          setIsHide(true)\r\n        }\r\n      }\r\n    }, [props.loadingSetting])\r\n\r\n    const onSubmitComment = async (value) => {\r\n      dispatch(requestAddCommentProfile())\r\n      setNewOneCmt(value)\r\n      setIsNewComment(true)\r\n      await axios.post('https://www.api.mohi.vn/api/auth/create-comment', {comment_PostId: props.post.id, comment_Content: value, comment_Type: 'parent'})\r\n      .then((res) => {\r\n        setNewComment([res.data[0], ...newComment])\r\n        setIsNewComment(false)\r\n        dispatch(responseAddCommentProfile({idPost: props.post.id, comment: res.data}))\r\n      })\r\n    }\r\n\r\n    const updateComment = (idPost, id, value) => {\r\n      dispatch(toggleStatusPresentialModal('edit_comment_profile', {idPost: idPost, id: id, value: value}))\r\n    }\r\n\r\n    const deleteComment = async (id) => {\r\n      await axios.post(\"https://www.api.mohi.vn/api/auth/delete-comment\", {id: id})\r\n      const deleteCmt = newComment.filter(cmt => cmt.pivot.id !== id);\r\n      setNewComment(deleteCmt)\r\n    }\r\n\r\n    const toggleMoreContentPost = () => {\r\n      if(moreContent){\r\n        setMoreContent(false)\r\n        setContentPostStyle({\r\n          maxWidth: '100%',\r\n          display: '-webkit-box',\r\n          WebkitBoxOrient: 'vertical',\r\n          WebkitLineClamp: 3,\r\n          overflow: 'hidden',\r\n          textOverflow: 'ellipsis',\r\n        })\r\n      }else {\r\n        setMoreContent(true)\r\n        setContentPostStyle({\r\n          display: 'block'\r\n        })\r\n      }\r\n    }\r\n\r\n    function removeOrFilterNationality(objectOfNationality) {\r\n       return Array.from(new Set(objectOfNationality.map(tempObject => tempObject.pivot.actions_action)));\r\n    }\r\n\r\n    function focusInputComment() {\r\n        let inputRef = inputCommentRef.current;\r\n        inputRef.focusCommentInput();\r\n    }\r\n\r\n    useEffect(() => {\r\n        let _commentParent = []\r\n        let _commentChild = []\r\n\r\n        props.post.comment_post.reverse().map((comment, index) => {\r\n            if (comment.pivot.comment_Type === 'parent') {\r\n                _commentParent.push(comment)\r\n                setListParentComment(_commentParent)\r\n            }\r\n            if (comment.pivot.comment_Type === 'child') {\r\n                _commentChild.push(comment)\r\n                setListChildComment(_commentChild)\r\n            }\r\n        })\r\n        const divHeight = refContentPost.current.offsetHeight\r\n        setLineContent(divHeight / 25);\r\n    }, []);\r\n\r\n\r\n    const leaveListSendReaction = () => {\r\n      setDelayHandler(setTimeout(() => {\r\n         setStyleListSendReaction({\r\n          top: '-10px',\r\n          opacity:0,\r\n          visibility: 'hidden'\r\n        })\r\n      }, 1000))\r\n      clearTimeout(delayHandler)\r\n    }\r\n\r\n    const enterListSendReaction = () => {\r\n      setDelayHandler(setTimeout(() => {\r\n            setStyleListSendReaction({\r\n              top: '-56px',\r\n              opacity:1,\r\n              visibility: 'visible'\r\n            })\r\n      }, 500))\r\n      clearTimeout(delayHandler)\r\n    }\r\n\r\n    const loadingSendRequestSetting = async (type, idPost, idUser) => {\r\n      setTypeNoti(type)\r\n      await props.loadingSendRequestSetting(type, idPost, idUser)\r\n    }\r\n\r\n    const showCommentFunc = () => {\r\n      setShowComment(!showComment)\r\n    }\r\n\r\n    const NotiSetting = () => {\r\n      return(\r\n        <React.Fragment>\r\n          <div className=\"noti-post\" style={{background: 'white', border: '1px solid rgba(0,0,0,0.1)', borderRadius: '2px', padding: '10px', marginTop: '10px', color: 'green'}}>{noti}</div>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n\r\n    const updatePost = (post) => {\r\n      dispatch(toggleStatusPresentialModal('update_post_profile', post))\r\n    }\r\n\r\n    const settingPost = (\r\n        <React.Fragment>\r\n            <List className=\"setting-post\" loading={props.loadingSetting}>\r\n                {props.post.user_admin_post.user_username === currentUser.user_username && <List.Item onClick={() => loadingSendRequestSetting('deletePost', props.post.id, '')}><MdDelete /> Xóa bài viết</List.Item>}\r\n                <List.Item onClick={() => updatePost(props.post)}><AiFillEdit /> Sửa bài viết</List.Item>\r\n                <List.Item onClick={() => loadingSendRequestSetting('hidePost', props.post.id, '')}><GoEyeClosed /> Ẩn bài viết</List.Item>\r\n                <List.Item onClick={() => loadingSendRequestSetting('unNotification', props.post.id, '')}><MdNotificationsOff />Tắt thông báo từ bài viết</List.Item>\r\n            </List>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const listReactionPost = () => {\r\n      return(\r\n        <ul className=\"post-reaction-list\">\r\n          {totalReactionPost.slice(0, 21).map((reaction, index) => {\r\n            return(\r\n                <li key={index}>\r\n                  <Link to={'/profile/' + reaction.user_username}>{reaction.user_first_name + ' ' + reaction.user_last_name}</Link>\r\n                </li>\r\n            )\r\n          })}\r\n          { totalReactionPost.length - 21 > 0 &&\r\n          <li>\r\n            và {totalReactionPost.length - 21} người khác\r\n          </li>\r\n          }\r\n        </ul>\r\n      )\r\n    }\r\n\r\n    const listIconReactionPost = (reaction, index) => {\r\n      switch (reaction) {\r\n        case 'like':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/like.png'} alt=\"Thích\"/>\r\n          break;\r\n        case 'haha':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/haha.png'} alt=\"Cười\"/>\r\n          break;\r\n        case 'wow':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/wow.png'} alt=\"Ngạc nhiên\"/>\r\n          break;\r\n        case 'sad':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/sad.png'} alt=\"Buồn\"/>\r\n          break;\r\n        case 'angry':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/angry.png'} alt=\"Giận dữ\"/>\r\n          break;\r\n        case 'love':\r\n            return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/heart.png'} alt=\"Yêu thích\"/>\r\n          break;\r\n        default: return <AiOutlineLike/>\r\n      }\r\n    }\r\n\r\n    const ListTagUserPost = () => {\r\n        const twoItemTags = props.post.tag_users_post.slice(0, 2);\r\n        const itemToLast =  props.post.tag_users_post.slice(2);\r\n\r\n        if(props.post.tag_users_post.length && props.post.tag_users_post.length <= 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <React.Fragment  key={index}>\r\n                    { index !== 0 ? ' và ' : null}\r\n                  <Link to={'/profile/' + tag.user_username}>\r\n                    {' ' + tag.user_first_name + ' ' + tag.user_last_name}\r\n                  </Link>\r\n                </React.Fragment>\r\n                )\r\n              })}\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        if(props.post.tag_users_post.length > 2){\r\n          return(\r\n            <React.Fragment>\r\n              cùng với\r\n              {twoItemTags.map((tag, index) => {\r\n                return(\r\n                  <span key={index}> <Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link> và </span>\r\n                )\r\n              })}\r\n              <Tooltip\r\n                placement=\"bottom\"\r\n                className=\"tag-more-user\"\r\n                title={\r\n                  <ul className=\"tag-more-user-list\">\r\n                    {itemToLast.map((tag, index) => {\r\n                      return(\r\n                        <li key={index}><Link to={'/profile/' + tag.user_username} >{tag.user_first_name + ' ' + tag.user_last_name}</Link></li>\r\n                      )\r\n                    })}\r\n                  </ul>\r\n                }\r\n              >\r\n                {itemToLast.length} người khác\r\n              </Tooltip>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n\r\n        return null\r\n\r\n    }\r\n\r\n    const PrivacyPost = () => {\r\n      switch ( props.post.post_Privacy) {\r\n        case \"public\":\r\n            return <MdPublic />\r\n          break;\r\n        case \"onlyme\":\r\n            return <FaUserLock />\r\n          break;\r\n        case \"friend\":\r\n            return <FaUserAlt />\r\n          break;\r\n        default: return null\r\n\r\n      }\r\n    }\r\n\r\n    const iconReactionPost = (reaction, index) => {\r\n        switch (reaction.pivot.actions_action) {\r\n          case 'like':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/like.png'} alt=\"Thích\"/>\r\n            break;\r\n          case 'haha':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/haha.png'} alt=\"Cười\"/>\r\n            break;\r\n          case 'wow':\r\n              return <img key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/wow.png'} alt=\"Ngạc nhiên\"/>\r\n            break;\r\n          case 'sad':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/sad.png'} alt=\"Buồn\"/>\r\n            break;\r\n          case 'angry':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/angry.png'} alt=\"Giận dữ\"/>\r\n            break;\r\n          case 'love':\r\n              return <img  key={index} className=\"icon-reaction icon-like-22\" src={PUBLIC_URL + 'icon/heart.png'} alt=\"Yêu thích\"/>\r\n            break;\r\n          default: return <AiOutlineLike />\r\n        }\r\n    }\r\n\r\n    const PagePost = () => {\r\n      if(props.post.post_PageId){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/pages/' + props.post.page_admin_post.page_FakeId}>{props.post.page_admin_post.page_Name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const UserReceivedPost = () => {\r\n      if(props.post.post_userReceiveId && props.post.post_userReceiveId !== props.post.user_admin_post.id){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/profile/' + props.post.profile_receive_post.user_username}>{props.post.profile_receive_post.user_first_name + ' ' + props.post.profile_receive_post.user_last_name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const GroupPost = () => {\r\n      if(props.post.post_GroupId){\r\n        return(\r\n          <span><AiOutlineCaretRight/> <Link to={'/groups/' + props.post.group_admin_post.group_FakeId}>{props.post.group_admin_post.group_Name}</Link></span>\r\n        )\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const sendReactionPost = (reaction, postId) => {\r\n       setStyleListSendReaction({\r\n          top: '-10px',\r\n          opacity:0,\r\n          visibility: 'hidden'\r\n        })\r\n      props.sendReactionPost(reaction, postId)\r\n      switch (reaction) {\r\n        case 'unlike':\r\n            setIconReaction(<AiOutlineLike/>)\r\n            setIsLike(false)\r\n          break;\r\n        case 'like':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/like.png'} alt='Thích'/>)\r\n          break;\r\n        case 'haha':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/haha.png'} alt='Cười'/>)\r\n          break;\r\n        case 'wow':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/wow.png'} alt='Ngạc nhiên'/>)\r\n          break;\r\n        case 'sad':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/sad.png'} alt='Buồn'/>)\r\n          break;\r\n        case 'angry':\r\n            setIsLike(true)\r\n            setIconReaction(<img  className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/angry.png'} alt='Giận dữ'/>)\r\n          break;\r\n        case 'love':\r\n            setIsLike(true)\r\n            setIconReaction(<img className='icon-reaction icon-like-22' src={PUBLIC_URL + 'icon/heart.png'} alt='Yêu thích'/>)\r\n          break;\r\n      }\r\n    }\r\n\r\n    const UserUpdateCover = () => {\r\n      if(props.post.post_Type === 'cover'){\r\n        return <span> đã cập nhật ảnh bìa</span>\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    const UserUpdateAvatar = () => {\r\n      if(props.post.post_Type === 'avatar'){\r\n        return <span> đã cập nhật ảnh đại diện</span>\r\n      }\r\n\r\n      return null\r\n    }\r\n\r\n    if(isHide) return null\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"post\" ref={ref}>\r\n                {noti && <NotiSetting />}\r\n                <div className=\"post-container\">\r\n                    <div className=\"post-header\">\r\n                        <div className=\"post-info\">\r\n                            <div className=\"post-avatar\">\r\n                                <Link to={'/profile/' + props.post.user_admin_post.user_username}>\r\n                                    {props.post.user_admin_post.user_avatar_cropX === null ?\r\n                                      <img src={props.post.user_admin_post.user_avatar} alt={props.post.user_admin_post.user_last_name} />\r\n                                      :\r\n                                      <Image cloudName=\"mohi-vn\" publicId={props.post.user_admin_post.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                        <Transformation height={props.post.user_admin_post.user_avatar_cropH}  width={props.post.user_admin_post.user_avatar_cropW} x={props.post.user_admin_post.user_avatar_cropX} y={props.post.user_admin_post.user_avatar_cropY} crop=\"crop\" />\r\n                                      </Image>\r\n                                    }\r\n                                </Link>\r\n                            </div>\r\n                            <div className=\"post-boss\">\r\n                                <p>\r\n                                    <Link to={'/profile/' + props.post.user_admin_post.user_username}>{props.post.user_admin_post.user_first_name + \" \" + props.post.user_admin_post.user_last_name} </Link>\r\n                                    <ListTagUserPost />\r\n                                    <PagePost />\r\n                                    <GroupPost />\r\n                                    <UserReceivedPost />\r\n                                    <UserUpdateCover />\r\n                                    <UserUpdateAvatar />\r\n                                </p>\r\n                                <p className=\"post-time-created\">{moment(moment.utc(props.post.created_at).toDate()).fromNow()} <PrivacyPost /></p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"post-setting\">\r\n                          <Tooltip trigger={'click'} placement=\"bottom\" title={settingPost}>\r\n                            <BsThreeDots />\r\n                          </Tooltip>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"post-body\">\r\n                        <div className=\"post-content\" >\r\n                            <div style={contentPostStyle} ref={refContentPost}>{props.post.post_Content} </div>\r\n                            {lineContent >= 4 ?\r\n                              <React.Fragment>\r\n                                {!moreContent ? <span className=\"more-content-post\" onClick={toggleMoreContentPost }> Xem thêm</span > : <span className=\"more-content-post\" onClick={toggleMoreContentPost }>Thu gọn</span>}\r\n                              </React.Fragment>\r\n                            : null}\r\n                        </div>\r\n                        <PostImage post={props.post} images={props.post.images_post} />\r\n                    </div>\r\n                    <div className=\"post-footer\">\r\n                          <div className=\"post-total-action\" style={{display:'flex', justifyContent: 'space-between'}}>\r\n                            { totalReactionPost.length ?\r\n                              <Tooltip placement=\"top\" title={listReactionPost}>\r\n                                <span>\r\n                                  {removeOrFilterNationality(totalReactionPost).slice(0, 3).map((reaction, index) => listIconReactionPost(reaction, index))}\r\n                                  {' '+ totalReactionPost.length} người đã bày tỏ cảm xúc</span>\r\n                              </Tooltip>\r\n                            : null}\r\n                            <span onClick={showCommentFunc}>{props.post.comment_post.length + newComment.length ? props.post.comment_post.length + ' bình luận' : null} </span>\r\n                          </div>\r\n                        <div className=\"post-action\" >\r\n                            <div className=\"post-action-item send-reaction\"  onMouseEnter={enterListSendReaction} onMouseLeave={leaveListSendReaction}>\r\n                              <div onClick={() => totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).length && isLike === 'default' ?\r\n                                sendReactionPost('unlike', props.post.id) :\r\n                                  <React.Fragment>\r\n                                    {!isLike || isLike === 'default' ?\r\n                                      sendReactionPost('like', props.post.id)\r\n                                      :\r\n                                      sendReactionPost('unlike', props.post.id)\r\n                                    }\r\n                                  </React.Fragment>\r\n                                } >\r\n                                { iconReaction\r\n                                ?\r\n                                iconReaction\r\n                                :\r\n                                (totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).length\r\n                                ?\r\n                                totalReactionPost.filter(reaction => reaction.pivot.actions_UserId === currentUser.id).map((reaction, index) => iconReactionPost(reaction, index))\r\n                                :\r\n                                <AiOutlineLike/>)\r\n                              }\r\n                              </div>\r\n                              <div className=\"list-icon-send-reaction\" style={styleListSendReaction}>\r\n                                <img onClick={() => sendReactionPost('like', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/like.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('love', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/love.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('haha', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/haha.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('wow', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/wow.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('sad', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/sad.gif'} alt=\"\"/>\r\n                                <img onClick={() => sendReactionPost('angry', props.post.id)} className=\"icon-like-48\" src={PUBLIC_URL + 'icon/angry.gif'} alt=\"\"/>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"post-action-item\" onClick={() => focusInputComment()}>\r\n                                <FaRegCommentAlt />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"post-comment\">\r\n                        <div className=\"post-comment-current-user\">\r\n                          {currentUser.user_avatar_cropX === null ?\r\n                            <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                            :\r\n                            <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                              <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                            </Image>\r\n                          }\r\n                        </div>\r\n                          <div className=\"post-comment-input\">\r\n                              <CommentEditor ref={inputCommentRef} onSubmitComment={onSubmitComment}/>\r\n                          </div>\r\n                    </div>\r\n                    {props.loadingAddComment && isNewComment?\r\n                        <div className=\"post-comment-item post-new-comment\" style={{marginBottom: '10px'}}>\r\n                          <div className=\"post-comment-item-parent\">\r\n                            <div className=\"post-comment-item-parent-avatar\">\r\n                              <Link to={'/profile/'+ currentUser.user_username}>\r\n                                {currentUser.user_avatar_cropX === null ?\r\n                                  <img src={currentUser.user_avatar} alt={currentUser.user_first_name + ' ' + currentUser.user_last_name} />\r\n                                  :\r\n                                  <Image cloudName=\"mohi-vn\" publicId={currentUser.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                    <Transformation height={currentUser.user_avatar_cropH}  width={currentUser.user_avatar_cropW} x={currentUser.user_avatar_cropX} y={currentUser.user_avatar_cropY} crop=\"crop\" />\r\n                                  </Image>\r\n                                }\r\n                              </Link>\r\n                            </div>\r\n                            <div className=\"post-comment-item-parent-info\">\r\n                              <div className=\"post-comment-item-parent-info-user\">\r\n                                <Link to={'/profile/'+ currentUser.user_username}>{currentUser.user_first_name + ' ' + currentUser.user_last_name}</Link>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-content\">\r\n                                <p>{newOneCmt}</p>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-action\">\r\n                              <span>{moment(new Date, \"YYYYMMDD\\h:m:s\").fromNow()}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                              <Spin />\r\n                              <div className=\"post-new-comment-waiting\" />\r\n                        </div>\r\n                    : null}\r\n                    {newComment.map((newcmt, index) => {\r\n                      return(\r\n                        <div className=\"post-comment-item post-new-comment\" style={{marginBottom: '10px'}} key={index}>\r\n                          <div className=\"post-comment-item-parent\">\r\n                            <div className=\"post-comment-item-parent-avatar\">\r\n                              <Link to={'/profile/'+ newcmt.user_username}>\r\n                                {newcmt.user_avatar_cropX === null ?\r\n                                  <img src={newcmt.user_avatar} alt={newcmt.user_first_name + ' ' + newcmt.user_last_name} />\r\n                                  :\r\n                                  <Image cloudName=\"mohi-vn\" publicId={newcmt.user_avatar+ \".jpg\"} version=\"1607061343\">\r\n                                    <Transformation height={newcmt.user_avatar_cropH}  width={newcmt.user_avatar_cropW} x={newcmt.user_avatar_cropX} y={newcmt.user_avatar_cropY} crop=\"crop\" />\r\n                                  </Image>\r\n                                }\r\n                              </Link>\r\n                            </div>\r\n                            <div className=\"post-comment-item-parent-info\">\r\n                              <div className=\"post-comment-item-parent-info-user\">\r\n                                <Link to={'/profile/'+ newcmt.user_username}>{newcmt.user_first_name + ' ' + newcmt.user_last_name}</Link>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-content\">\r\n                                <p>{newcmt.pivot.comment_Content}</p>\r\n                              </div>\r\n                              <div className=\"post-comment-item-parent-action\">\r\n                              <span>{moment(moment.utc(newcmt.pivot.created_at).toDate()).fromNow()}</span>\r\n                              </div>\r\n                            </div>\r\n                            {newcmt.id === JSON.parse(localStorage.getItem('ustk')).info.id && <div className=\"setting-comment-post\">\r\n                              <Tooltip\r\n                                trigger=\"click\"\r\n                                placement=\"bottom\"\r\n                                title={\r\n                                  <div className=\"setting-comment-post-tooltip\">\r\n                                    <div onClick={() => updateComment(props.post.id, newcmt.pivot.id, newcmt.pivot.comment_Content)}>\r\n                                      Sửa bình luận\r\n                                    </div>\r\n                                    <div onClick={() => deleteComment(newcmt.pivot.id)}>\r\n                                      Xóa bình luận\r\n                                    </div>\r\n                                  </div>\r\n                                }\r\n                              >\r\n                                <BsThreeDots />\r\n                              </Tooltip>\r\n                            </div>\r\n                            }\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                    {\r\n                        listParentComment.length > 0 && listParentComment.length <= 6 || showComment\r\n                            ? <div className=\"post-comment-container\">\r\n                                {\r\n                                    listParentComment.map((comment, index) => {\r\n                                        return (<CommentParent key={index} listChildComment={listChildComment} comment={comment}  idPost={props.post.id}/>)\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            : null\r\n                    }\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n})\r\n"]},"metadata":{},"sourceType":"module"}