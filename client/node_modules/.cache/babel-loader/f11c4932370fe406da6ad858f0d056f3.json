{"ast":null,"code":"import _classCallCheck from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-height: 200px;\\n  overflow-y: auto;\\n  font-size: 14px;\\n  padding: 5px 10px;\\n  margin-top: 10px;\\n  border: 0.5px solid rgba(0,0,0,0.1);\\n  border-radius:30px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import'draft-js-mention-plugin/lib/plugin.css';import style from'styled-components';import React,{Component}from'react';import{EditorState,convertToRaw}from'draft-js';import Editor from'draft-js-plugins-editor';import createMentionPlugin,{defaultSuggestionsFilter}from'draft-js-mention-plugin';import editorStyles from'./editorStyles.css';import{connect}from'react-redux';var mentions=[];var StyleEditorMention=style.div(_templateObject());var SimpleMentionEditor=/*#__PURE__*/function(_Component){_inherits(SimpleMentionEditor,_Component);var _super=_createSuper(SimpleMentionEditor);function SimpleMentionEditor(props){var _this;_classCallCheck(this,SimpleMentionEditor);_this=_super.call(this,props);_this.state={editorState:EditorState.createEmpty(),suggestions:mentions,listMention:[]};_this.onChange=function(editorState){_this.setState({editorState:editorState});var currentContent=editorState.getCurrentContent();var raw=convertToRaw(currentContent);_this.props.showMentionList(raw.entityMap);};_this.onSearchChange=function(_ref){var value=_ref.value;_this.setState({suggestions:defaultSuggestionsFilter(value,mentions)});};_this.mentionPlugin=createMentionPlugin({mentions:mentions,entityMutability:'IMMUTABLE',supportWhitespace:true});return _this;}_createClass(SimpleMentionEditor,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.friends.map(function(mention){mentions.push({name:mention.user_last_name+' '+mention.user_first_name,link:'/profile/'+mention.user_username,avatar:mention.user_avatar,id:mention.id});});}},{key:\"render\",//\n// onAddMention = (mention) => {\n//   this.props.showMentionList(mention);\n// }\nvalue:function render(){var _this2=this;var MentionSuggestions=this.mentionPlugin.MentionSuggestions;var plugins=[this.mentionPlugin];return/*#__PURE__*/React.createElement(\"div\",{className:editorStyles.editor},/*#__PURE__*/React.createElement(StyleEditorMention,null,/*#__PURE__*/React.createElement(Editor,{editorState:this.state.editorState,onChange:this.onChange,plugins:plugins,placeholder:\"G\\u1EAFn th\\u1EBB ai \\u0111\\xF3...\",ref:function ref(element){_this2.editor=element;}})),/*#__PURE__*/React.createElement(MentionSuggestions,{onSearchChange:this.onSearchChange,suggestions:this.state.suggestions}));}}]);return SimpleMentionEditor;}(Component);var mapStateToProps=function mapStateToProps(state){return{friends:state.friends.list};};export default connect(mapStateToProps,null)(SimpleMentionEditor);","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/NewFeed/EditorMention.jsx"],"names":["style","React","Component","EditorState","convertToRaw","Editor","createMentionPlugin","defaultSuggestionsFilter","editorStyles","connect","mentions","StyleEditorMention","div","SimpleMentionEditor","props","state","editorState","createEmpty","suggestions","listMention","onChange","setState","currentContent","getCurrentContent","raw","showMentionList","entityMap","onSearchChange","value","mentionPlugin","entityMutability","supportWhitespace","friends","map","mention","push","name","user_last_name","user_first_name","link","user_username","avatar","user_avatar","id","MentionSuggestions","plugins","editor","element","mapStateToProps","list"],"mappings":"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","sourcesContent":["import 'draft-js-mention-plugin/lib/plugin.css';\nimport style from 'styled-components';\nimport React, { Component } from 'react';\nimport { EditorState, convertToRaw } from 'draft-js';\nimport Editor from 'draft-js-plugins-editor';\nimport createMentionPlugin, { defaultSuggestionsFilter } from 'draft-js-mention-plugin';\nimport editorStyles from './editorStyles.css';\nimport { connect } from 'react-redux';\n\nconst mentions = [];\n\nconst StyleEditorMention = style.div`\n  width: 100%;\n  max-height: 200px;\n  overflow-y: auto;\n  font-size: 14px;\n  padding: 5px 10px;\n  margin-top: 10px;\n  border: 0.5px solid rgba(0,0,0,0.1);\n  border-radius:30px;\n`;\n\n class SimpleMentionEditor extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.mentionPlugin = createMentionPlugin({\n      mentions,\n      entityMutability: 'IMMUTABLE',\n      supportWhitespace: true\n    });\n  }\n\n  componentDidMount(){\n    this.props.friends.map((mention) => {\n      mentions.push({\n        name: mention.user_last_name + ' ' + mention.user_first_name,\n        link: '/profile/' + mention.user_username,\n        avatar: mention.user_avatar,\n        id: mention.id\n      });\n    })\n  }\n\n  state = {\n    editorState: EditorState.createEmpty(),\n    suggestions: mentions,\n    listMention: []\n  };\n\n  onChange = (editorState) => {\n    this.setState({\n      editorState,\n    });\n\n    let currentContent = editorState .getCurrentContent();\n    let raw = convertToRaw(currentContent);\n    this.props.showMentionList(raw.entityMap);\n  };\n\n  onSearchChange = ({ value }) => {\n    this.setState({\n      suggestions: defaultSuggestionsFilter(value, mentions),\n    });\n  };\n  //\n  // onAddMention = (mention) => {\n  //   this.props.showMentionList(mention);\n  // }\n\n  render() {\n    const { MentionSuggestions } = this.mentionPlugin;\n    const plugins = [this.mentionPlugin];\n\n    return (\n      <div className={editorStyles.editor}>\n        <StyleEditorMention>\n          <Editor\n            editorState={this.state.editorState}\n            onChange={this.onChange}\n            plugins={plugins}\n            placeholder=\"Gắn thẻ ai đó...\"\n            ref={(element) => { this.editor = element; }}\n          />\n        </StyleEditorMention>\n        <MentionSuggestions\n          onSearchChange={this.onSearchChange}\n          suggestions={this.state.suggestions}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  friends: state.friends.list,\n});\n\nexport default connect(mapStateToProps, null)(SimpleMentionEditor)\n"]},"metadata":{},"sourceType":"module"}