{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Web\\\\mohi\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import Home from'./../app/Home.jsx';import SocketContext from'./../Components/Socket/index.jsx';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{requestMessagePopup}from'./../Actions/index.jsx';import{responseMessagePopup}from'./../Actions/index.jsx';import{responseFriendRequestPopup}from'./../Actions/index.jsx';import{requestFriendRequestPopup}from'./../Actions/index.jsx';import{responseFriend}from'./../Actions/index.jsx';import{requestFriend}from'./../Actions/index.jsx';import{fetchListUserSuggestion}from'./../Actions/index.jsx';import{fetchListStory}from'./../Actions/index.jsx';import{responseListStory}from'./../Actions/index.jsx';import{responseListUserSuggestion}from'./../Actions/index.jsx';import{fetchListNotification}from'./../Actions/index.jsx';import{responseListNotification}from'./../Actions/index.jsx';import{responseListMyRequestAddFriend}from'./../Actions/index.jsx';import{readMessageOfList}from'./../Actions/index.jsx';import{addNewMessageOflist}from'./../Actions/index.jsx';import useSound from'use-sound';import{PUBLIC_URL}from'./../Constants/public.jsx';var socketIOClient=require('socket.io-client');var socket=socketIOClient('https://mohi-backend.herokuapp.com/',{transports:['websocket']});function AppContainer(){require('./../axios/inceptor.jsx');var dispatch=useDispatch();var _useSound=useSound(PUBLIC_URL+'sounds/2.mp3',{volume:0.5}),_useSound2=_slicedToArray(_useSound,1),play=_useSound2[0];var currentUser=JSON.parse(localStorage.getItem('ustk')).info;var getListMessagePopup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(requestMessagePopup());_context.next=3;return axios.get('https://www.api.mohi.vn/api/auth/list-message').then(function(res){dispatch(responseMessagePopup(res.data));}).catch(function(e){});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getListMessagePopup(){return _ref.apply(this,arguments);};}();var getListMyRequestAddFriend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('https://www.api.mohi.vn/api/auth/my-request-friend').then(function(res){dispatch(responseListMyRequestAddFriend(res.data));}).catch(function(e){});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function getListMyRequestAddFriend(){return _ref2.apply(this,arguments);};}();var getListFriendRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(requestFriendRequestPopup());_context3.next=3;return axios.get('https://www.api.mohi.vn/api/auth/users-request').then(function(res){dispatch(responseFriendRequestPopup(res.data));}).catch(function(e){});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function getListFriendRequest(){return _ref3.apply(this,arguments);};}();var getListUserSuggestion=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get('https://www.api.mohi.vn/api/auth/users-suggestion').then(function(res){dispatch(responseListUserSuggestion(res.data));}).catch(function(e){});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function getListUserSuggestion(){return _ref4.apply(this,arguments);};}();var getListStory=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get('https://www.api.mohi.vn/api/auth/get-story-home').then(function(res){dispatch(responseListStory(res.data));}).catch(function(e){});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function getListStory(){return _ref5.apply(this,arguments);};}();var getNotification=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.get('https://www.api.mohi.vn/api/auth/notification').then(function(res){dispatch(responseListNotification(res.data));}).catch(function(e){});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function getNotification(){return _ref6.apply(this,arguments);};}();var getListFriend=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch(requestFriend());_context7.next=3;return axios.get('https://www.api.mohi.vn/api/auth/list-friends').then(function(res){dispatch(responseFriend(res.data));}).catch(function(e){});case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function getListFriend(){return _ref7.apply(this,arguments);};}();socket.on('private-chat',function(data){play();});useEffect(function(){socket.on('private-chat',function(data){dispatch(addNewMessageOflist({type:'received',from:data.from,message:data.message}));});getListMyRequestAddFriend();getListFriend();dispatch(fetchListUserSuggestion());getListUserSuggestion();getListMessagePopup();getListFriendRequest();dispatch(fetchListStory());getListStory();dispatch(fetchListNotification());getNotification();},[]);return/*#__PURE__*/React.createElement(SocketContext.Provider,{value:socket},/*#__PURE__*/React.createElement(Home,null));}export default AppContainer;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Containers/AppContainer.jsx"],"names":["React","useEffect","Home","SocketContext","axios","useSelector","useDispatch","requestMessagePopup","responseMessagePopup","responseFriendRequestPopup","requestFriendRequestPopup","responseFriend","requestFriend","fetchListUserSuggestion","fetchListStory","responseListStory","responseListUserSuggestion","fetchListNotification","responseListNotification","responseListMyRequestAddFriend","readMessageOfList","addNewMessageOflist","useSound","PUBLIC_URL","socketIOClient","require","socket","transports","AppContainer","dispatch","volume","play","currentUser","JSON","parse","localStorage","getItem","info","getListMessagePopup","get","then","res","data","catch","e","getListMyRequestAddFriend","getListFriendRequest","getListUserSuggestion","getListStory","getNotification","getListFriend","on","type","from","message"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Home from './../app/Home.jsx';\r\nimport SocketContext from './../Components/Socket/index.jsx';\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { requestMessagePopup } from './../Actions/index.jsx';\r\nimport { responseMessagePopup } from './../Actions/index.jsx';\r\nimport { responseFriendRequestPopup } from './../Actions/index.jsx';\r\nimport { requestFriendRequestPopup } from './../Actions/index.jsx';\r\nimport { responseFriend } from './../Actions/index.jsx';\r\nimport { requestFriend } from './../Actions/index.jsx';\r\nimport { fetchListUserSuggestion } from './../Actions/index.jsx';\r\nimport { fetchListStory } from './../Actions/index.jsx';\r\nimport { responseListStory } from './../Actions/index.jsx';\r\nimport { responseListUserSuggestion } from './../Actions/index.jsx';\r\nimport { fetchListNotification } from './../Actions/index.jsx';\r\nimport { responseListNotification } from './../Actions/index.jsx';\r\nimport { responseListMyRequestAddFriend } from './../Actions/index.jsx';\r\nimport { readMessageOfList } from './../Actions/index.jsx';\r\nimport { addNewMessageOflist } from './../Actions/index.jsx';\r\nimport useSound from 'use-sound';\r\nimport {PUBLIC_URL} from './../Constants/public.jsx';\r\nvar socketIOClient = require('socket.io-client');\r\n\r\nconst socket = socketIOClient('https://mohi-backend.herokuapp.com/', {\r\n  transports: ['websocket'],\r\n});\r\n\r\nfunction AppContainer(){\r\n  require('./../axios/inceptor.jsx');\r\n  const dispatch = useDispatch();\r\n  const [play] = useSound(PUBLIC_URL + 'sounds/2.mp3', {volume: 0.5});\r\n  const currentUser = JSON.parse(localStorage.getItem('ustk')).info;\r\n\r\n  const getListMessagePopup = async () => {\r\n    dispatch(requestMessagePopup())\r\n\r\n    await axios.get('https://www.api.mohi.vn/api/auth/list-message')\r\n    .then((res) => {\r\n        dispatch(responseMessagePopup(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getListMyRequestAddFriend = async () => {\r\n    // dispatch(requestFriendRequestPopup())\r\n\r\n    await axios.get('https://www.api.mohi.vn/api/auth/my-request-friend')\r\n    .then((res) => {\r\n      dispatch(responseListMyRequestAddFriend(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getListFriendRequest = async () => {\r\n    dispatch(requestFriendRequestPopup())\r\n\r\n    await axios.get('https://www.api.mohi.vn/api/auth/users-request')\r\n    .then((res) => {\r\n      dispatch(responseFriendRequestPopup(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getListUserSuggestion = async () => {\r\n    await axios.get('https://www.api.mohi.vn/api/auth/users-suggestion')\r\n    .then((res) => {\r\n        dispatch(responseListUserSuggestion(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getListStory = async () => {\r\n    await axios.get('https://www.api.mohi.vn/api/auth/get-story-home')\r\n    .then((res) => {\r\n        dispatch(responseListStory(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getNotification = async () => {\r\n    await axios.get('https://www.api.mohi.vn/api/auth/notification')\r\n    .then((res) => {\r\n        dispatch(responseListNotification(res.data))\r\n    }).catch((e) => {\r\n    })\r\n  }\r\n\r\n  const getListFriend =  async () => {\r\n      dispatch(requestFriend())\r\n\r\n      await axios.get('https://www.api.mohi.vn/api/auth/list-friends')\r\n      .then((res) => {\r\n        dispatch(responseFriend(res.data))\r\n      })\r\n      .catch((e) => {\r\n      })\r\n  }\r\n\r\n  socket.on('private-chat', function(data){\r\n    play()\r\n  });\r\n\r\n  useEffect(() => {\r\n\r\n    socket.on('private-chat', function(data){\r\n        dispatch(addNewMessageOflist({type: 'received', from : data.from, message: data.message}))\r\n    });\r\n\r\n    getListMyRequestAddFriend()\r\n\r\n    getListFriend()\r\n\r\n    dispatch(fetchListUserSuggestion());\r\n    getListUserSuggestion();\r\n\r\n    getListMessagePopup();\r\n\r\n    getListFriendRequest();\r\n\r\n    dispatch(fetchListStory());\r\n    getListStory();\r\n\r\n    dispatch(fetchListNotification())\r\n    getNotification();\r\n  },[])\r\n\r\n  return(\r\n    <SocketContext.Provider value={socket}>\r\n      <Home />\r\n    </SocketContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AppContainer;\r\n"]},"metadata":{},"sourceType":"module"}