{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web\\\\mohi\\\\client\\\\src\\\\Components\\\\PresentialModal\\\\UploadMuti.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './UploadMuti.css';\nimport { FiPlus } from \"react-icons/fi\";\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport axios from 'axios';\nimport { Spin } from 'antd';\n\nfunction UploadMuti(props) {\n  const [files, setFiles] = useState(props.imagesPost);\n  const [listLoading, setListLoading] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (props.statusCreatePost && props.statusCreatePost !== 'loading') {\n      setFiles([]);\n    }\n  }, [props.statusCreatePost]);\n\n  const onChange = e => {\n    let arrLoading = [];\n    Array.from(e.target.files).map(async (file, index) => {\n      arrLoading.push(index);\n      setListLoading(arrLoading);\n      setLoading(true);\n      const formData = new FormData();\n      formData.append('upload_preset', 'mohi_video');\n      formData.append('file', file);\n      upload(formData);\n    });\n  };\n\n  const upload = async formData => {\n    await axios.post('/v1_1/mohi-vn/upload', formData).then(res => {\n      files.push(res.data);\n    }).then(() => {\n      setListLoading([]);\n      setLoading(false);\n      props.uploadMuti(files);\n    });\n  };\n\n  const deleteFile = index => {\n    const newFile = [...files];\n    newFile.splice(index, 1);\n    setFiles(newFile);\n    props.uploadMuti(newFile);\n  };\n\n  const renderFile = source => {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }\n    }, source.map((photo, index) => {\n      if (photo.resource_type === 'image') {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"list-preview-item\",\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: photo.secure_url,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"list-preview-item-presential \" + index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(AiOutlineClose, {\n          onClick: () => deleteFile(index),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 72\n          }\n        })));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"list-preview-item video-item\",\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"video\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"source\", {\n          src: photo.secure_url,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 22\n          }\n        }), \"Your browser does not support HTML5 video.\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"list-preview-item-presential \" + index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(AiOutlineClose, {\n          onClick: () => deleteFile(index),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 72\n          }\n        })));\n      }\n    }), loading ? /*#__PURE__*/React.createElement(React.Fragment, null, listLoading.map((load, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-preview-next-item\",\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Spin, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }\n      }));\n    })) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-preview-next-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"update_post_upload_image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FiPlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 51\n      }\n    }))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-preview-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-preview-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, renderFile(files))), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"update_post_upload_image\",\n    type: \"file\",\n    multiple: true,\n    onChange: onChange,\n    accept: \"image/*,video/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default UploadMuti;","map":{"version":3,"sources":["D:/Web/mohi/client/src/Components/PresentialModal/UploadMuti.jsx"],"names":["React","useState","useEffect","FiPlus","AiOutlineClose","axios","Spin","UploadMuti","props","files","setFiles","imagesPost","listLoading","setListLoading","loading","setLoading","statusCreatePost","onChange","e","arrLoading","Array","from","target","map","file","index","push","formData","FormData","append","upload","post","then","res","data","uploadMuti","deleteFile","newFile","splice","renderFile","source","photo","resource_type","secure_url","load"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport './UploadMuti.css';\r\nimport { FiPlus } from \"react-icons/fi\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport axios from 'axios';\r\nimport { Spin } from 'antd';\r\n\r\nfunction UploadMuti(props){\r\n  const [files, setFiles] = useState(props.imagesPost);\r\n  const [listLoading, setListLoading] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if(props.statusCreatePost && props.statusCreatePost !== 'loading'){\r\n      setFiles([])\r\n    }\r\n  }, [props.statusCreatePost])\r\n\r\n  const onChange = (e) => {\r\n    let arrLoading = [];\r\n\r\n      Array.from(e.target.files).map( async (file, index) => {\r\n        arrLoading.push(index)\r\n        setListLoading(arrLoading)\r\n        setLoading(true);\r\n\r\n        const formData = new FormData();\r\n        formData.append('upload_preset', 'mohi_video');\r\n        formData.append('file', file);\r\n        upload(formData)\r\n\r\n      })\r\n  }\r\n\r\n  const upload = async (formData) => {\r\n    await axios.post('/v1_1/mohi-vn/upload', formData)\r\n    .then((res) => {\r\n      files.push(res.data)\r\n    }).then(() =>{\r\n      setListLoading([])\r\n      setLoading(false);\r\n      props.uploadMuti(files)\r\n    })\r\n  }\r\n\r\n  const deleteFile = (index) => {\r\n    const newFile = [...files]\r\n    newFile.splice(index, 1)\r\n    setFiles(newFile)\r\n    props.uploadMuti(newFile)\r\n  }\r\n\r\n  const renderFile = source => {\r\n    return(\r\n    <React.Fragment>\r\n      {source.map((photo, index) => {\r\n        if(photo.resource_type === 'image'){\r\n          return (\r\n              <div className=\"list-preview-item\" key={index}>\r\n                <img src={photo.secure_url} />\r\n                <div className={\"list-preview-item-presential \"+index}><AiOutlineClose onClick={() => deleteFile(index)}/></div>\r\n              </div>\r\n          )\r\n          }else {\r\n            return (\r\n              <div className=\"list-preview-item video-item\" key={index}>\r\n                <video>\r\n                     <source src={photo.secure_url} />\r\n                     Your browser does not support HTML5 video.\r\n                </video>\r\n                <div className={\"list-preview-item-presential \"+index}><AiOutlineClose onClick={() => deleteFile(index)}/></div>\r\n              </div>\r\n            )\r\n          }\r\n      })}\r\n      {loading ? <>\r\n        {listLoading.map((load, index) => {\r\n          return(\r\n            <div className=\"list-preview-next-item\" key={index}>\r\n              <Spin />\r\n            </div>\r\n          )\r\n        })}\r\n      </> : null}\r\n      <div className=\"list-preview-next-item\" >\r\n        <label htmlFor=\"update_post_upload_image\"><FiPlus/></label>\r\n      </div>\r\n    </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return(\r\n    <div className=\"list-preview-container\">\r\n      <div className=\"list-preview-wrap\">\r\n        <div className=\"list-preview\" >\r\n          {renderFile(files)}\r\n        </div>\r\n      </div>\r\n        <input id=\"update_post_upload_image\" type=\"file\" multiple onChange={onChange} accept=\"image/*,video/*\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UploadMuti;\r\n"]},"metadata":{},"sourceType":"module"}